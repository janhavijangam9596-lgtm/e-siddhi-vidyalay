import{r as i,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as y,t as f,B as t,L as n,I as v,S as o,e as m,f as u,g as j,h as a,C as x,c as h,T as we,i as Te,j as R,k as F,l as N,a as E,b as I}from"./index-CbaydhWW.js";import{T as Ce,a as Se,b as W,c as b,d as Ae,e as w}from"./table-SvwjoT6S.js";import{D as L,a as z,b as k,c as U,d as H,e as G}from"./dialog-GASJ86Ds.js";import{T as B}from"./textarea-Drs0EPqH.js";import{R as De,F as X,as as Y,at as ee,Z as Me,au as Re,av as Fe,M as Ee,K as _,s as Ie,a4 as Ve,a0 as se,a7 as ae,d as Oe}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function qe(){const[te,q]=i.useState([]),[le,$]=i.useState([]),[ne,K]=i.useState([]),[l,Z]=i.useState({totalAnnouncements:0,activeAnnouncements:0,totalMessages:0,messagesSentToday:0,deliveryRate:0,readRate:0,urgentAnnouncements:0,scheduledMessages:0}),[re,V]=i.useState(!1),[ce,O]=i.useState(!1),[ie,P]=i.useState(!1),[J,de]=i.useState(""),[D,xe]=i.useState(""),[M,he]=i.useState(""),[r,g]=i.useState({title:"",content:"",type:"general",audience:"all",priority:"medium",publishDate:new Date().toISOString().split("T")[0],expiryDate:"",targetGroups:[]}),[c,T]=i.useState({subject:"",content:"",recipientType:"all",messageType:"email",scheduledTime:"",recipientIds:[]}),[d,C]=i.useState({name:"",subject:"",content:"",type:"announcement",category:"general"});i.useEffect(()=>{S()},[]);const S=async()=>{try{const[s,p,A,be]=await Promise.all([y.getAnnouncements().catch(()=>[]),y.getMessages().catch(()=>[]),y.getMessageTemplates().catch(()=>[]),y.getCommunicationStats().catch(()=>({totalAnnouncements:0,activeAnnouncements:0,totalMessages:0,messagesSentToday:0,deliveryRate:0,readRate:0,urgentAnnouncements:0,scheduledMessages:0}))]);q(s||[]),$(p||[]),K(A||[]),Z(be||{totalAnnouncements:0,activeAnnouncements:0,totalMessages:0,messagesSentToday:0,deliveryRate:0,readRate:0,urgentAnnouncements:0,scheduledMessages:0}),s&&s.length>0&&console.log("Communication data loaded successfully")}catch(s){f.error("Failed to load communication data"),console.error(s),q([]),$([]),K([]),Z({totalAnnouncements:0,activeAnnouncements:0,totalMessages:0,messagesSentToday:0,deliveryRate:0,readRate:0,urgentAnnouncements:0,scheduledMessages:0})}finally{}},oe=async()=>{try{const s={...r,status:"published",createdBy:"current_user",viewCount:0,attachments:[]};await y.createAnnouncement(s),f.success("Announcement created successfully"),V(!1),ge(),S()}catch(s){f.error("Failed to create announcement"),console.error(s)}},me=async()=>{try{const s={...c,senderId:"current_user",senderName:"Admin",status:c.scheduledTime?"scheduled":"sent",attachments:[],readReceipts:[]};await y.sendMessage(s),f.success(c.scheduledTime?"Message scheduled successfully":"Message sent successfully"),O(!1),pe(),S()}catch(s){f.error("Failed to send message"),console.error(s)}},ue=async()=>{try{const s={...d,variables:je(d.content),usageCount:0};await y.createMessageTemplate(s),f.success("Template created successfully"),P(!1),ve(),S()}catch(s){f.error("Failed to create template"),console.error(s)}},je=s=>{const p=s.match(/\{\{(\w+)\}\}/g);return p?p.map(A=>A.replace(/\{\{|\}\}/g,"")):[]},ge=()=>{g({title:"",content:"",type:"general",audience:"all",priority:"medium",publishDate:new Date().toISOString().split("T")[0],expiryDate:"",targetGroups:[]})},pe=()=>{T({subject:"",content:"",recipientType:"all",messageType:"email",scheduledTime:"",recipientIds:[]})},ve=()=>{C({name:"",subject:"",content:"",type:"announcement",category:"general"})},ye=s=>{switch(s){case"urgent":return"bg-red-100 text-red-800";case"event":return"bg-blue-100 text-blue-800";case"holiday":return"bg-green-100 text-green-800";case"exam":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},fe=s=>{switch(s){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Q=s=>{switch(s){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800";case"sent":return"bg-green-100 text-green-800";case"delivered":return"bg-blue-100 text-blue-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Ne=(te||[]).filter(s=>s?(s.title||"").toLowerCase().includes(J.toLowerCase())&&(D===""||D==="all"||s.type===D)&&(M===""||M==="all"||s.status===M):!1);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Communication Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage announcements, messages, and school communications"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{variant:"outline",onClick:S,children:[e.jsx(De,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(L,{open:ie,onOpenChange:P,children:[e.jsx(z,{asChild:!0,children:e.jsxs(t,{variant:"outline",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Create Template"]})}),e.jsxs(k,{children:[e.jsxs(U,{children:[e.jsx(H,{children:"Create Message Template"}),e.jsx(G,{children:"Create a reusable template for messages and announcements"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateName",children:"Template Name"}),e.jsx(v,{id:"templateName",value:d.name,onChange:s=>C({...d,name:s.target.value}),placeholder:"Enter template name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateType",children:"Type"}),e.jsxs(o,{value:d.type,onValueChange:s=>C({...d,type:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select type"})}),e.jsxs(j,{children:[e.jsx(a,{value:"announcement",children:"Announcement"}),e.jsx(a,{value:"message",children:"Message"}),e.jsx(a,{value:"notification",children:"Notification"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateCategory",children:"Category"}),e.jsxs(o,{value:d.category,onValueChange:s=>C({...d,category:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select category"})}),e.jsxs(j,{children:[e.jsx(a,{value:"general",children:"General"}),e.jsx(a,{value:"academic",children:"Academic"}),e.jsx(a,{value:"events",children:"Events"}),e.jsx(a,{value:"emergency",children:"Emergency"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateSubject",children:"Subject"}),e.jsx(v,{id:"templateSubject",value:d.subject,onChange:s=>C({...d,subject:s.target.value}),placeholder:"Enter subject line"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"templateContent",children:"Content"}),e.jsx(B,{id:"templateContent",value:d.content,onChange:s=>C({...d,content:s.target.value}),placeholder:"Enter message content. Use {{variable}} for dynamic content.",rows:5}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Use double braces for variables: ","{{studentName}}",", ","{{className}}",", ","{{date}}"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(t,{onClick:ue,children:"Create Template"})]})]})]}),e.jsxs(L,{open:ce,onOpenChange:O,children:[e.jsx(z,{asChild:!0,children:e.jsxs(t,{variant:"outline",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Send Message"]})}),e.jsxs(k,{className:"max-w-2xl",children:[e.jsxs(U,{children:[e.jsx(H,{children:"Send Message"}),e.jsx(G,{children:"Send a message to students, parents, or staff"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"recipientType",children:"Recipients"}),e.jsxs(o,{value:c.recipientType,onValueChange:s=>T({...c,recipientType:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select recipients"})}),e.jsxs(j,{children:[e.jsx(a,{value:"all",children:"All Users"}),e.jsx(a,{value:"students",children:"All Students"}),e.jsx(a,{value:"parents",children:"All Parents"}),e.jsx(a,{value:"staff",children:"All Staff"}),e.jsx(a,{value:"class",children:"Specific Class"}),e.jsx(a,{value:"individual",children:"Individual"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"messageType",children:"Message Type"}),e.jsxs(o,{value:c.messageType,onValueChange:s=>T({...c,messageType:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select type"})}),e.jsxs(j,{children:[e.jsx(a,{value:"email",children:"Email"}),e.jsx(a,{value:"sms",children:"SMS"}),e.jsx(a,{value:"push",children:"Push Notification"}),e.jsx(a,{value:"text",children:"In-App Message"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"messageSubject",children:"Subject"}),e.jsx(v,{id:"messageSubject",value:c.subject,onChange:s=>T({...c,subject:s.target.value}),placeholder:"Enter message subject"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"messageContent",children:"Message Content"}),e.jsx(B,{id:"messageContent",value:c.content,onChange:s=>T({...c,content:s.target.value}),placeholder:"Enter your message",rows:6})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"scheduledTime",children:"Schedule for Later (Optional)"}),e.jsx(v,{id:"scheduledTime",type:"datetime-local",value:c.scheduledTime,onChange:s=>T({...c,scheduledTime:s.target.value})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(t,{type:"button",variant:"outline",size:"sm",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Attach Files"]}),e.jsxs(t,{type:"button",variant:"outline",size:"sm",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Use Template"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(t,{onClick:me,children:c.scheduledTime?"Schedule Message":"Send Message"})]})]})]}),e.jsxs(L,{open:re,onOpenChange:V,children:[e.jsx(z,{asChild:!0,children:e.jsxs(t,{children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"New Announcement"]})}),e.jsxs(k,{className:"max-w-2xl",children:[e.jsxs(U,{children:[e.jsx(H,{children:"Create Announcement"}),e.jsx(G,{children:"Create a new announcement for the school community"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"announcementTitle",children:"Title"}),e.jsx(v,{id:"announcementTitle",value:r.title,onChange:s=>g({...r,title:s.target.value}),placeholder:"Enter announcement title"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"announcementType",children:"Type"}),e.jsxs(o,{value:r.type,onValueChange:s=>g({...r,type:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select type"})}),e.jsxs(j,{children:[e.jsx(a,{value:"general",children:"General"}),e.jsx(a,{value:"urgent",children:"Urgent"}),e.jsx(a,{value:"event",children:"Event"}),e.jsx(a,{value:"holiday",children:"Holiday"}),e.jsx(a,{value:"exam",children:"Exam"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"announcementAudience",children:"Audience"}),e.jsxs(o,{value:r.audience,onValueChange:s=>g({...r,audience:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select audience"})}),e.jsxs(j,{children:[e.jsx(a,{value:"all",children:"Everyone"}),e.jsx(a,{value:"students",children:"Students"}),e.jsx(a,{value:"parents",children:"Parents"}),e.jsx(a,{value:"staff",children:"Staff"}),e.jsx(a,{value:"specific",children:"Specific Groups"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"announcementPriority",children:"Priority"}),e.jsxs(o,{value:r.priority,onValueChange:s=>g({...r,priority:s}),children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select priority"})}),e.jsxs(j,{children:[e.jsx(a,{value:"low",children:"Low"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"high",children:"High"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"announcementContent",children:"Content"}),e.jsx(B,{id:"announcementContent",value:r.content,onChange:s=>g({...r,content:s.target.value}),placeholder:"Enter announcement content",rows:6})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"publishDate",children:"Publish Date"}),e.jsx(v,{id:"publishDate",type:"date",value:r.publishDate,onChange:s=>g({...r,publishDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"expiryDate",children:"Expiry Date (Optional)"}),e.jsx(v,{id:"expiryDate",type:"date",value:r.expiryDate,onChange:s=>g({...r,expiryDate:s.target.value})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(t,{type:"button",variant:"outline",size:"sm",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Attach Files"]}),e.jsxs(t,{type:"button",variant:"outline",size:"sm",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Add Image"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>V(!1),children:"Save as Draft"}),e.jsx(t,{onClick:oe,children:"Publish Announcement"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Announcements"}),e.jsx("p",{className:"text-2xl font-bold",children:l.activeAnnouncements}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",l.totalAnnouncements," total"]})]}),e.jsx(Fe,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Messages Sent Today"}),e.jsx("p",{className:"text-2xl font-bold",children:l.messagesSentToday}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.totalMessages," total"]})]}),e.jsx(Ee,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delivery Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.deliveryRate,"%"]})]}),e.jsx(Y,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Read Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.readRate,"%"]})]}),e.jsx(_,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(we,{defaultValue:"announcements",className:"w-full",children:[e.jsxs(Te,{children:[e.jsx(R,{value:"announcements",children:"Announcements"}),e.jsx(R,{value:"messages",children:"Messages"}),e.jsx(R,{value:"templates",children:"Templates"}),e.jsx(R,{value:"analytics",children:"Analytics"})]}),e.jsxs(F,{value:"announcements",className:"space-y-4",children:[e.jsx(x,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search announcements...",value:J,onChange:s=>de(s.target.value),className:"pl-10"})]})}),e.jsxs(o,{value:D,onValueChange:xe,children:[e.jsxs(m,{className:"w-48",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),e.jsx(u,{placeholder:"Filter by type"})]}),e.jsxs(j,{children:[e.jsx(a,{value:"all",children:"All Types"}),e.jsx(a,{value:"general",children:"General"}),e.jsx(a,{value:"urgent",children:"Urgent"}),e.jsx(a,{value:"event",children:"Event"}),e.jsx(a,{value:"holiday",children:"Holiday"}),e.jsx(a,{value:"exam",children:"Exam"})]})]}),e.jsxs(o,{value:M,onValueChange:he,children:[e.jsx(m,{className:"w-48",children:e.jsx(u,{placeholder:"Filter by status"})}),e.jsxs(j,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"published",children:"Published"}),e.jsx(a,{value:"draft",children:"Draft"}),e.jsx(a,{value:"expired",children:"Expired"})]})]}),e.jsxs(t,{variant:"outline",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Export"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ne.map(s=>e.jsx(x,{className:"hover:shadow-md transition-shadow",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{className:ye(s.type),children:s.type}),e.jsx(N,{className:fe(s.priority),children:s.priority})]}),e.jsx(N,{className:Q(s.status),children:s.status})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-3",children:s.content})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Audience: ",s.audience]}),e.jsxs("span",{children:[s.viewCount," views"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[e.jsx("span",{children:new Date(s.publishDate).toLocaleDateString()}),s.expiryDate&&e.jsxs("span",{children:["Expires: ",new Date(s.expiryDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"View"]}),e.jsxs(t,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]})})},s.id))})]}),e.jsx(F,{value:"messages",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(E,{children:e.jsx(I,{children:"Recent Messages"})}),e.jsx(h,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ce,{children:[e.jsx(Se,{children:e.jsxs(W,{children:[e.jsx(b,{children:"Subject"}),e.jsx(b,{children:"Recipients"}),e.jsx(b,{children:"Type"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Sent Date"}),e.jsx(b,{children:"Delivery Rate"}),e.jsx(b,{children:"Actions"})]})}),e.jsx(Ae,{children:(le||[]).slice(0,10).map(s=>e.jsxs(W,{children:[e.jsx(w,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.subject}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["by ",s.senderName]})]})}),e.jsx(w,{children:e.jsxs("div",{children:[e.jsx("div",{children:s.recipientType}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[(s.recipientIds||[]).length," recipients"]})]})}),e.jsx(w,{children:e.jsx(N,{variant:"outline",children:s.messageType})}),e.jsx(w,{children:e.jsx(N,{className:Q(s.status),children:s.status})}),e.jsx(w,{children:s.scheduledTime?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Oe,{className:"h-3 w-3"}),"Scheduled"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.scheduledTime).toLocaleString()})]}):new Date(s.created_at).toLocaleDateString()}),e.jsx(w,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm",children:[s.readReceipts&&s.readReceipts.length>0?Math.round(s.readReceipts.filter(p=>p.delivered).length/s.readReceipts.length*100):0,"%"]})})}),e.jsx(w,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(se,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(F,{value:"templates",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(E,{children:e.jsx(I,{children:"Message Templates"})}),e.jsx(h,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(ne||[]).map(s=>e.jsx(x,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx(N,{variant:"outline",children:s.type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.subject}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:s.content})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[e.jsx("span",{children:s.category}),e.jsxs("span",{children:[s.usageCount," uses"]})]}),s.variables&&s.variables.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Variables:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.variables.map((p,A)=>e.jsx(N,{variant:"secondary",className:"text-xs",children:p},A))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",className:"flex-1",children:"Use Template"}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(ae,{className:"h-4 w-4"})})]})]})})},s.id))})})]})}),e.jsx(F,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(E,{children:e.jsx(I,{children:"Communication Statistics"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Announcements"}),e.jsx("span",{className:"font-bold",children:l.totalAnnouncements})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Active Announcements"}),e.jsx("span",{className:"font-bold text-green-600",children:l.activeAnnouncements})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Urgent Announcements"}),e.jsx("span",{className:"font-bold text-red-600",children:l.urgentAnnouncements})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Messages Sent Today"}),e.jsx("span",{className:"font-bold",children:l.messagesSentToday})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Scheduled Messages"}),e.jsx("span",{className:"font-bold text-blue-600",children:l.scheduledMessages})]})]})})]}),e.jsxs(x,{children:[e.jsx(E,{children:e.jsx(I,{children:"Engagement Metrics"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:"Delivery Rate"}),e.jsxs("span",{className:"font-bold",children:[l.deliveryRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${l.deliveryRate}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{children:"Read Rate"}),e.jsxs("span",{className:"font-bold",children:[l.readRate,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${l.readRate}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[l.deliveryRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Delivered"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[l.readRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Read"})]})]})]})})]})]})})]})]})}export{qe as CommunicationCenter};
