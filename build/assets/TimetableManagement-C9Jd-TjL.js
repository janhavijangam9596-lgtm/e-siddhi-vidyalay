import{r as c,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as u,t as j,B as l,l as O,T as ae,i as le,j as D,k as P,C as m,c as h,L as i,I as A,S as p,e as v,f as g,g as N,h as a,a as I,b as F}from"./index-CbaydhWW.js";import{T as ie,a as te,b as U,c as f,d as re,e as b}from"./table-SvwjoT6S.js";import{D as M,a as L,b as E,c as G,d as H,e as W}from"./dialog-GASJ86Ds.js";import{P as B}from"./progress-BxpaIchm.js";import{A as ze,a as Be}from"./alert-DYlOQqmu.js";import{C as R}from"./checkbox-DjQKjGtE.js";import{R as Re,O as $,q as Z,m as Ve,K as ce,al as Oe,a7 as _,am as Ue,an as ne,Z as Me,c as Le,U as Ee,a0 as Ge,ag as He,a6 as We,aj as $e}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function rs(){const[Q,de]=c.useState([]),[X,oe]=c.useState([]),[xe,me]=c.useState([]),[q,he]=c.useState([]),[r,je]=c.useState({totalClasses:0,completedTimetables:0,totalConflicts:0,teacherUtilization:0,roomUtilization:0,averagePeriodsPerDay:0}),[qe,ue]=c.useState(!0),[pe,J]=c.useState(!1),[ve,Y]=c.useState(!1),[ge,K]=c.useState(!1),[Ne,fe]=c.useState(!1),[C,be]=c.useState(""),[S,Ce]=c.useState(""),[Je,Ke]=c.useState("current"),[ee,ye]=c.useState("grid"),[x,y]=c.useState({classId:"",day:"monday",period:1,subjectId:"",teacherId:"",roomId:""}),[n,z]=c.useState({templateId:"",classes:[],constraints:{maxPeriodsPerDay:8,minBreakDuration:15,lunchBreakDuration:45,avoidBackToBack:!0,respectTeacherPreferences:!0}}),[d,k]=c.useState({name:"",description:"",periods:[{period:1,startTime:"09:00",endTime:"09:45",duration:45},{period:2,startTime:"09:45",endTime:"10:30",duration:45},{period:3,startTime:"10:45",endTime:"11:30",duration:45},{period:4,startTime:"11:30",endTime:"12:15",duration:45},{period:5,startTime:"13:00",endTime:"13:45",duration:45},{period:6,startTime:"13:45",endTime:"14:30",duration:45}],breaks:[{name:"Short Break",afterPeriod:2,duration:15},{name:"Lunch Break",afterPeriod:4,duration:45}],workingDays:["monday","tuesday","wednesday","thursday","friday"]}),V=["monday","tuesday","wednesday","thursday","friday","saturday"],se=[{period:1,time:"09:00-09:45"},{period:2,time:"09:45-10:30"},{period:3,time:"10:45-11:30"},{period:4,time:"11:30-12:15"},{period:5,time:"13:00-13:45"},{period:6,time:"13:45-14:30"}];c.useEffect(()=>{T()},[C,S]);const T=async()=>{try{const[s,o,t,w,Fe]=await Promise.all([u.getTimetable({class:C,section:S}),u.getTimetableTemplates(),u.getTeacherSchedules(),u.getTimetableConflicts(),u.getTimetableStats()]);de(s),oe(o),me(t),he(w),je(Fe)}catch(s){j.error("Failed to load timetable data"),console.error(s)}finally{ue(!1)}},Te=async()=>{try{await u.createTimetableSlot(x),j.success("Time slot added successfully"),J(!1),Pe(),T()}catch(s){j.error("Failed to add time slot"),console.error(s)}},we=async()=>{try{await u.generateTimetable({templateId:n.templateId,classes:n.classes,constraints:n.constraints}),j.success("Timetable generated successfully"),K(!1),T()}catch(s){j.error("Failed to generate timetable"),console.error(s)}},Se=async()=>{try{await u.createTimetableTemplate(d),j.success("Template saved successfully"),Y(!1),T()}catch(s){j.error("Failed to save template"),console.error(s)}},ke=async(s,o)=>{try{await u.resolveConflict(s,o),j.success("Conflict resolved successfully"),T()}catch(t){j.error("Failed to resolve conflict"),console.error(t)}},De=async()=>{try{await u.optimizeTimetable({class:C,section:S}),j.success("Timetable optimized successfully"),T()}catch(s){j.error("Failed to optimize timetable"),console.error(s)}},Pe=()=>{y({classId:"",day:"monday",period:1,subjectId:"",teacherId:"",roomId:""})},Ae=(s,o)=>(Q||[]).find(t=>t.day.toLowerCase()===s.toLowerCase()&&t.period===o&&t.classId===C),Ie=s=>{switch(s){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Timetable Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage class timetables and schedules"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",onClick:T,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(M,{open:Ne,onOpenChange:fe,children:[e.jsx(L,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Conflicts (",(q||[]).length,")"]})}),e.jsxs(E,{className:"max-w-4xl",children:[e.jsxs(G,{children:[e.jsx(H,{children:"Timetable Conflicts"}),e.jsx(W,{children:"Review and resolve timetable conflicts"})]}),e.jsxs("div",{className:"space-y-4",children:[(q||[]).map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:Ie(s.severity),children:s.severity}),e.jsx("span",{className:"font-medium",children:s.type.replace("_"," ")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",onClick:()=>ke(s.id,"auto"),children:"Auto Resolve"}),e.jsx(l,{size:"sm",variant:"outline",children:"Manual Fix"})]})]})},s.id)),(q||[]).length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Z,{className:"mx-auto h-12 w-12 text-green-500"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"No conflicts found"})]})]})]})]}),e.jsxs(M,{open:ve,onOpenChange:Y,children:[e.jsx(L,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Templates"]})}),e.jsxs(E,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(H,{children:"Timetable Templates"}),e.jsx(W,{children:"Create and manage timetable templates"})]}),e.jsxs(ae,{defaultValue:"existing",children:[e.jsxs(le,{children:[e.jsx(D,{value:"existing",children:"Existing Templates"}),e.jsx(D,{value:"create",children:"Create New"})]}),e.jsx(P,{value:"existing",className:"space-y-4",children:(X||[]).map(s=>e.jsx(m,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[e.jsxs("span",{children:["Periods: ",(s.periods||[]).length]}),e.jsxs("span",{children:["Days: ",(s.workingDays||[]).length]}),e.jsx(O,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(_,{className:"h-4 w-4"})})]})]})})},s.id))}),e.jsxs(P,{value:"create",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"templateName",children:"Template Name"}),e.jsx(A,{id:"templateName",value:d.name,onChange:s=>k({...d,name:s.target.value}),placeholder:"Enter template name"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"templateDesc",children:"Description"}),e.jsx(A,{id:"templateDesc",value:d.description,onChange:s=>k({...d,description:s.target.value}),placeholder:"Enter description"})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Working Days"}),e.jsx("div",{className:"flex gap-2 mt-2",children:V.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:s,checked:(d.workingDays||[]).includes(s),onCheckedChange:o=>{k(o?{...d,workingDays:[...d.workingDays,s]}:{...d,workingDays:(d.workingDays||[]).filter(t=>t!==s)})}}),e.jsx(i,{htmlFor:s,className:"text-sm capitalize",children:s})]},s))})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Period Structure"}),e.jsx("div",{className:"space-y-2 mt-2",children:(d.periods||[]).map((s,o)=>e.jsxs("div",{className:"grid grid-cols-4 gap-2 items-center",children:[e.jsxs("span",{className:"text-sm",children:["Period ",s.period]}),e.jsx(A,{type:"time",value:s.startTime,onChange:t=>{const w=[...d.periods];w[o].startTime=t.target.value,k({...d,periods:w})}}),e.jsx(A,{type:"time",value:s.endTime,onChange:t=>{const w=[...d.periods];w[o].endTime=t.target.value,k({...d,periods:w})}}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.duration,"min"]})]},o))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(l,{onClick:Se,children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Save Template"]})})]})]})]})]}),e.jsxs(M,{open:ge,onOpenChange:K,children:[e.jsx(L,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Generate"]})}),e.jsxs(E,{children:[e.jsxs(G,{children:[e.jsx(H,{children:"Generate Timetable"}),e.jsx(W,{children:"Automatically generate timetable using AI optimization"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"template",children:"Template"}),e.jsxs(p,{value:n.templateId,onValueChange:s=>z({...n,templateId:s}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select template"})}),e.jsx(N,{children:(X||[]).map(s=>e.jsx(a,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Classes to Generate"}),e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"Select classes for which to generate timetables"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"class1a"}),e.jsx(i,{htmlFor:"class1a",children:"Class 1 - A"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"class1b"}),e.jsx(i,{htmlFor:"class1b",children:"Class 1 - B"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Generation Constraints"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"maxPeriods",children:"Max Periods/Day"}),e.jsx(A,{id:"maxPeriods",type:"number",value:n.constraints.maxPeriodsPerDay,onChange:s=>z({...n,constraints:{...n.constraints,maxPeriodsPerDay:parseInt(s.target.value)}})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"minBreak",children:"Min Break (minutes)"}),e.jsx(A,{id:"minBreak",type:"number",value:n.constraints.minBreakDuration,onChange:s=>z({...n,constraints:{...n.constraints,minBreakDuration:parseInt(s.target.value)}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"avoidBackToBack",checked:n.constraints.avoidBackToBack,onCheckedChange:s=>z({...n,constraints:{...n.constraints,avoidBackToBack:!!s}})}),e.jsx(i,{htmlFor:"avoidBackToBack",children:"Avoid back-to-back same subjects"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{id:"teacherPrefs",checked:n.constraints.respectTeacherPreferences,onCheckedChange:s=>z({...n,constraints:{...n.constraints,respectTeacherPreferences:!!s}})}),e.jsx(i,{htmlFor:"teacherPrefs",children:"Respect teacher preferences"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),e.jsx(l,{onClick:we,children:"Generate Timetable"})]})]})]}),e.jsxs(M,{open:pe,onOpenChange:J,children:[e.jsx(L,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Add Slot"]})}),e.jsxs(E,{children:[e.jsxs(G,{children:[e.jsx(H,{children:"Add Time Slot"}),e.jsx(W,{children:"Add a new time slot to the timetable"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"slotClass",children:"Class"}),e.jsxs(p,{value:x.classId,onValueChange:s=>y({...x,classId:s}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select class"})}),e.jsxs(N,{children:[e.jsx(a,{value:"class1a",children:"Class 1 - A"}),e.jsx(a,{value:"class1b",children:"Class 1 - B"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"slotDay",children:"Day"}),e.jsxs(p,{value:x.day,onValueChange:s=>y({...x,day:s}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select day"})}),e.jsx(N,{children:V.map(s=>e.jsx(a,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"slotPeriod",children:"Period"}),e.jsxs(p,{value:x.period.toString(),onValueChange:s=>y({...x,period:parseInt(s)}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select period"})}),e.jsx(N,{children:se.map(s=>e.jsxs(a,{value:s.period.toString(),children:["Period ",s.period," (",s.time,")"]},s.period))})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"slotSubject",children:"Subject"}),e.jsxs(p,{value:x.subjectId,onValueChange:s=>y({...x,subjectId:s}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select subject"})}),e.jsxs(N,{children:[e.jsx(a,{value:"math",children:"Mathematics"}),e.jsx(a,{value:"english",children:"English"}),e.jsx(a,{value:"science",children:"Science"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"slotTeacher",children:"Teacher"}),e.jsxs(p,{value:x.teacherId,onValueChange:s=>y({...x,teacherId:s}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select teacher"})}),e.jsxs(N,{children:[e.jsx(a,{value:"teacher1",children:"John Smith"}),e.jsx(a,{value:"teacher2",children:"Jane Doe"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"slotRoom",children:"Room (Optional)"}),e.jsxs(p,{value:x.roomId,onValueChange:s=>y({...x,roomId:s}),children:[e.jsx(v,{children:e.jsx(g,{placeholder:"Select room"})}),e.jsxs(N,{children:[e.jsx(a,{value:"room101",children:"Room 101"}),e.jsx(a,{value:"room102",children:"Room 102"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(l,{onClick:Te,children:"Add Slot"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Classes"}),e.jsx("p",{className:"text-2xl font-bold",children:r.totalClasses})]}),e.jsx(Le,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed Timetables"}),e.jsx("p",{className:"text-2xl font-bold",children:r.completedTimetables})]}),e.jsx(Z,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Conflicts"}),e.jsx("p",{className:"text-2xl font-bold",children:r.totalConflicts})]}),e.jsx($,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(m,{children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Teacher Utilization"}),e.jsxs("p",{className:"text-2xl font-bold",children:[r.teacherUtilization,"%"]})]}),e.jsx(Ee,{className:"h-8 w-8 text-purple-600"})]}),e.jsx(B,{value:r.teacherUtilization,className:"mt-2"})]})})]}),e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"viewClass",children:"Class"}),e.jsxs(p,{value:C,onValueChange:be,children:[e.jsx(v,{className:"w-40",children:e.jsx(g,{placeholder:"Select class"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All Classes"}),e.jsx(a,{value:"1",children:"Class 1"}),e.jsx(a,{value:"2",children:"Class 2"}),e.jsx(a,{value:"5",children:"Class 5"}),e.jsx(a,{value:"10",children:"Class 10"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"viewSection",children:"Section"}),e.jsxs(p,{value:S,onValueChange:Ce,children:[e.jsx(v,{className:"w-40",children:e.jsx(g,{placeholder:"Select section"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All Sections"}),e.jsx(a,{value:"A",children:"Section A"}),e.jsx(a,{value:"B",children:"Section B"}),e.jsx(a,{value:"C",children:"Section C"})]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"viewMode",children:"View Mode"}),e.jsxs(p,{value:ee,onValueChange:s=>ye(s),children:[e.jsx(v,{className:"w-32",children:e.jsx(g,{})}),e.jsxs(N,{children:[e.jsx(a,{value:"grid",children:"Grid View"}),e.jsx(a,{value:"list",children:"List View"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",onClick:De,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Optimize"]}),e.jsxs(l,{variant:"outline",children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsxs(l,{variant:"outline",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Print"]})]})]})})}),e.jsxs(ae,{defaultValue:"timetable",className:"w-full",children:[e.jsxs(le,{children:[e.jsx(D,{value:"timetable",children:"Timetable View"}),e.jsx(D,{value:"teachers",children:"Teacher Schedules"}),e.jsx(D,{value:"rooms",children:"Room Allocation"}),e.jsx(D,{value:"analytics",children:"Analytics"})]}),e.jsx(P,{value:"timetable",className:"space-y-4",children:ee==="grid"?e.jsxs(m,{children:[e.jsx(I,{children:e.jsxs(F,{children:["Weekly Timetable - ",C&&S?`Class ${C}-${S}`:"All Classes"]})}),e.jsx(h,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ie,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(f,{className:"w-20",children:"Time"}),V.map(s=>e.jsx(f,{className:"text-center min-w-32",children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})}),e.jsx(re,{children:se.map(s=>e.jsxs(U,{children:[e.jsxs(b,{className:"font-medium",children:[e.jsxs("div",{className:"text-xs",children:["Period ",s.period]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.time})]}),V.map(o=>{const t=Ae(o,s.period);return e.jsx(b,{className:"p-2",children:t?e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 text-xs",children:[e.jsx("div",{className:"font-medium text-blue-900",children:t.subjectName}),e.jsx("div",{className:"text-blue-700",children:t.teacherName}),t.roomNumber&&e.jsxs("div",{className:"text-blue-600",children:["Room ",t.roomNumber]})]}):e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded p-2 text-xs text-center text-gray-400",children:"Free"})},`${o}-${s.period}`)})]},s.period))})]})})})]}):e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(F,{children:"Timetable List View"})}),e.jsx(h,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ie,{children:[e.jsx(te,{children:e.jsxs(U,{children:[e.jsx(f,{children:"Day"}),e.jsx(f,{children:"Period"}),e.jsx(f,{children:"Time"}),e.jsx(f,{children:"Class"}),e.jsx(f,{children:"Subject"}),e.jsx(f,{children:"Teacher"}),e.jsx(f,{children:"Room"}),e.jsx(f,{children:"Actions"})]})}),e.jsx(re,{children:(Q||[]).map(s=>e.jsxs(U,{children:[e.jsx(b,{children:s.day.charAt(0).toUpperCase()+s.day.slice(1)}),e.jsx(b,{children:s.period}),e.jsxs(b,{children:[s.startTime," - ",s.endTime]}),e.jsxs(b,{children:[s.className," - ",s.section]}),e.jsx(b,{children:s.subjectName}),e.jsx(b,{children:s.teacherName}),e.jsx(b,{children:s.roomNumber||"-"}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(_,{className:"h-4 w-4"})}),s.isLocked?e.jsx(O,{variant:"outline",className:"text-xs",children:"Locked"}):e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(We,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(P,{value:"teachers",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(F,{children:"Teacher Schedules"})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:(xe||[]).map(s=>e.jsx(m,{children:e.jsxs(h,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.teacherName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.department})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:s.assignedPeriods}),e.jsxs("span",{className:"text-muted-foreground",children:["/",s.totalPeriods," periods"]})]}),e.jsx(B,{value:s.assignedPeriods/s.totalPeriods*100,className:"w-24 h-2 mt-1"})]})]}),(s.conflicts||[]).length>0&&e.jsxs(ze,{className:"mb-3",children:[e.jsx($,{className:"h-4 w-4"}),e.jsxs(Be,{children:[(s.conflicts||[]).length," scheduling conflicts detected"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Free slots: ",(s.freeSlots||[]).length]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{size:"sm",variant:"outline",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"View Schedule"]}),e.jsxs(l,{size:"sm",variant:"outline",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]})]})},s.teacherId))})})]})}),e.jsx(P,{value:"rooms",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(F,{children:"Room Allocation"})}),e.jsx(h,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx($e,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Room allocation view coming soon"})]})})]})}),e.jsx(P,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(F,{children:"Utilization Statistics"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Teacher Utilization"}),e.jsxs("span",{className:"font-bold",children:[r.teacherUtilization,"%"]})]}),e.jsx(B,{value:r.teacherUtilization,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Room Utilization"}),e.jsxs("span",{className:"font-bold",children:[r.roomUtilization,"%"]})]}),e.jsx(B,{value:r.roomUtilization,className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:r.averagePeriodsPerDay}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Periods/Day"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:r.completedTimetables}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Completed"})]})]})]})})]}),e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(F,{children:"Timetable Health"})}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Total Conflicts"}),e.jsx(O,{variant:r.totalConflicts>0?"destructive":"default",children:r.totalConflicts})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Completion Rate"}),e.jsxs("span",{className:"font-bold",children:[Math.round(r.completedTimetables/r.totalClasses*100),"%"]})]}),e.jsx(B,{value:r.completedTimetables/r.totalClasses*100,className:"w-full"}),e.jsx("div",{className:"text-center mt-4",children:r.totalConflicts===0?e.jsxs("div",{className:"text-green-600",children:[e.jsx(Z,{className:"mx-auto h-8 w-8"}),e.jsx("p",{className:"text-sm mt-1",children:"All timetables are conflict-free"})]}):e.jsxs("div",{className:"text-red-600",children:[e.jsx($,{className:"mx-auto h-8 w-8"}),e.jsx("p",{className:"text-sm mt-1",children:"Conflicts need attention"})]})})]})})]})]})})]})]})}export{rs as TimetableManagement};
