import{r as o,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as S,t as w,B as d,L as n,S as p,e as g,f as v,g as N,h as a,I as h,T as xe,i as je,j as b,k as C,C as m,c as u,a as D,b as F,l as T}from"./index-CbaydhWW.js";import{T as q,a as H,b as P,c as t,d as J,e as r}from"./table-SvwjoT6S.js";import{D as X,a as me,b as Y,c as Z,d as ee,e as ue}from"./dialog-GASJ86Ds.js";import{T as fe}from"./textarea-Drs0EPqH.js";import{P as Re}from"./progress-BxpaIchm.js";import{C as pe}from"./checkbox-DjQKjGtE.js";import{C as _e}from"./calendar-C1WlRAYT.js";import{R as ze,Z as Ge,a3 as qe,U as He,b as Je,G as Ue,D as $e,s as Qe,a4 as We,a0 as se,a9 as Ke,F as Xe,K as ae,a7 as le,q as Ye,ab as Ze,i as ge}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function fs(){const[I,ne]=o.useState([]),[ve,te]=o.useState([]),[Ne,re]=o.useState([]),[ye,ie]=o.useState([]),[j,Se]=o.useState({totalStaff:0,activeStaff:0,teachingStaff:0,nonTeachingStaff:0,onLeave:0,newJoinees:0,averageSalary:0,totalPayroll:0}),[we,be]=o.useState(!0),[Ce,U]=o.useState(!1),[De,ce]=o.useState(!1),[es,Fe]=o.useState(!1),[Le,$]=o.useState(!1),[ss,as]=o.useState(!1),[c,de]=o.useState(null),[M,Pe]=o.useState(""),[_,Te]=o.useState(""),[z,Ae]=o.useState(""),[Q,ls]=o.useState(""),[L,oe]=o.useState(1),[O]=o.useState(10),[A,B]=o.useState([]),[l,i]=o.useState({firstName:"",lastName:"",email:"",phone:"",alternatePhone:"",dateOfBirth:"",gender:"male",address:"",city:"",state:"",pincode:"",emergencyContact:"",emergencyPhone:"",joiningDate:"",department:"",designation:"",employmentType:"full_time",salary:"",qualification:"",experience:"",bloodGroup:"",maritalStatus:"single",reportingManager:"",bankAccountNumber:"",ifscCode:"",panNumber:"",aadharNumber:""}),[f,k]=o.useState({staffId:"",leaveType:"casual",startDate:"",endDate:"",reason:""});o.useEffect(()=>{E()},[]);const E=async()=>{try{const[s,x,y,R,K]=await Promise.all([S.getStaff().catch(()=>[]),S.getStaffAttendance().catch(()=>[]),S.getStaffLeaves().catch(()=>[]),S.getStaffPayroll().catch(()=>[]),S.getStaffStats().catch(()=>({totalStaff:0,activeStaff:0,teachingStaff:0,nonTeachingStaff:0,onLeave:0,newJoinees:0,averageSalary:0,totalPayroll:0}))]);ne(s||[]),te(x||[]),re(y||[]),ie(R||[]),Se(K||{totalStaff:0,activeStaff:0,teachingStaff:0,nonTeachingStaff:0,onLeave:0,newJoinees:0,averageSalary:0,totalPayroll:0})}catch(s){w.error("Failed to load staff data"),console.error(s),ne([]),te([]),re([]),ie([])}finally{be(!1)}},ke=async()=>{try{const s={...l,employeeId:`EMP${Date.now()}`,salary:parseFloat(l.salary),experience:parseInt(l.experience),status:"active",documents:[]};await S.createStaff(s),w.success("Staff member added successfully"),U(!1),Oe(),E()}catch(s){w.error("Failed to add staff member"),console.error(s)}},Ee=async()=>{try{const s={...f,appliedDate:new Date().toISOString(),status:"pending",totalDays:Me(f.startDate,f.endDate)};await S.applyLeave(s),w.success("Leave application submitted successfully"),$(!1),Be(),E()}catch(s){w.error("Failed to apply leave"),console.error(s)}},he=async(s,x,y)=>{try{await S.updateLeaveStatus(s,{status:x,approvedDate:new Date().toISOString(),remarks:y}),w.success(`Leave ${x} successfully`),E()}catch(R){w.error(`Failed to ${x} leave`),console.error(R)}},Ie=async(s,x)=>{try{await S.generatePayroll({month:s,year:x}),w.success("Payroll generated successfully"),E()}catch(y){w.error("Failed to generate payroll"),console.error(y)}},Me=(s,x)=>{const y=new Date(s),R=new Date(x),K=Math.abs(R.getTime()-y.getTime());return Math.ceil(K/(1e3*60*60*24))+1},Oe=()=>{i({firstName:"",lastName:"",email:"",phone:"",alternatePhone:"",dateOfBirth:"",gender:"male",address:"",city:"",state:"",pincode:"",emergencyContact:"",emergencyPhone:"",joiningDate:"",department:"",designation:"",employmentType:"full_time",salary:"",qualification:"",experience:"",bloodGroup:"",maritalStatus:"single",reportingManager:"",bankAccountNumber:"",ifscCode:"",panNumber:"",aadharNumber:""})},Be=()=>{k({staffId:"",leaveType:"casual",startDate:"",endDate:"",reason:""})},V=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"terminated":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"paid":return"bg-green-100 text-green-800";case"processed":return"bg-blue-100 text-blue-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},G=I.filter(s=>(s.firstName.toLowerCase().includes(M.toLowerCase())||s.lastName.toLowerCase().includes(M.toLowerCase())||s.employeeId.toLowerCase().includes(M.toLowerCase())||s.email.toLowerCase().includes(M.toLowerCase()))&&(_===""||_==="all"||s.department===_)&&(z===""||z==="all"||s.status===z)&&(Q===""||Q==="all"||s.designation===Q)),Ve=Math.ceil(G.length/O),W=G.slice((L-1)*O,L*O);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Staff Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage staff members, attendance, and payroll"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",onClick:E,children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(X,{open:Le,onOpenChange:$,children:[e.jsx(me,{asChild:!0,children:e.jsxs(d,{variant:"outline",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Apply Leave"]})}),e.jsxs(Y,{children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Apply for Leave"}),e.jsx(ue,{children:"Submit a leave application for staff member"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"leaveStaff",children:"Staff Member"}),e.jsxs(p,{value:f.staffId,onValueChange:s=>k({...f,staffId:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select staff member"})}),e.jsx(N,{children:I.filter(s=>s.status==="active").map(s=>e.jsxs(a,{value:s.id,children:[s.firstName," ",s.lastName," - ",s.designation]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"leaveType",children:"Leave Type"}),e.jsxs(p,{value:f.leaveType,onValueChange:s=>k({...f,leaveType:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select leave type"})}),e.jsxs(N,{children:[e.jsx(a,{value:"casual",children:"Casual Leave"}),e.jsx(a,{value:"sick",children:"Sick Leave"}),e.jsx(a,{value:"earned",children:"Earned Leave"}),e.jsx(a,{value:"maternity",children:"Maternity Leave"}),e.jsx(a,{value:"paternity",children:"Paternity Leave"}),e.jsx(a,{value:"emergency",children:"Emergency Leave"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"startDate",children:"Start Date"}),e.jsx(h,{id:"startDate",type:"date",value:f.startDate,onChange:s=>k({...f,startDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"endDate",children:"End Date"}),e.jsx(h,{id:"endDate",type:"date",value:f.endDate,onChange:s=>k({...f,endDate:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"leaveReason",children:"Reason"}),e.jsx(fe,{id:"leaveReason",value:f.reason,onChange:s=>k({...f,reason:s.target.value}),placeholder:"Enter reason for leave",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(d,{onClick:Ee,children:"Apply Leave"})]})]})]}),e.jsxs(X,{open:Ce,onOpenChange:U,children:[e.jsx(me,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Add Staff"]})}),e.jsxs(Y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:"Add New Staff Member"}),e.jsx(ue,{children:"Add a new staff member to the organization"})]}),e.jsxs(xe,{defaultValue:"personal",className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-4",children:[e.jsx(b,{value:"personal",children:"Personal"}),e.jsx(b,{value:"professional",children:"Professional"}),e.jsx(b,{value:"financial",children:"Financial"}),e.jsx(b,{value:"documents",children:"Documents"})]}),e.jsxs(C,{value:"personal",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"firstName",children:"First Name"}),e.jsx(h,{id:"firstName",value:l.firstName,onChange:s=>i({...l,firstName:s.target.value}),placeholder:"Enter first name"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"lastName",children:"Last Name"}),e.jsx(h,{id:"lastName",value:l.lastName,onChange:s=>i({...l,lastName:s.target.value}),placeholder:"Enter last name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",value:l.email,onChange:s=>i({...l,email:s.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"phone",children:"Phone"}),e.jsx(h,{id:"phone",value:l.phone,onChange:s=>i({...l,phone:s.target.value}),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(h,{id:"dateOfBirth",type:"date",value:l.dateOfBirth,onChange:s=>i({...l,dateOfBirth:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"gender",children:"Gender"}),e.jsxs(p,{value:l.gender,onValueChange:s=>i({...l,gender:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select gender"})}),e.jsxs(N,{children:[e.jsx(a,{value:"male",children:"Male"}),e.jsx(a,{value:"female",children:"Female"}),e.jsx(a,{value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"address",children:"Address"}),e.jsx(fe,{id:"address",value:l.address,onChange:s=>i({...l,address:s.target.value}),placeholder:"Enter full address"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"city",children:"City"}),e.jsx(h,{id:"city",value:l.city,onChange:s=>i({...l,city:s.target.value}),placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"state",children:"State"}),e.jsx(h,{id:"state",value:l.state,onChange:s=>i({...l,state:s.target.value}),placeholder:"Enter state"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"pincode",children:"Pincode"}),e.jsx(h,{id:"pincode",value:l.pincode,onChange:s=>i({...l,pincode:s.target.value}),placeholder:"Enter pincode"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"emergencyContact",children:"Emergency Contact"}),e.jsx(h,{id:"emergencyContact",value:l.emergencyContact,onChange:s=>i({...l,emergencyContact:s.target.value}),placeholder:"Enter emergency contact name"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"emergencyPhone",children:"Emergency Phone"}),e.jsx(h,{id:"emergencyPhone",value:l.emergencyPhone,onChange:s=>i({...l,emergencyPhone:s.target.value}),placeholder:"Enter emergency phone number"})]})]})]}),e.jsxs(C,{value:"professional",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"joiningDate",children:"Joining Date"}),e.jsx(h,{id:"joiningDate",type:"date",value:l.joiningDate,onChange:s=>i({...l,joiningDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"employmentType",children:"Employment Type"}),e.jsxs(p,{value:l.employmentType,onValueChange:s=>i({...l,employmentType:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select employment type"})}),e.jsxs(N,{children:[e.jsx(a,{value:"full_time",children:"Full Time"}),e.jsx(a,{value:"part_time",children:"Part Time"}),e.jsx(a,{value:"contract",children:"Contract"}),e.jsx(a,{value:"temporary",children:"Temporary"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"department",children:"Department"}),e.jsxs(p,{value:l.department,onValueChange:s=>i({...l,department:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select department"})}),e.jsxs(N,{children:[e.jsx(a,{value:"academic",children:"Academic"}),e.jsx(a,{value:"administration",children:"Administration"}),e.jsx(a,{value:"finance",children:"Finance"}),e.jsx(a,{value:"hr",children:"Human Resources"}),e.jsx(a,{value:"it",children:"Information Technology"}),e.jsx(a,{value:"maintenance",children:"Maintenance"}),e.jsx(a,{value:"transport",children:"Transport"}),e.jsx(a,{value:"security",children:"Security"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"designation",children:"Designation"}),e.jsxs(p,{value:l.designation,onValueChange:s=>i({...l,designation:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select designation"})}),e.jsxs(N,{children:[e.jsx(a,{value:"principal",children:"Principal"}),e.jsx(a,{value:"vice_principal",children:"Vice Principal"}),e.jsx(a,{value:"head_teacher",children:"Head Teacher"}),e.jsx(a,{value:"teacher",children:"Teacher"}),e.jsx(a,{value:"assistant_teacher",children:"Assistant Teacher"}),e.jsx(a,{value:"librarian",children:"Librarian"}),e.jsx(a,{value:"counselor",children:"Counselor"}),e.jsx(a,{value:"accountant",children:"Accountant"}),e.jsx(a,{value:"clerk",children:"Clerk"}),e.jsx(a,{value:"peon",children:"Peon"}),e.jsx(a,{value:"security_guard",children:"Security Guard"}),e.jsx(a,{value:"driver",children:"Driver"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"qualification",children:"Qualification"}),e.jsx(h,{id:"qualification",value:l.qualification,onChange:s=>i({...l,qualification:s.target.value}),placeholder:"Enter highest qualification"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"experience",children:"Experience (years)"}),e.jsx(h,{id:"experience",type:"number",value:l.experience,onChange:s=>i({...l,experience:s.target.value}),placeholder:"Enter years of experience"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"reportingManager",children:"Reporting Manager"}),e.jsxs(p,{value:l.reportingManager,onValueChange:s=>i({...l,reportingManager:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select reporting manager"})}),e.jsx(N,{children:I.filter(s=>s.status==="active").map(s=>e.jsxs(a,{value:s.id,children:[s.firstName," ",s.lastName," - ",s.designation]},s.id))})]})]})]}),e.jsxs(C,{value:"financial",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"salary",children:"Monthly Salary"}),e.jsx(h,{id:"salary",type:"number",value:l.salary,onChange:s=>i({...l,salary:s.target.value}),placeholder:"Enter monthly salary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"bankAccountNumber",children:"Bank Account Number"}),e.jsx(h,{id:"bankAccountNumber",value:l.bankAccountNumber,onChange:s=>i({...l,bankAccountNumber:s.target.value}),placeholder:"Enter bank account number"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"ifscCode",children:"IFSC Code"}),e.jsx(h,{id:"ifscCode",value:l.ifscCode,onChange:s=>i({...l,ifscCode:s.target.value}),placeholder:"Enter IFSC code"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"panNumber",children:"PAN Number"}),e.jsx(h,{id:"panNumber",value:l.panNumber,onChange:s=>i({...l,panNumber:s.target.value}),placeholder:"Enter PAN number"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"aadharNumber",children:"Aadhar Number"}),e.jsx(h,{id:"aadharNumber",value:l.aadharNumber,onChange:s=>i({...l,aadharNumber:s.target.value}),placeholder:"Enter Aadhar number"})]})]})]}),e.jsxs(C,{value:"documents",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"bloodGroup",children:"Blood Group"}),e.jsxs(p,{value:l.bloodGroup,onValueChange:s=>i({...l,bloodGroup:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select blood group"})}),e.jsxs(N,{children:[e.jsx(a,{value:"A+",children:"A+"}),e.jsx(a,{value:"A-",children:"A-"}),e.jsx(a,{value:"B+",children:"B+"}),e.jsx(a,{value:"B-",children:"B-"}),e.jsx(a,{value:"AB+",children:"AB+"}),e.jsx(a,{value:"AB-",children:"AB-"}),e.jsx(a,{value:"O+",children:"O+"}),e.jsx(a,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"maritalStatus",children:"Marital Status"}),e.jsxs(p,{value:l.maritalStatus,onValueChange:s=>i({...l,maritalStatus:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select marital status"})}),e.jsxs(N,{children:[e.jsx(a,{value:"single",children:"Single"}),e.jsx(a,{value:"married",children:"Married"}),e.jsx(a,{value:"divorced",children:"Divorced"}),e.jsx(a,{value:"widowed",children:"Widowed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Document Upload"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(qe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Click to upload documents or drag and drop"}),e.jsx("p",{className:"text-xs text-gray-500",children:"(Resume, ID Proof, Address Proof, Certificates)"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(d,{onClick:ke,children:"Add Staff Member"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(m,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:j.totalStaff})]}),e.jsx(He,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(m,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:j.activeStaff})]}),e.jsx(Je,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(m,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Teaching Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:j.teachingStaff})]}),e.jsx(Ue,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(m,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Payroll"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",j.totalPayroll.toLocaleString()]})]}),e.jsx($e,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(xe,{defaultValue:"staff",className:"w-full",children:[e.jsxs(je,{children:[e.jsx(b,{value:"staff",children:"Staff Directory"}),e.jsx(b,{value:"attendance",children:"Attendance"}),e.jsx(b,{value:"leaves",children:"Leave Management"}),e.jsx(b,{value:"payroll",children:"Payroll"}),e.jsx(b,{value:"reports",children:"Reports"})]}),e.jsxs(C,{value:"staff",className:"space-y-4",children:[e.jsx(m,{children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(h,{placeholder:"Search staff...",value:M,onChange:s=>Pe(s.target.value),className:"pl-10"})]})}),e.jsxs(p,{value:_,onValueChange:Te,children:[e.jsxs(g,{className:"w-48",children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),e.jsx(v,{placeholder:"Filter by department"})]}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All Departments"}),e.jsx(a,{value:"academic",children:"Academic"}),e.jsx(a,{value:"administration",children:"Administration"}),e.jsx(a,{value:"finance",children:"Finance"}),e.jsx(a,{value:"hr",children:"Human Resources"}),e.jsx(a,{value:"it",children:"Information Technology"}),e.jsx(a,{value:"maintenance",children:"Maintenance"})]})]}),e.jsxs(p,{value:z,onValueChange:Ae,children:[e.jsx(g,{className:"w-48",children:e.jsx(v,{placeholder:"Filter by status"})}),e.jsxs(N,{children:[e.jsx(a,{value:"all",children:"All Status"}),e.jsx(a,{value:"active",children:"Active"}),e.jsx(a,{value:"inactive",children:"Inactive"}),e.jsx(a,{value:"on_leave",children:"On Leave"}),e.jsx(a,{value:"terminated",children:"Terminated"})]})]}),e.jsxs(d,{variant:"outline",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Export"]})]}),A.length>0&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-blue-50 rounded-lg mt-4",children:[e.jsxs("span",{className:"text-sm",children:[A.length," staff selected"]}),e.jsxs(d,{size:"sm",variant:"outline",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Send Email"]}),e.jsxs(d,{size:"sm",variant:"outline",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Generate Report"]}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>B([]),children:"Clear"})]})]})}),e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{children:"Staff Directory"})}),e.jsxs(u,{children:[we?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(P,{children:[e.jsx(t,{className:"w-12",children:e.jsx(pe,{checked:A.length===W.length,onCheckedChange:s=>{B(s?W.map(x=>x.id):[])}})}),e.jsx(t,{children:"Employee ID"}),e.jsx(t,{children:"Name"}),e.jsx(t,{children:"Department"}),e.jsx(t,{children:"Designation"}),e.jsx(t,{children:"Contact"}),e.jsx(t,{children:"Joining Date"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(J,{children:W.map(s=>e.jsxs(P,{children:[e.jsx(r,{children:e.jsx(pe,{checked:A.includes(s.id),onCheckedChange:x=>{B(x?[...A,s.id]:A.filter(y=>y!==s.id))}})}),e.jsx(r,{className:"font-mono",children:s.employeeId}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email})]})}),e.jsx(r,{children:e.jsx(T,{variant:"outline",children:s.department})}),e.jsx(r,{children:s.designation}),e.jsx(r,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.phone}),e.jsx("div",{className:"text-muted-foreground",children:s.city})]})}),e.jsx(r,{children:new Date(s.joiningDate).toLocaleDateString()}),e.jsx(r,{children:e.jsx(T,{className:V(s.status),children:s.status.replace("_"," ")})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{size:"sm",variant:"outline",onClick:()=>{de(s),ce(!0)},children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>{de(s),Fe(!0)},children:e.jsx(le,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(L-1)*O+1," to"," ",Math.min(L*O,G.length)," of"," ",G.length," staff members"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>oe(L-1),disabled:L===1,children:"Previous"}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>oe(L+1),disabled:L===Ve,children:"Next"})]})]})]})]})]}),e.jsx(C,{value:"attendance",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{children:"Staff Attendance"})}),e.jsx(u,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(P,{children:[e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Staff Member"}),e.jsx(t,{children:"Check In"}),e.jsx(t,{children:"Check Out"}),e.jsx(t,{children:"Working Hours"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(J,{children:ve.slice(0,10).map(s=>e.jsxs(P,{children:[e.jsx(r,{children:new Date(s.date).toLocaleDateString()}),e.jsxs(r,{children:[I.find(x=>x.id===s.staffId)?.firstName," ",I.find(x=>x.id===s.staffId)?.lastName]}),e.jsx(r,{children:s.checkIn}),e.jsx(r,{children:s.checkOut||"-"}),e.jsx(r,{children:s.workingHours?`${s.workingHours}h`:"-"}),e.jsx(r,{children:e.jsx(T,{className:V(s.status),children:s.status.replace("_"," ")})}),e.jsx(r,{children:e.jsx(d,{size:"sm",variant:"outline",children:e.jsx(le,{className:"h-4 w-4"})})})]},s.id))})]})})})]})}),e.jsx(C,{value:"leaves",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{children:"Leave Applications"})}),e.jsx(u,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(P,{children:[e.jsx(t,{children:"Staff Member"}),e.jsx(t,{children:"Leave Type"}),e.jsx(t,{children:"Duration"}),e.jsx(t,{children:"Reason"}),e.jsx(t,{children:"Applied Date"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(J,{children:Ne.map(s=>e.jsxs(P,{children:[e.jsx(r,{children:s.staffName}),e.jsx(r,{children:e.jsx(T,{variant:"outline",children:s.leaveType.replace("_"," ")})}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsxs("div",{children:[new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.totalDays," days"]})]})}),e.jsx(r,{children:s.reason}),e.jsx(r,{children:new Date(s.appliedDate).toLocaleDateString()}),e.jsx(r,{children:e.jsx(T,{className:V(s.status),children:s.status})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"sm",onClick:()=>he(s.id,"approved"),children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>he(s.id,"rejected"),children:e.jsx(Ze,{className:"h-4 w-4"})})]}),e.jsx(d,{size:"sm",variant:"outline",children:e.jsx(ae,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsxs(C,{value:"payroll",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Payroll Management"}),e.jsxs(d,{onClick:()=>Ie("December",2024),children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Generate Payroll"]})]}),e.jsx(m,{children:e.jsx(u,{className:"p-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(q,{children:[e.jsx(H,{children:e.jsxs(P,{children:[e.jsx(t,{children:"Staff Member"}),e.jsx(t,{children:"Month/Year"}),e.jsx(t,{children:"Basic Salary"}),e.jsx(t,{children:"Allowances"}),e.jsx(t,{children:"Deductions"}),e.jsx(t,{children:"Net Salary"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(J,{children:ye.map(s=>e.jsxs(P,{children:[e.jsx(r,{children:s.staffName}),e.jsxs(r,{children:[s.month," ",s.year]}),e.jsxs(r,{children:["₹",s.basicSalary.toLocaleString()]}),e.jsxs(r,{children:["₹",s.allowances.toLocaleString()]}),e.jsxs(r,{children:["₹",s.deductions.toLocaleString()]}),e.jsxs(r,{className:"font-bold",children:["₹",s.netSalary.toLocaleString()]}),e.jsx(r,{children:e.jsx(T,{className:V(s.status),children:s.status})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{size:"sm",variant:"outline",children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",children:e.jsx(ae,{className:"h-4 w-4"})})]})})]},s.id))})]})})})})]}),e.jsx(C,{value:"reports",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{children:"Staff Overview"})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Staff"}),e.jsx("span",{className:"font-bold",children:j.totalStaff})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Teaching Staff"}),e.jsx("span",{className:"font-bold",children:j.teachingStaff})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Non-Teaching Staff"}),e.jsx("span",{className:"font-bold",children:j.nonTeachingStaff})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Staff on Leave"}),e.jsx("span",{className:"font-bold text-orange-600",children:j.onLeave})]}),e.jsx(Re,{value:j.activeStaff/j.totalStaff*100,className:"w-full"}),e.jsxs("div",{className:"text-sm text-center text-muted-foreground",children:[Math.round(j.activeStaff/j.totalStaff*100),"% staff active"]})]})})]}),e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{children:"Payroll Summary"})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Monthly Payroll"}),e.jsxs("span",{className:"font-bold",children:["₹",j.totalPayroll.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Average Salary"}),e.jsxs("span",{className:"font-bold",children:["₹",j.averageSalary.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"New Joiners"}),e.jsx("span",{className:"font-bold text-green-600",children:j.newJoinees})]})]})})]})]})})]}),e.jsx(X,{open:De,onOpenChange:ce,children:e.jsxs(Y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Z,{children:e.jsx(ee,{children:"Staff Details"})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{className:"text-lg",children:"Personal Information"})}),e.jsxs(u,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Employee ID:"}),e.jsx("span",{className:"font-mono",children:c.employeeId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"}),e.jsxs("span",{children:[c.firstName," ",c.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Email:"}),e.jsx("span",{children:c.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),e.jsx("span",{children:c.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date of Birth:"}),e.jsx("span",{children:new Date(c.dateOfBirth).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Gender:"}),e.jsx("span",{children:c.gender})]})]})]}),e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{className:"text-lg",children:"Professional Information"})}),e.jsxs(u,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Department:"}),e.jsx("span",{children:c.department})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Designation:"}),e.jsx("span",{children:c.designation})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Joining Date:"}),e.jsx("span",{children:new Date(c.joiningDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Employment Type:"}),e.jsx("span",{children:c.employmentType.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Qualification:"}),e.jsx("span",{children:c.qualification})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Experience:"}),e.jsxs("span",{children:[c.experience," years"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{className:"text-lg",children:"Contact Information"})}),e.jsxs(u,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Address:"}),e.jsx("span",{className:"text-right",children:c.address})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"City:"}),e.jsx("span",{children:c.city})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"State:"}),e.jsx("span",{children:c.state})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pincode:"}),e.jsx("span",{children:c.pincode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Emergency Contact:"}),e.jsx("span",{children:c.emergencyContact})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Emergency Phone:"}),e.jsx("span",{children:c.emergencyPhone})]})]})]}),e.jsxs(m,{children:[e.jsx(D,{children:e.jsx(F,{className:"text-lg",children:"Financial Information"})}),e.jsxs(u,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Monthly Salary:"}),e.jsxs("span",{className:"font-bold",children:["₹",c.salary.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Bank Account:"}),e.jsx("span",{className:"font-mono",children:c.bankAccountNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"IFSC Code:"}),e.jsx("span",{children:c.ifscCode})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"PAN Number:"}),e.jsx("span",{className:"font-mono",children:c.panNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(T,{className:V(c.status),children:c.status.replace("_"," ")})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}),e.jsxs(d,{variant:"outline",children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Download Resume"]}),e.jsxs(d,{variant:"outline",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"View Payroll"]})]})]})]})})]})}export{fs as StaffManagement};
