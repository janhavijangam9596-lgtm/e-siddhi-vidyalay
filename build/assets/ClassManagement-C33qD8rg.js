import{r as c,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as f,t as v,B as l,L as d,I as y,S as w,e as T,f as k,g as A,h as a,C as x,c as o,T as Re,i as Be,j as W,k as L,a as b,b as C,l as I}from"./index-CbaydhWW.js";import{T as ee,a as se,b as P,c as i,d as ae,e as t}from"./table-SvwjoT6S.js";import{D as M,a as le,b as H,c as J,d as G,e as ce}from"./dialog-GASJ86Ds.js";import{T as Ve}from"./textarea-Drs0EPqH.js";import{P as U}from"./progress-BxpaIchm.js";import{C as K}from"./checkbox-DjQKjGtE.js";import{R as Ye,o as We,Z as Le,j as Me,U as He,h as Je,V as Ge,s as Ke,a4 as qe,a0 as re,a as ie,m as Ze,K as te,c as ne,a7 as de}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function ds(){const[R,he]=c.useState([]),[xe,oe]=c.useState([]),[pe,je]=c.useState([]),[m,ve]=c.useState({totalClasses:0,totalStudents:0,averageStrength:0,teacherStudentRatio:0,capacityUtilization:0,activeTeachers:0}),[Ne,fe]=c.useState(!0),[be,q]=c.useState(!1),[Ce,Z]=c.useState(!1),[Se,me]=c.useState(!1),[ye,$]=c.useState(!1),[$e,Qe]=c.useState(!1),[j,we]=c.useState(null),[z,Te]=c.useState(""),[B,ke]=c.useState(""),[Q,Xe]=c.useState(""),[N,ue]=c.useState(1),[E]=c.useState(10),[D,O]=c.useState([]),[r,g]=c.useState({className:"",section:"",academicYear:"2024-25",classTeacherId:"",roomNumber:"",capacity:"40",subjects:[]}),[h,S]=c.useState({name:"",code:"",teacherId:"",periodsPerWeek:"5",syllabus:"",books:""}),[p,V]=c.useState({classId:"",studentIds:[]});c.useEffect(()=>{F()},[]);const F=async()=>{try{const[s,n,u,_]=await Promise.all([f.getClasses().catch(()=>[]),f.getSubjects().catch(()=>[]),f.getUnassignedStudents().catch(()=>[]),f.getClassStats().catch(()=>({totalClasses:0,totalStudents:0,averageStrength:0,teacherStudentRatio:0,capacityUtilization:0,activeTeachers:0}))]);he(s||[]),oe(n||[]),je(u||[]),ve(_||{totalClasses:0,totalStudents:0,averageStrength:0,teacherStudentRatio:0,capacityUtilization:0,activeTeachers:0})}catch(s){v.error("Failed to load class data"),console.error(s),he([]),oe([]),je([])}finally{fe(!1)}},Ae=async()=>{try{const s={...r,capacity:parseInt(r.capacity),currentStrength:0,subjects:r.subjects,timetable:[],fees:[]};await f.createClass(s),v.success("Class created successfully"),q(!1),Pe(),F()}catch(s){v.error("Failed to create class"),console.error(s)}},De=async()=>{try{const s={...h,periodsPerWeek:parseInt(h.periodsPerWeek),books:h.books.split(",").map(n=>n.trim()).filter(n=>n)};await f.createSubject(s),v.success("Subject created successfully"),Z(!1),ze(),F()}catch(s){v.error("Failed to create subject"),console.error(s)}},Fe=async()=>{try{await f.assignStudentsToClass({classId:p.classId,studentIds:p.studentIds}),v.success("Students assigned successfully"),$(!1),Ee(),F()}catch(s){v.error("Failed to assign students"),console.error(s)}},ge=async s=>{try{await f.generateTimetable(s),v.success("Timetable generated successfully"),F()}catch(n){v.error("Failed to generate timetable"),console.error(n)}},Pe=()=>{g({className:"",section:"",academicYear:"2024-25",classTeacherId:"",roomNumber:"",capacity:"40",subjects:[]})},ze=()=>{S({name:"",code:"",teacherId:"",periodsPerWeek:"5",syllabus:"",books:""})},Ee=()=>{V({classId:"",studentIds:[]})},Oe=s=>s>=90?"text-red-600":s>=75?"text-orange-600":s>=50?"text-green-600":"text-blue-600",Y=R.filter(s=>{if(!s)return!1;const n=z===""||(s.className||"").toLowerCase().includes(z.toLowerCase())||(s.section||"").toLowerCase().includes(z.toLowerCase())||(s.classTeacherName||"").toLowerCase().includes(z.toLowerCase()),u=B===""||B==="all"||s.academicYear===B,_=Q===""||Q==="all"||s.classTeacherId===Q;return n&&u&&_}),Ue=Math.ceil(Y.length/E),X=Y.slice((N-1)*E,N*E);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Class Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage classes, subjects, and student assignments"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",onClick:F,children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(M,{open:Ce,onOpenChange:Z,children:[e.jsx(le,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Add Subject"]})}),e.jsxs(H,{children:[e.jsxs(J,{children:[e.jsx(G,{children:"Add New Subject"}),e.jsx(ce,{children:"Create a new subject for the curriculum"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subjectName",children:"Subject Name"}),e.jsx(y,{id:"subjectName",value:h.name,onChange:s=>S({...h,name:s.target.value}),placeholder:"Enter subject name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subjectCode",children:"Subject Code"}),e.jsx(y,{id:"subjectCode",value:h.code,onChange:s=>S({...h,code:s.target.value}),placeholder:"Enter subject code"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"subjectTeacher",children:"Teacher"}),e.jsxs(w,{value:h.teacherId,onValueChange:s=>S({...h,teacherId:s}),children:[e.jsx(T,{children:e.jsx(k,{placeholder:"Select teacher"})}),e.jsxs(A,{children:[e.jsx(a,{value:"teacher1",children:"John Smith - Mathematics"}),e.jsx(a,{value:"teacher2",children:"Jane Doe - English"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"periodsPerWeek",children:"Periods Per Week"}),e.jsx(y,{id:"periodsPerWeek",type:"number",value:h.periodsPerWeek,onChange:s=>S({...h,periodsPerWeek:s.target.value}),placeholder:"Enter periods per week"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"syllabus",children:"Syllabus"}),e.jsx(Ve,{id:"syllabus",value:h.syllabus,onChange:s=>S({...h,syllabus:s.target.value}),placeholder:"Enter syllabus details",rows:3})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"books",children:"Books (comma-separated)"}),e.jsx(y,{id:"books",value:h.books,onChange:s=>S({...h,books:s.target.value}),placeholder:"Enter book names separated by commas"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(l,{onClick:De,children:"Add Subject"})]})]})]}),e.jsxs(M,{open:be,onOpenChange:q,children:[e.jsx(le,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Add Class"]})}),e.jsxs(H,{className:"max-w-2xl",children:[e.jsxs(J,{children:[e.jsx(G,{children:"Add New Class"}),e.jsx(ce,{children:"Create a new class section for the academic year"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"className",children:"Class Name"}),e.jsxs(w,{value:r.className,onValueChange:s=>g({...r,className:s}),children:[e.jsx(T,{children:e.jsx(k,{placeholder:"Select class"})}),e.jsxs(A,{children:[e.jsx(a,{value:"nursery",children:"Nursery"}),e.jsx(a,{value:"kindergarten",children:"Kindergarten"}),e.jsx(a,{value:"1",children:"Class 1"}),e.jsx(a,{value:"2",children:"Class 2"}),e.jsx(a,{value:"3",children:"Class 3"}),e.jsx(a,{value:"4",children:"Class 4"}),e.jsx(a,{value:"5",children:"Class 5"}),e.jsx(a,{value:"6",children:"Class 6"}),e.jsx(a,{value:"7",children:"Class 7"}),e.jsx(a,{value:"8",children:"Class 8"}),e.jsx(a,{value:"9",children:"Class 9"}),e.jsx(a,{value:"10",children:"Class 10"}),e.jsx(a,{value:"11",children:"Class 11"}),e.jsx(a,{value:"12",children:"Class 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"section",children:"Section"}),e.jsxs(w,{value:r.section,onValueChange:s=>g({...r,section:s}),children:[e.jsx(T,{children:e.jsx(k,{placeholder:"Select section"})}),e.jsxs(A,{children:[e.jsx(a,{value:"A",children:"Section A"}),e.jsx(a,{value:"B",children:"Section B"}),e.jsx(a,{value:"C",children:"Section C"}),e.jsx(a,{value:"D",children:"Section D"}),e.jsx(a,{value:"E",children:"Section E"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"academicYear",children:"Academic Year"}),e.jsxs(w,{value:r.academicYear,onValueChange:s=>g({...r,academicYear:s}),children:[e.jsx(T,{children:e.jsx(k,{placeholder:"Select academic year"})}),e.jsxs(A,{children:[e.jsx(a,{value:"2024-25",children:"2024-25"}),e.jsx(a,{value:"2025-26",children:"2025-26"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"classTeacher",children:"Class Teacher"}),e.jsxs(w,{value:r.classTeacherId,onValueChange:s=>g({...r,classTeacherId:s}),children:[e.jsx(T,{children:e.jsx(k,{placeholder:"Select class teacher"})}),e.jsxs(A,{children:[e.jsx(a,{value:"teacher1",children:"John Smith"}),e.jsx(a,{value:"teacher2",children:"Jane Doe"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"roomNumber",children:"Room Number"}),e.jsx(y,{id:"roomNumber",value:r.roomNumber,onChange:s=>g({...r,roomNumber:s.target.value}),placeholder:"Enter room number"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"capacity",children:"Capacity"}),e.jsx(y,{id:"capacity",type:"number",value:r.capacity,onChange:s=>g({...r,capacity:s.target.value}),placeholder:"Enter class capacity"})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Subjects"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:xe.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:s.id,checked:r.subjects.includes(s.id),onCheckedChange:n=>{g(n?{...r,subjects:[...r.subjects,s.id]}:{...r,subjects:r.subjects.filter(u=>u!==s.id)})}}),e.jsx(d,{htmlFor:s.id,className:"text-sm",children:s.name})]},s.id))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(l,{onClick:Ae,children:"Create Class"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Classes"}),e.jsx("p",{className:"text-2xl font-bold",children:m.totalClasses})]}),e.jsx(Me,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(x,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold",children:m.totalStudents})]}),e.jsx(He,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(x,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Strength"}),e.jsx("p",{className:"text-2xl font-bold",children:m.averageStrength})]}),e.jsx(Je,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(x,{children:e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Capacity Utilization"}),e.jsxs("p",{className:"text-2xl font-bold",children:[m.capacityUtilization,"%"]})]}),e.jsx(Ge,{className:"h-8 w-8 text-orange-600"})]}),e.jsx(U,{value:m.capacityUtilization,className:"mt-2"})]})})]}),e.jsxs(Re,{defaultValue:"classes",className:"w-full",children:[e.jsxs(Be,{children:[e.jsx(W,{value:"classes",children:"Classes"}),e.jsx(W,{value:"subjects",children:"Subjects"}),e.jsx(W,{value:"assignments",children:"Student Assignments"}),e.jsx(W,{value:"analytics",children:"Analytics"})]}),e.jsxs(L,{value:"classes",className:"space-y-4",children:[e.jsx(x,{children:e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search classes...",value:z,onChange:s=>Te(s.target.value),className:"pl-10"})]})}),e.jsxs(w,{value:B,onValueChange:ke,children:[e.jsxs(T,{className:"w-48",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),e.jsx(k,{placeholder:"Filter by year"})]}),e.jsxs(A,{children:[e.jsx(a,{value:"all",children:"All Years"}),e.jsx(a,{value:"2024-25",children:"2024-25"}),e.jsx(a,{value:"2025-26",children:"2025-26"})]})]}),e.jsxs(l,{variant:"outline",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsxs(M,{open:ye,onOpenChange:$,children:[e.jsx(le,{asChild:!0,children:e.jsxs(l,{variant:"outline",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Assign Students"]})}),e.jsxs(H,{className:"max-w-2xl",children:[e.jsxs(J,{children:[e.jsx(G,{children:"Assign Students to Class"}),e.jsx(ce,{children:"Select students to assign to a class"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"assignClass",children:"Select Class"}),e.jsxs(w,{value:p.classId,onValueChange:s=>V({...p,classId:s}),children:[e.jsx(T,{children:e.jsx(k,{placeholder:"Select class"})}),e.jsx(A,{children:R.map(s=>e.jsxs(a,{value:s.id,children:[s.className," - ",s.section," (",s.currentStrength,"/",s.capacity,")"]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Available Students"}),e.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-4 mt-2",children:pe.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(K,{id:s.id,checked:p.studentIds.includes(s.id),onCheckedChange:n=>{V(n?{...p,studentIds:[...p.studentIds,s.id]}:{...p,studentIds:p.studentIds.filter(u=>u!==s.id)})}}),e.jsxs(d,{htmlFor:s.id,className:"text-sm flex-1",children:[s.name," - ",s.rollNumber]})]},s.id))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(l,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(l,{onClick:Fe,children:"Assign Students"})]})]})]})]}),D.length>0&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-blue-50 rounded-lg mt-4",children:[e.jsxs("span",{className:"text-sm",children:[D.length," classes selected"]}),e.jsxs(l,{size:"sm",variant:"outline",children:[e.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Bulk Settings"]}),e.jsxs(l,{size:"sm",variant:"outline",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Export Selected"]}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>O([]),children:"Clear"})]})]})}),e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{children:"Classes Overview"})}),e.jsxs(o,{children:[Ne?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(P,{children:[e.jsx(i,{className:"w-12",children:e.jsx(K,{checked:D.length===X.length,onCheckedChange:s=>{O(s?X.map(n=>n.id):[])}})}),e.jsx(i,{children:"Class"}),e.jsx(i,{children:"Class Teacher"}),e.jsx(i,{children:"Room"}),e.jsx(i,{children:"Strength"}),e.jsx(i,{children:"Capacity"}),e.jsx(i,{children:"Utilization"}),e.jsx(i,{children:"Subjects"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ae,{children:X.map(s=>e.jsxs(P,{children:[e.jsx(t,{children:e.jsx(K,{checked:D.includes(s.id),onCheckedChange:n=>{O(n?[...D,s.id]:D.filter(u=>u!==s.id))}})}),e.jsx(t,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.className," - ",s.section]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.academicYear})]})}),e.jsx(t,{children:s.classTeacherName}),e.jsx(t,{children:s.roomNumber}),e.jsx(t,{className:"font-bold",children:s.currentStrength}),e.jsx(t,{children:s.capacity}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-medium ${Oe(s.currentStrength/s.capacity*100)}`,children:[Math.round(s.currentStrength/s.capacity*100),"%"]}),e.jsx(U,{value:s.currentStrength/s.capacity*100,className:"w-16 h-2"})]})}),e.jsx(t,{children:e.jsxs(I,{variant:"outline",children:[(s.subjects||[]).length," subjects"]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",onClick:()=>{we(s),me(!0)},children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>ge(s.id),children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(de,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(N-1)*E+1," to"," ",Math.min(N*E,Y.length)," of"," ",Y.length," classes"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>ue(N-1),disabled:N===1,children:"Previous"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>ue(N+1),disabled:N===Ue,children:"Next"})]})]})]})]})]}),e.jsx(L,{value:"subjects",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{children:"Subjects"})}),e.jsx(o,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(P,{children:[e.jsx(i,{children:"Subject Code"}),e.jsx(i,{children:"Subject Name"}),e.jsx(i,{children:"Teacher"}),e.jsx(i,{children:"Periods/Week"}),e.jsx(i,{children:"Books"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ae,{children:xe.map(s=>e.jsxs(P,{children:[e.jsx(t,{className:"font-mono",children:s.code}),e.jsx(t,{className:"font-medium",children:s.name}),e.jsx(t,{children:s.teacherName}),e.jsx(t,{children:s.periodsPerWeek}),e.jsx(t,{children:e.jsxs("div",{className:"text-sm",children:[(s.books||[]).slice(0,2).map((n,u)=>e.jsx("div",{children:n},u)),(s.books||[]).length>2&&e.jsxs("div",{className:"text-muted-foreground",children:["+",(s.books||[]).length-2," more"]})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",children:e.jsx(de,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(L,{value:"assignments",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{children:"Student Class Assignments"})}),e.jsx(o,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:R.map(s=>e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium",children:[s.className," - ",s.section]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.classTeacherName})]}),e.jsxs(I,{variant:"outline",children:[s.currentStrength,"/",s.capacity]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{value:s.currentStrength/s.capacity*100,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Room: ",s.roomNumber]}),e.jsxs("span",{children:[Math.round(s.currentStrength/s.capacity*100),"% full"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(l,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Add Students"]}),e.jsxs(l,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"View"]})]})]},s.id))})})]})}),e.jsx(L,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{children:"Class Distribution"})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:R.slice(0,6).map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm",children:[s.className," - ",s.section]}),e.jsxs("span",{className:"text-sm font-medium",children:[s.currentStrength,"/",s.capacity]})]}),e.jsx(U,{value:s.currentStrength/s.capacity*100,className:"w-full"})]},s.id))})})]}),e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{children:"System Overview"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.totalClasses}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Classes"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.totalStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Students"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Teacher-Student Ratio"}),e.jsxs("span",{className:"font-bold",children:["1:",m.teacherStudentRatio]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Average Class Size"}),e.jsx("span",{className:"font-bold",children:m.averageStrength})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Capacity Utilization"}),e.jsxs("span",{className:"font-bold",children:[m.capacityUtilization,"%"]})]})]}),e.jsx(U,{value:m.capacityUtilization,className:"w-full"})]})})]})]})})]}),e.jsx(M,{open:Se,onOpenChange:me,children:e.jsxs(H,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(J,{children:e.jsx(G,{children:"Class Details"})}),j&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{className:"text-lg",children:"Basic Information"})}),e.jsxs(o,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Class:"}),e.jsxs("span",{children:[j.className," - ",j.section]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Academic Year:"}),e.jsx("span",{children:j.academicYear})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Class Teacher:"}),e.jsx("span",{children:j.classTeacherName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Room Number:"}),e.jsx("span",{children:j.roomNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),e.jsx("span",{children:j.capacity})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Current Strength:"}),e.jsx("span",{className:"font-bold",children:j.currentStrength})]})]})]}),e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{className:"text-lg",children:"Subjects"})}),e.jsx(o,{children:e.jsx("div",{className:"space-y-2",children:(j.subjects||[]).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:s.name}),e.jsxs(I,{variant:"outline",children:[s.periodsPerWeek,"p/w"]})]},s.id))})})]})]}),e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(C,{className:"text-lg",children:"Timetable"})}),e.jsx(o,{children:(j.timetable||[]).length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(P,{children:[e.jsx(i,{children:"Day"}),e.jsx(i,{children:"Time"}),e.jsx(i,{children:"Subject"}),e.jsx(i,{children:"Teacher"}),e.jsx(i,{children:"Room"})]})}),e.jsx(ae,{children:(j.timetable||[]).map(s=>e.jsxs(P,{children:[e.jsx(t,{children:s.day}),e.jsxs(t,{children:[s.startTime," - ",s.endTime]}),e.jsx(t,{children:s.subjectName}),e.jsx(t,{children:s.teacherName}),e.jsx(t,{children:s.roomNumber})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ne,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No timetable generated yet"}),e.jsx(l,{className:"mt-4",onClick:()=>ge(j.id),children:"Generate Timetable"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:"outline",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Edit Class"]}),e.jsxs(l,{variant:"outline",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Assign Students"]}),e.jsxs(l,{variant:"outline",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Manage Timetable"]}),e.jsxs(l,{variant:"outline",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Export Details"]})]})]})]})})]})}export{ds as ClassManagement};
