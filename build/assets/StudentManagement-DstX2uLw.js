import{r as m,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as C,t as d,B as x,T as ge,i as ve,j as D,k as F,L as c,I as g,S as v,e as N,f,g as y,h as t,C as w,c as A,a as O,b as k,l as V}from"./index-CbaydhWW.js";import{T as Ne,a as fe,b as U,c as b,d as ye,e as S}from"./table-SvwjoT6S.js";import{D as Y,a as Fs,b as J,c as _,d as W,e as ce}from"./dialog-GASJ86Ds.js";import{P as Ge}from"./progress-BxpaIchm.js";import{A as Se,a as be}from"./alert-DYlOQqmu.js";import{T as de}from"./textarea-Drs0EPqH.js";import{C as we}from"./checkbox-DjQKjGtE.js";import{a0 as Ce,a3 as oe,Z as Ps,_ as Es,U as Ve,b as Bs,G as Le,V as Is,a4 as Os,z as ks,a5 as Rs,s as Ts,O as Ae,a6 as De,R as ze,K as Ue,a7 as Me,a8 as Gs,a9 as Vs,T as He,A as Ls,S as $e,F as Ye,aa as Je}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function Zs(){const[R,z]=m.useState([]),[I,G]=m.useState([]),[_e,We]=m.useState(!0),[l,p]=m.useState(null),[he,qe]=m.useState([]),[M,Ke]=m.useState([]),[Fe,Qe]=m.useState([]),[Pe,Ze]=m.useState([]),[Xe,xe]=m.useState(!1),[es,q]=m.useState(!1),[ss,K]=m.useState(!1),[as,Q]=m.useState(!1),[ls,Z]=m.useState(!1),[L,ts]=m.useState(""),[X,rs]=m.useState(""),[ee,ns]=m.useState(""),[se,is]=m.useState(""),[ae,cs]=m.useState(""),[le,ds]=m.useState(""),[te,os]=m.useState(!1),[P,H]=m.useState([]),[hs,re]=m.useState(!1),[T,ne]=m.useState(null),[me,Ee]=m.useState(!1),[i,u]=m.useState({firstName:"",lastName:"",email:"",phone:"",class:"",section:"",rollNumber:"",dateOfBirth:"",address:"",parentName:"",parentPhone:"",parentEmail:"",bloodGroup:"",gender:"male",religion:"",nationality:"",emergencyContact:"",medicalConditions:"",studentId:"",previousSchool:"",academicYear:new Date().getFullYear().toString(),house:"",transportRoute:"",feeCategory:"regular"});m.useEffect(()=>{$()},[]),m.useEffect(()=>{ms()},[R,L,X,ee,se,ae,le]);const $=async()=>{try{const s=await C.getStudents();z(s),G(s),localStorage.setItem("students",JSON.stringify(s))}catch{d.error("Failed to load students from server, using local data");const a=localStorage.getItem("students");if(a){const r=JSON.parse(a);z(r),G(r)}else{const r=[{id:"1",firstName:"John",lastName:"Doe",email:"john.doe@school.edu",phone:"+91 98765 43210",class:"10",section:"A",rollNumber:"101",dateOfBirth:"2008-05-15",address:"123 Main St, City",parentName:"Robert Doe",parentPhone:"+91 98765 43211",parentEmail:"robert.doe@email.com",admissionDate:"2020-04-01",status:"active",bloodGroup:"O+",gender:"male",studentId:"STU001",academicYear:"2024",created_at:"2020-04-01"},{id:"2",firstName:"Jane",lastName:"Smith",email:"jane.smith@school.edu",phone:"+91 98765 43212",class:"10",section:"B",rollNumber:"102",dateOfBirth:"2008-08-20",address:"456 Oak Ave, City",parentName:"Maria Smith",parentPhone:"+91 98765 43213",admissionDate:"2020-04-01",status:"active",bloodGroup:"A+",gender:"female",studentId:"STU002",academicYear:"2024",created_at:"2020-04-01"},{id:"3",firstName:"Mike",lastName:"Johnson",email:"mike.j@school.edu",phone:"+91 98765 43214",class:"9",section:"A",rollNumber:"201",dateOfBirth:"2009-01-10",address:"789 Pine Rd, City",parentName:"David Johnson",parentPhone:"+91 98765 43215",admissionDate:"2021-04-01",status:"active",bloodGroup:"B+",gender:"male",studentId:"STU003",academicYear:"2024",created_at:"2021-04-01"}];z(r),G(r),localStorage.setItem("students",JSON.stringify(r))}}finally{We(!1)}},xs=async s=>{try{const[a,r,n,o]=await Promise.all([C.getStudentAcademicRecords?.(s)||[],C.getStudentAttendance?.({})||[],C.getStudentDisciplinaryRecords?.(s)||[],C.getStudentAchievements?.(s)||[]]);qe(a),Ke(r),Qe(n),Ze(o)}catch(a){console.error("Failed to load student details:",a)}},ms=()=>{if(!R||!Array.isArray(R)){G([]);return}let s=R.filter(a=>{if(!a)return!1;const r=L===""||(a.firstName||"").toLowerCase().includes(L.toLowerCase())||(a.lastName||"").toLowerCase().includes(L.toLowerCase())||(a.rollNumber||"").toLowerCase().includes(L.toLowerCase())||(a.studentId||"").toLowerCase().includes(L.toLowerCase())||(a.parentName||"").toLowerCase().includes(L.toLowerCase()),n=X===""||a.class===X,o=ee===""||a.section===ee,E=se===""||a.status===se,h=ae===""||a.gender===ae,j=le===""||a.house===le;return r&&n&&o&&E&&h&&j});G(s||[])},us=async()=>{try{const a=["firstName","lastName","class","section","rollNumber","parentName","parentPhone"].filter(E=>!i[E]);if(a.length>0){d.error(`Please fill in required fields: ${a.join(", ")}`);return}if(R.find(E=>E.rollNumber===i.rollNumber&&E.class===i.class)){d.error("Roll number already exists in this class");return}const n={...i,id:`local-${Date.now()}`,status:"active",admissionDate:new Date().toISOString().split("T")[0],studentId:i.studentId||`STU${Date.now()}`,created_at:new Date().toISOString()};try{await C.createStudent(n)}catch(E){console.warn("API save failed, saving locally:",E)}const o=[...R,n];z(o),G(o),localStorage.setItem("students",JSON.stringify(o)),d.success("Student added successfully"),xe(!1),Cs()}catch(s){d.error("Failed to add student"),console.error(s)}},js=async()=>{if(l)try{try{await C.updateStudent(l.id,l)}catch(a){console.warn("API update failed, updating locally:",a)}const s=R.map(a=>a.id===l.id?l:a);z(s),G(s),localStorage.setItem("students",JSON.stringify(s)),d.success("Student updated successfully"),q(!1),p(null)}catch(s){d.error("Failed to update student"),console.error(s)}},Be=async(s,a)=>{if(confirm(`Are you sure you want to delete ${a}? This action cannot be undone.`))try{try{await C.deleteStudent(s)}catch(n){console.warn("API delete failed, deleting locally:",n)}const r=R.filter(n=>n.id!==s);z(r),G(r),localStorage.setItem("students",JSON.stringify(r)),d.success("Student deleted successfully")}catch(r){d.error("Failed to delete student"),console.error(r)}},Ie=async s=>{p(s),await xs(s.id),K(!0)},ue=s=>{p({...s}),q(!0)},ps=async()=>{if(P.length===0){d.error("Please select students to delete");return}if(confirm(`Are you sure you want to delete ${P.length} students? This action cannot be undone.`))try{try{await Promise.all(P.map(a=>C.deleteStudent(a)))}catch(a){console.warn("API bulk delete failed, deleting locally:",a)}const s=R.filter(a=>!P.includes(a.id));z(s),G(s),localStorage.setItem("students",JSON.stringify(s)),d.success(`${P.length} students deleted successfully`),H([]),re(!1)}catch(s){d.error("Failed to delete students"),console.error(s)}},gs=async()=>{if(P.length===0){d.error("Please select students to promote");return}try{await C.promoteStudents?.(P),d.success(`${P.length} students promoted successfully`),H([]),re(!1),Z(!1),$()}catch(s){d.error("Failed to promote students"),console.error(s)}},Oe=async(s="excel")=>{try{const a=await C.exportStudents?.(s,{students:I.map(E=>E.id)}),r=new Blob([a],{type:"application/octet-stream"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=`students_${new Date().toISOString().split("T")[0]}.${s}`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(n),document.body.removeChild(o),d.success("Student data exported successfully")}catch(a){d.error("Failed to export student data"),console.error(a)}},ke=s=>{const a=s.target.files?.[0];if(a){if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(a.type)&&!a.name.match(/\.(csv|xlsx?)$/i)){d.error("Please upload a CSV or Excel file");return}if(a.size>10*1024*1024){d.error("File size must be less than 10MB");return}ne(a),d.success(`File "${a.name}" selected successfully`)}},vs=s=>new Promise((a,r)=>{const n=new FileReader;n.onload=o=>a(o.target?.result),n.onerror=r,n.readAsText(s)}),Ns=s=>{const a=s.split(`
`).filter(o=>o.trim());if(a.length<2)return[];const r=a[0].split(",").map(o=>o.trim().toLowerCase().replace(/\s+/g,"_")),n=[];for(let o=1;o<a.length;o++){const E=a[o].split(",").map(j=>j.trim());if(E.length!==r.length)continue;const h={};r.forEach((j,Ds)=>{const B=E[Ds].replace(/^["']|["']$/g,"");j.includes("first")&&j.includes("name")?h.firstName=B:j.includes("last")&&j.includes("name")?h.lastName=B:j==="class"||j==="grade"?h.class=B:j==="section"?h.section=B:j.includes("roll")?h.rollNumber=B:j.includes("birth")||j==="dob"?h.dateOfBirth=B:j==="gender"?h.gender=B.toLowerCase():j.includes("parent")&&j.includes("name")?h.parentName=B:j.includes("parent")&&j.includes("phone")?h.parentPhone=B:j==="email"?h.email=B:j==="address"?h.address=B:j==="phone"&&(h.phone=B)}),h.firstName&&h.lastName&&h.class&&h.rollNumber&&(h.status="active",h.admissionDate=new Date().toISOString().split("T")[0],h.academicYear=new Date().getFullYear().toString(),h.section=h.section||"A",h.parentName=h.parentName||"Not Provided",h.parentPhone=h.parentPhone||"0000000000",h.gender=h.gender||"other",n.push(h))}return n},fs=async()=>(d.error("Excel file detected. Please save as CSV format for now."),d.info("In Excel: File → Save As → CSV (Comma delimited)"),[]),ys=async(s,a)=>{const r=s.name.toLowerCase();return r.endsWith(".csv")?Ns(a):r.endsWith(".xlsx")||r.endsWith(".xls")?fs():[]},Ss=async()=>{if(!T){d.error("Please select a file first");return}Ee(!0);try{const s=await vs(T),a=await ys(T,s);if(!a||a.length===0){d.error("No valid student data found in the file");return}d.info("Validating student data...");const r=await C.validateImportData(a);if(!r.valid){d.error(`Validation failed: ${r.message}`),r.errors&&r.errors.length>0&&(console.error("Validation errors:",r.errors),r.errors.slice(0,3).forEach(o=>{d.error(o)}),r.errors.length>3&&d.error(`And ${r.errors.length-3} more errors...`));return}r.warnings&&r.warnings.length>0&&r.warnings.slice(0,2).forEach(o=>{d.warning(o)}),d.info(`Importing ${a.length} students...`);const n=await C.importStudents({students:a,fileName:T.name});n.success?(d.success(`Successfully imported ${n.imported} students`+(n.failed>0?`. ${n.failed} failed.`:"")),n.errors&&n.errors.length>0&&(console.error("Import errors:",n.errors),n.errors.slice(0,3).forEach(o=>{d.error(o)})),Q(!1),ne(null),$()):d.error(n.message||"Failed to import students")}catch(s){d.error("Failed to import students. Please check your file format."),console.error("Bulk import error:",s)}finally{Ee(!1)}},bs=async()=>{try{const s=await C.getImportTemplate(),a=new Blob([s],{type:"text/csv"}),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="student_import_template.csv",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),d.success("Template downloaded successfully")}catch(s){d.error("Failed to download template"),console.error("Template download error:",s)}},Re=(s,a)=>{a?H(r=>[...r,s]):(H(r=>r.filter(n=>n!==s)),re(!1))},ws=s=>{re(s),H(s?(I||[]).map(a=>a.id):[])},Cs=()=>{u({firstName:"",lastName:"",email:"",phone:"",class:"",section:"",rollNumber:"",dateOfBirth:"",address:"",parentName:"",parentPhone:"",parentEmail:"",bloodGroup:"",gender:"male",religion:"",nationality:"",emergencyContact:"",medicalConditions:"",studentId:"",previousSchool:"",academicYear:new Date().getFullYear().toString(),house:"",transportRoute:"",feeCategory:"regular"})},As=async()=>{try{await C.initializeDemoData(),d.success("Demo data initialized"),$()}catch(s){console.error("Failed to initialize demo data:",s)}},Te=s=>{const r={active:{color:"bg-green-100 text-green-800",label:"Active"},inactive:{color:"bg-gray-100 text-gray-800",label:"Inactive"},transferred:{color:"bg-blue-100 text-blue-800",label:"Transferred"},graduated:{color:"bg-purple-100 text-purple-800",label:"Graduated"}}[s]||{color:"bg-gray-100 text-gray-800",label:s};return e.jsx(V,{className:r.color,children:r.label})},je=s=>{if(!s)return"N/A";const a=new Date,r=new Date(s);let n=a.getFullYear()-r.getFullYear();const o=a.getMonth()-r.getMonth();return(o<0||o===0&&a.getDate()<r.getDate())&&n--,n},ie=s=>{const a=M.filter(n=>n.studentId===s);if(a.length===0)return 0;const r=a.filter(n=>n.status==="present").length;return Math.round(r/a.length*100)},pe=s=>{const a=he.filter(n=>n.studentId===s);if(a.length===0)return"N/A";const r=a.reduce((n,o)=>n+o.marks/o.maxMarks*100,0);return Math.round(r/a.length)};return _e?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-24 bg-gray-200 rounded"},s))}),e.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Student Management"}),e.jsx("p",{className:"text-gray-600",children:"Comprehensive student information system"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>Oe("excel"),children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(x,{variant:"outline",onClick:()=>Q(!0),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Import"]}),e.jsxs(Y,{open:Xe,onOpenChange:xe,children:[e.jsx(Fs,{asChild:!0,children:e.jsxs(x,{className:"w-full justify-between",variant:"outline",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Add Student"]}),e.jsx(Es,{className:"h-4 w-4"})]})}),e.jsxs(J,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_,{children:[e.jsx(W,{children:"Add New Student"}),e.jsx(ce,{children:"Fill in the comprehensive student information below."})]}),e.jsxs(ge,{defaultValue:"personal",className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-4",children:[e.jsx(D,{value:"personal",children:"Personal Info"}),e.jsx(D,{value:"academic",children:"Academic Info"}),e.jsx(D,{value:"parent",children:"Parent/Guardian"}),e.jsx(D,{value:"additional",children:"Additional"})]}),e.jsx(F,{value:"personal",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"firstName",children:"First Name *"}),e.jsx(g,{id:"firstName",value:i.firstName,onChange:s=>u({...i,firstName:s.target.value}),placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(g,{id:"lastName",value:i.lastName,onChange:s=>u({...i,lastName:s.target.value}),placeholder:"Enter last name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"gender",children:"Gender *"}),e.jsxs(v,{value:i.gender,onValueChange:s=>u({...i,gender:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select gender"})}),e.jsxs(y,{children:[e.jsx(t,{value:"male",children:"Male"}),e.jsx(t,{value:"female",children:"Female"}),e.jsx(t,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"dateOfBirth",children:"Date of Birth *"}),e.jsx(g,{id:"dateOfBirth",type:"date",value:i.dateOfBirth,onChange:s=>u({...i,dateOfBirth:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"bloodGroup",children:"Blood Group"}),e.jsxs(v,{value:i.bloodGroup,onValueChange:s=>u({...i,bloodGroup:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select blood group"})}),e.jsxs(y,{children:[e.jsx(t,{value:"A+",children:"A+"}),e.jsx(t,{value:"A-",children:"A-"}),e.jsx(t,{value:"B+",children:"B+"}),e.jsx(t,{value:"B-",children:"B-"}),e.jsx(t,{value:"AB+",children:"AB+"}),e.jsx(t,{value:"AB-",children:"AB-"}),e.jsx(t,{value:"O+",children:"O+"}),e.jsx(t,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(c,{htmlFor:"address",children:"Address"}),e.jsx(de,{id:"address",value:i.address,onChange:s=>u({...i,address:s.target.value}),placeholder:"Enter complete address",rows:3})]})]})}),e.jsx(F,{value:"academic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"studentId",children:"Student ID"}),e.jsx(g,{id:"studentId",value:i.studentId,onChange:s=>u({...i,studentId:s.target.value}),placeholder:"Auto-generated if empty"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"rollNumber",children:"Roll Number *"}),e.jsx(g,{id:"rollNumber",value:i.rollNumber,onChange:s=>u({...i,rollNumber:s.target.value}),placeholder:"Enter roll number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"class",children:"Class *"}),e.jsxs(v,{value:i.class,onValueChange:s=>u({...i,class:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select class"})}),e.jsx(y,{children:["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"].map(s=>e.jsxs(t,{value:s,children:[s," Standard"]},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"section",children:"Section *"}),e.jsxs(v,{value:i.section,onValueChange:s=>u({...i,section:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select section"})}),e.jsx(y,{children:["A","B","C","D","E"].map(s=>e.jsxs(t,{value:s,children:["Section ",s]},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"academicYear",children:"Academic Year"}),e.jsxs(v,{value:i.academicYear,onValueChange:s=>u({...i,academicYear:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select academic year"})}),e.jsx(y,{children:Array.from({length:5},(s,a)=>{const r=new Date().getFullYear()-2+a;return e.jsxs(t,{value:r.toString(),children:[r,"-",r+1]},r)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"house",children:"House"}),e.jsxs(v,{value:i.house,onValueChange:s=>u({...i,house:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select house"})}),e.jsxs(y,{children:[e.jsx(t,{value:"red",children:"Red House"}),e.jsx(t,{value:"blue",children:"Blue House"}),e.jsx(t,{value:"green",children:"Green House"}),e.jsx(t,{value:"yellow",children:"Yellow House"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"previousSchool",children:"Previous School"}),e.jsx(g,{id:"previousSchool",value:i.previousSchool,onChange:s=>u({...i,previousSchool:s.target.value}),placeholder:"Enter previous school name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"feeCategory",children:"Fee Category"}),e.jsxs(v,{value:i.feeCategory,onValueChange:s=>u({...i,feeCategory:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select fee category"})}),e.jsxs(y,{children:[e.jsx(t,{value:"regular",children:"Regular"}),e.jsx(t,{value:"scholarship",children:"Scholarship"}),e.jsx(t,{value:"concession",children:"Concession"}),e.jsx(t,{value:"staff_ward",children:"Staff Ward"})]})]})]})]})}),e.jsx(F,{value:"parent",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"parentName",children:"Parent/Guardian Name *"}),e.jsx(g,{id:"parentName",value:i.parentName,onChange:s=>u({...i,parentName:s.target.value}),placeholder:"Enter parent name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"parentPhone",children:"Parent Phone *"}),e.jsx(g,{id:"parentPhone",value:i.parentPhone,onChange:s=>u({...i,parentPhone:s.target.value}),placeholder:"Enter parent phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"parentEmail",children:"Parent Email"}),e.jsx(g,{id:"parentEmail",type:"email",value:i.parentEmail,onChange:s=>u({...i,parentEmail:s.target.value}),placeholder:"Enter parent email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"emergencyContact",children:"Emergency Contact"}),e.jsx(g,{id:"emergencyContact",value:i.emergencyContact,onChange:s=>u({...i,emergencyContact:s.target.value}),placeholder:"Enter emergency contact"})]})]})}),e.jsx(F,{value:"additional",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"transportRoute",children:"Transport Route"}),e.jsxs(v,{value:i.transportRoute,onValueChange:s=>u({...i,transportRoute:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select transport route"})}),e.jsxs(y,{children:[e.jsx(t,{value:"route1",children:"Route 1 - City Center"}),e.jsx(t,{value:"route2",children:"Route 2 - Suburbs"}),e.jsx(t,{value:"route3",children:"Route 3 - East District"}),e.jsx(t,{value:"route4",children:"Route 4 - West District"}),e.jsx(t,{value:"none",children:"No Transport"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Student Email"}),e.jsx(g,{id:"email",type:"email",value:i.email,onChange:s=>u({...i,email:s.target.value}),placeholder:"Enter student email"})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(c,{htmlFor:"medicalConditions",children:"Medical Conditions / Allergies"}),e.jsx(de,{id:"medicalConditions",value:i.medicalConditions,onChange:s=>u({...i,medicalConditions:s.target.value}),placeholder:"Enter any medical conditions or allergies",rows:3})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{variant:"outline",onClick:()=>xe(!1),children:"Cancel"}),e.jsx(x,{onClick:us,children:"Add Student"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(w,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold",children:I?.length||0})]}),e.jsx(Ve,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(w,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Students"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:(I||[]).filter(s=>s?.status==="active").length})]}),e.jsx(Bs,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(w,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Classes"}),e.jsx("p",{className:"text-2xl font-bold",children:new Set((I||[]).map(s=>s?.class).filter(Boolean)).size})]}),e.jsx(Le,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(w,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(I||[]).filter(s=>{if(!s?.admissionDate)return!1;const a=new Date(s.admissionDate),r=new Date;return a.getMonth()===r.getMonth()&&a.getFullYear()===r.getFullYear()}).length})]}),e.jsx(Is,{className:"h-8 w-8 text-blue-600"})]})})})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{children:"Search & Filters"}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>os(!te),children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),te?"Hide":"Show"," Advanced Filters",te?e.jsx(ks,{className:"h-4 w-4 ml-1"}):e.jsx(Rs,{className:"h-4 w-4 ml-1"})]})]})}),e.jsx(A,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(g,{placeholder:"Search by name, roll number, student ID, or parent name...",value:L,onChange:s=>ts(s.target.value),className:"pl-10"})]}),te&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-4",children:[e.jsxs(v,{value:X||"all",onValueChange:s=>rs(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"All Classes"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"All Classes"}),["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"].map(s=>e.jsxs(t,{value:s,children:[s," Standard"]},s))]})]}),e.jsxs(v,{value:ee||"all",onValueChange:s=>ns(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"All Sections"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"All Sections"}),["A","B","C","D","E"].map(s=>e.jsxs(t,{value:s,children:["Section ",s]},s))]})]}),e.jsxs(v,{value:se||"all",onValueChange:s=>is(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"All Status"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"All Status"}),e.jsx(t,{value:"active",children:"Active"}),e.jsx(t,{value:"inactive",children:"Inactive"}),e.jsx(t,{value:"transferred",children:"Transferred"}),e.jsx(t,{value:"graduated",children:"Graduated"})]})]}),e.jsxs(v,{value:ae||"all",onValueChange:s=>cs(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"All Genders"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"All Genders"}),e.jsx(t,{value:"male",children:"Male"}),e.jsx(t,{value:"female",children:"Female"}),e.jsx(t,{value:"other",children:"Other"})]})]}),e.jsxs(v,{value:le||"all",onValueChange:s=>ds(s==="all"?"":s),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"All Houses"})}),e.jsxs(y,{children:[e.jsx(t,{value:"all",children:"All Houses"}),e.jsx(t,{value:"red",children:"Red House"}),e.jsx(t,{value:"blue",children:"Blue House"}),e.jsx(t,{value:"green",children:"Green House"}),e.jsx(t,{value:"yellow",children:"Yellow House"})]})]})]})]})})]}),P.length>0&&e.jsxs(Se,{children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx(be,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[P.length," students selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>Z(!0),children:[e.jsx(Le,{className:"h-4 w-4 mr-1"}),"Promote"]}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>Oe("excel"),children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"Export Selected"]}),e.jsxs(x,{size:"sm",variant:"destructive",onClick:ps,children:[e.jsx(De,{className:"h-4 w-4 mr-1"}),"Delete Selected"]})]})]})})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(k,{children:["Students (",I?.length||0,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[R.length===0&&e.jsx(x,{onClick:As,variant:"outline",size:"sm",children:"Load Demo Data"}),e.jsxs(x,{variant:"outline",size:"sm",onClick:$,children:[e.jsx(ze,{className:"h-4 w-4 mr-1"}),"Refresh"]})]})]})}),e.jsxs(A,{className:"p-0 sm:p-6",children:[e.jsx("div",{className:"block sm:hidden p-4 space-y-3",children:I.map(s=>e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{checked:P.includes(s.id),onCheckedChange:a=>Re(s.id,a)}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:s.profilePhoto?e.jsx("img",{src:s.profilePhoto,alt:`${s.firstName||""} ${s.lastName||""}`,className:"w-full h-full rounded-full object-cover"}):e.jsxs("span",{className:"text-sm font-medium",children:[(s.firstName||"?")[0],(s.lastName||"?")[0]]})})]}),Te(s.status)]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",s.studentId||s.rollNumber]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Class"}),e.jsxs("p",{className:"font-medium",children:[s.class," - ",s.section]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Age"}),e.jsxs("p",{className:"font-medium",children:[je(s.dateOfBirth)," years"]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Parent"}),e.jsx("p",{className:"font-medium",children:s.parentName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.parentPhone})]}),e.jsxs("div",{className:"flex gap-1 pt-2",children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ie(s),children:e.jsx(Ue,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>ue(s),children:e.jsx(Me,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"outline",className:"text-red-600 hover:bg-red-50",onClick:()=>Be(s.id,`${s.firstName} ${s.lastName}`),children:e.jsx(De,{className:"h-3 w-3"})})]})]})]},s.id))}),e.jsx("div",{className:"hidden sm:block table-responsive",children:e.jsxs(Ne,{className:"min-w-[800px]",children:[e.jsx(fe,{children:e.jsxs(U,{children:[e.jsx(b,{className:"w-12",children:e.jsx(we,{checked:hs,onCheckedChange:ws})}),e.jsx(b,{children:"Student ID"}),e.jsx(b,{children:"Name"}),e.jsx(b,{children:"Class"}),e.jsx(b,{children:"Parent"}),e.jsx(b,{children:"Phone"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Age"}),e.jsx(b,{children:"Actions"})]})}),e.jsxs(ye,{children:[(I||[]).map(s=>e.jsxs(U,{children:[e.jsx(S,{children:e.jsx(we,{checked:P.includes(s.id),onCheckedChange:a=>Re(s.id,a)})}),e.jsx(S,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:s.studentId||s.rollNumber}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Roll: ",s.rollNumber]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:s.profilePhoto?e.jsx("img",{src:s.profilePhoto,alt:`${s.firstName||""} ${s.lastName||""}`,className:"w-full h-full rounded-full object-cover"}):e.jsxs("span",{className:"text-sm font-medium",children:[(s.firstName||"?")[0],(s.lastName||"?")[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.firstName," ",s.lastName]}),s.email&&e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx(S,{children:e.jsxs("div",{children:[e.jsxs("div",{children:[s.class," - ",s.section]}),s.house&&e.jsxs(V,{variant:"outline",className:"text-xs mt-1",children:[s.house," House"]})]})}),e.jsx(S,{children:e.jsxs("div",{children:[e.jsx("div",{children:s.parentName}),s.parentEmail&&e.jsx("div",{className:"text-sm text-gray-500",children:s.parentEmail})]})}),e.jsx(S,{children:e.jsxs("div",{children:[e.jsx("div",{children:s.parentPhone}),s.phone&&e.jsxs("div",{className:"text-sm text-gray-500",children:["S: ",s.phone]})]})}),e.jsx(S,{children:Te(s.status)}),e.jsxs(S,{children:[je(s.dateOfBirth)," years"]}),e.jsx(S,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ie(s),title:"View Details",children:e.jsx(Ue,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>ue(s),title:"Edit Student",children:e.jsx(Me,{className:"h-3 w-3"})}),e.jsx(x,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>Be(s.id,`${s.firstName} ${s.lastName}`),title:"Delete Student",children:e.jsx(De,{className:"h-3 w-3"})})]})})]},s.id)),(!I||I.length===0)&&e.jsx(U,{children:e.jsx(S,{colSpan:9,className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ve,{className:"h-12 w-12 text-gray-300"}),e.jsx("div",{children:"No students found"}),e.jsx("div",{className:"text-sm",children:"Try adjusting your search criteria"})]})})})]})]})})]})]}),e.jsx(Y,{open:ss,onOpenChange:K,children:e.jsxs(J,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsx(_,{children:e.jsxs(W,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center",children:l?.firstName&&l?.lastName&&e.jsxs("span",{className:"text-lg font-medium",children:[l.firstName[0],l.lastName[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{children:[l?.firstName," ",l?.lastName]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[l?.studentId," • ",l?.class,"-",l?.section]})]})]})}),l&&e.jsxs(ge,{defaultValue:"personal",className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-6",children:[e.jsx(D,{value:"personal",children:"Personal"}),e.jsx(D,{value:"academic",children:"Academic"}),e.jsx(D,{value:"attendance",children:"Attendance"}),e.jsx(D,{value:"achievements",children:"Achievements"}),e.jsx(D,{value:"disciplinary",children:"Disciplinary"}),e.jsx(D,{value:"documents",children:"Documents"})]}),e.jsx(F,{value:"personal",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(k,{className:"text-lg",children:"Personal Information"})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Full Name"}),e.jsxs("p",{className:"font-medium",children:[l.firstName," ",l.lastName]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"capitalize",children:l.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Date of Birth"}),e.jsx("p",{children:l.dateOfBirth?new Date(l.dateOfBirth).toLocaleDateString():"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Age"}),e.jsxs("p",{children:[je(l.dateOfBirth)," years"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Blood Group"}),e.jsx("p",{children:l.bloodGroup||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{children:l.phone||"Not provided"})]})]}),l.address&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Address"}),e.jsx("p",{children:l.address})]})]})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(k,{className:"text-lg",children:"Parent/Guardian Information"})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Parent/Guardian Name"}),e.jsx("p",{className:"font-medium",children:l.parentName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Parent Phone"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{children:l.parentPhone})]})]}),l.parentEmail&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Parent Email"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"h-4 w-4 text-gray-400"}),e.jsx("p",{children:l.parentEmail})]})]})]})]})]})}),e.jsxs(F,{value:"academic",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(k,{className:"text-lg",children:"Academic Information"})}),e.jsx(A,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Student ID"}),e.jsx("p",{className:"font-medium",children:l.studentId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Roll Number"}),e.jsx("p",{className:"font-medium",children:l.rollNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Class & Section"}),e.jsxs("p",{children:[l.class," - ",l.section]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(V,{className:l.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:l.status})})]})]})})]}),e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(k,{className:"text-lg",children:"Performance Overview"})}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Average Grade"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[pe(l.id),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Attendance"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[ie(l.id),"%"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Academic Performance"}),e.jsxs("span",{children:[pe(l.id),"%"]})]}),e.jsx(Ge,{value:parseInt(pe(l.id).toString()),className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Attendance Rate"}),e.jsxs("span",{children:[ie(l.id),"%"]})]}),e.jsx(Ge,{value:ie(l.id),className:"h-2"})]})]})]})]})]}),he.length>0&&e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(k,{className:"text-lg",children:"Recent Academic Records"})}),e.jsx(A,{children:e.jsxs(Ne,{children:[e.jsx(fe,{children:e.jsxs(U,{children:[e.jsx(b,{children:"Subject"}),e.jsx(b,{children:"Term"}),e.jsx(b,{children:"Marks"}),e.jsx(b,{children:"Grade"}),e.jsx(b,{children:"Percentage"})]})}),e.jsx(ye,{children:he.slice(0,5).map(s=>e.jsxs(U,{children:[e.jsx(S,{children:s.subject}),e.jsx(S,{children:s.term}),e.jsxs(S,{children:[s.marks,"/",s.maxMarks]}),e.jsx(S,{children:e.jsx(V,{variant:"outline",children:s.grade})}),e.jsxs(S,{children:[s.percentage,"%"]})]},s.id))})]})})]})]}),e.jsx(F,{value:"attendance",className:"space-y-6",children:e.jsxs(w,{children:[e.jsx(O,{children:e.jsx(k,{className:"text-lg",children:"Attendance Summary"})}),e.jsxs(A,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:M.filter(s=>s.status==="present").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:M.filter(s=>s.status==="absent").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:M.filter(s=>s.status==="late").length}),e.jsx("p",{className:"text-sm text-gray-600",children:"Late"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[ie(l.id),"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Overall"})]})]}),M.length>0&&e.jsxs(Ne,{children:[e.jsx(fe,{children:e.jsxs(U,{children:[e.jsx(b,{children:"Date"}),e.jsx(b,{children:"Status"}),e.jsx(b,{children:"Subject"})]})}),e.jsx(ye,{children:M.slice(0,10).map(s=>e.jsxs(U,{children:[e.jsx(S,{children:new Date(s.date).toLocaleDateString()}),e.jsx(S,{children:e.jsx(V,{className:s.status==="present"?"bg-green-100 text-green-800":s.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",children:s.status})}),e.jsx(S,{children:s.subject||"General"})]},s.id))})]})]})]})}),e.jsx(F,{value:"achievements",className:"space-y-6",children:e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs(k,{className:"text-lg flex items-center gap-2",children:[e.jsx(He,{className:"h-5 w-5 text-yellow-600"}),"Student Achievements"]})}),e.jsx(A,{children:Pe.length>0?e.jsx("div",{className:"space-y-4",children:Pe.map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(V,{variant:"outline",className:"capitalize",children:s.category}),e.jsx(V,{variant:"outline",className:"capitalize",children:s.level}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.date).toLocaleDateString()})]})]}),e.jsx(Ls,{className:"h-8 w-8 text-yellow-600"})]})},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(He,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{children:"No achievements recorded yet"})]})})]})}),e.jsx(F,{value:"disciplinary",className:"space-y-6",children:e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs(k,{className:"text-lg flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-red-600"}),"Disciplinary Records"]})}),e.jsx(A,{children:Fe.length>0?e.jsx("div",{className:"space-y-4",children:Fe.map(s=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(V,{className:s.type==="warning"?"bg-yellow-100 text-yellow-800":(s.type==="suspension","bg-red-100 text-red-800"),children:s.type}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.date).toLocaleDateString()}),e.jsx(V,{variant:s.status==="resolved"?"default":"destructive",children:s.status})]}),e.jsx("p",{className:"font-medium mb-1",children:s.description}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Action: ",s.actionTaken]})]})})},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx($e,{className:"h-12 w-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{children:"No disciplinary records"}),e.jsx("p",{className:"text-sm",children:"Student has a clean record"})]})})]})}),e.jsx(F,{value:"documents",className:"space-y-6",children:e.jsxs(w,{children:[e.jsx(O,{children:e.jsxs(k,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ye,{className:"h-5 w-5 text-blue-600"}),"Student Documents"]})}),e.jsxs(A,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Je,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Profile Photo"})]}),e.jsx("div",{className:"w-24 h-24 rounded-lg bg-gray-100 flex items-center justify-center text-gray-400",children:e.jsx(Je,{className:"h-8 w-8"})})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ye,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Transfer Certificate"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Not uploaded"})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",children:"Upload Document"}),e.jsx(x,{variant:"outline",size:"sm",children:"Generate Report Card"}),e.jsx(x,{variant:"outline",size:"sm",children:"Export Profile"})]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{variant:"outline",onClick:()=>K(!1),children:"Close"}),e.jsx(x,{onClick:()=>{K(!1),l&&ue(l)},children:"Edit Student"})]})]})}),e.jsx(Y,{open:es,onOpenChange:q,children:e.jsxs(J,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_,{children:[e.jsx(W,{children:"Edit Student"}),e.jsx(ce,{children:"Update the student information below."})]}),l&&e.jsxs(ge,{defaultValue:"personal",className:"w-full",children:[e.jsxs(ve,{className:"grid w-full grid-cols-4",children:[e.jsx(D,{value:"personal",children:"Personal Info"}),e.jsx(D,{value:"academic",children:"Academic Info"}),e.jsx(D,{value:"parent",children:"Parent/Guardian"}),e.jsx(D,{value:"additional",children:"Additional"})]}),e.jsx(F,{value:"personal",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-firstName",children:"First Name *"}),e.jsx(g,{id:"edit-firstName",value:l.firstName,onChange:s=>p({...l,firstName:s.target.value}),placeholder:"Enter first name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-lastName",children:"Last Name *"}),e.jsx(g,{id:"edit-lastName",value:l.lastName,onChange:s=>p({...l,lastName:s.target.value}),placeholder:"Enter last name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-gender",children:"Gender"}),e.jsxs(v,{value:l.gender,onValueChange:s=>p({...l,gender:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select gender"})}),e.jsxs(y,{children:[e.jsx(t,{value:"male",children:"Male"}),e.jsx(t,{value:"female",children:"Female"}),e.jsx(t,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-dateOfBirth",children:"Date of Birth"}),e.jsx(g,{id:"edit-dateOfBirth",type:"date",value:l.dateOfBirth,onChange:s=>p({...l,dateOfBirth:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-bloodGroup",children:"Blood Group"}),e.jsxs(v,{value:l.bloodGroup,onValueChange:s=>p({...l,bloodGroup:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select blood group"})}),e.jsxs(y,{children:[e.jsx(t,{value:"A+",children:"A+"}),e.jsx(t,{value:"A-",children:"A-"}),e.jsx(t,{value:"B+",children:"B+"}),e.jsx(t,{value:"B-",children:"B-"}),e.jsx(t,{value:"AB+",children:"AB+"}),e.jsx(t,{value:"AB-",children:"AB-"}),e.jsx(t,{value:"O+",children:"O+"}),e.jsx(t,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(c,{htmlFor:"edit-address",children:"Address"}),e.jsx(de,{id:"edit-address",value:l.address,onChange:s=>p({...l,address:s.target.value}),placeholder:"Enter complete address",rows:3})]})]})}),e.jsx(F,{value:"academic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-class",children:"Class *"}),e.jsxs(v,{value:l.class,onValueChange:s=>p({...l,class:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select class"})}),e.jsx(y,{children:["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"].map(s=>e.jsxs(t,{value:s,children:[s," Standard"]},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-section",children:"Section *"}),e.jsxs(v,{value:l.section,onValueChange:s=>p({...l,section:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select section"})}),e.jsx(y,{children:["A","B","C","D","E"].map(s=>e.jsxs(t,{value:s,children:["Section ",s]},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-rollNumber",children:"Roll Number *"}),e.jsx(g,{id:"edit-rollNumber",value:l.rollNumber,onChange:s=>p({...l,rollNumber:s.target.value}),placeholder:"Enter roll number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-status",children:"Status"}),e.jsxs(v,{value:l.status,onValueChange:s=>p({...l,status:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select status"})}),e.jsxs(y,{children:[e.jsx(t,{value:"active",children:"Active"}),e.jsx(t,{value:"inactive",children:"Inactive"}),e.jsx(t,{value:"transferred",children:"Transferred"}),e.jsx(t,{value:"graduated",children:"Graduated"})]})]})]})]})}),e.jsx(F,{value:"parent",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-parentName",children:"Parent/Guardian Name"}),e.jsx(g,{id:"edit-parentName",value:l.parentName,onChange:s=>p({...l,parentName:s.target.value}),placeholder:"Enter parent name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-parentPhone",children:"Parent Phone"}),e.jsx(g,{id:"edit-parentPhone",value:l.parentPhone,onChange:s=>p({...l,parentPhone:s.target.value}),placeholder:"Enter parent phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-parentEmail",children:"Parent Email"}),e.jsx(g,{id:"edit-parentEmail",type:"email",value:l.parentEmail||"",onChange:s=>p({...l,parentEmail:s.target.value}),placeholder:"Enter parent email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-emergencyContact",children:"Emergency Contact"}),e.jsx(g,{id:"edit-emergencyContact",value:l.emergencyContact||"",onChange:s=>p({...l,emergencyContact:s.target.value}),placeholder:"Enter emergency contact"})]})]})}),e.jsx(F,{value:"additional",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-house",children:"House"}),e.jsxs(v,{value:l.house,onValueChange:s=>p({...l,house:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select house"})}),e.jsxs(y,{children:[e.jsx(t,{value:"red",children:"Red House"}),e.jsx(t,{value:"blue",children:"Blue House"}),e.jsx(t,{value:"green",children:"Green House"}),e.jsx(t,{value:"yellow",children:"Yellow House"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"edit-transportRoute",children:"Transport Route"}),e.jsxs(v,{value:l.transportRoute,onValueChange:s=>p({...l,transportRoute:s}),children:[e.jsx(N,{children:e.jsx(f,{placeholder:"Select transport route"})}),e.jsxs(y,{children:[e.jsx(t,{value:"route1",children:"Route 1 - City Center"}),e.jsx(t,{value:"route2",children:"Route 2 - Suburbs"}),e.jsx(t,{value:"route3",children:"Route 3 - East District"}),e.jsx(t,{value:"route4",children:"Route 4 - West District"}),e.jsx(t,{value:"none",children:"No Transport"})]})]})]}),e.jsxs("div",{className:"col-span-2 space-y-2",children:[e.jsx(c,{htmlFor:"edit-medicalConditions",children:"Medical Conditions"}),e.jsx(de,{id:"edit-medicalConditions",value:l.medicalConditions||"",onChange:s=>p({...l,medicalConditions:s.target.value}),placeholder:"Enter any medical conditions",rows:3})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(x,{onClick:js,children:"Update Student"})]})]})}),e.jsx(Y,{open:ls,onOpenChange:Z,children:e.jsxs(J,{children:[e.jsxs(_,{children:[e.jsx(W,{children:"Promote Students"}),e.jsxs(ce,{children:["Promote ",P.length," selected students to the next class."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Se,{children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx(be,{children:"This action will move students to the next academic level. This cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(x,{onClick:gs,children:"Confirm Promotion"})]})]})]})}),e.jsx(Y,{open:as,onOpenChange:s=>{Q(s),s||ne(null)},children:e.jsxs(J,{className:"max-w-2xl",children:[e.jsxs(_,{children:[e.jsx(W,{children:"Bulk Import Students"}),e.jsx(ce,{children:"Upload a CSV or Excel file to import multiple students at once."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>document.getElementById("file-upload")?.click(),onDragOver:s=>{s.preventDefault(),s.stopPropagation()},onDrop:s=>{s.preventDefault(),s.stopPropagation();const a=s.dataTransfer.files[0];a&&ke({target:{files:[a]}})},children:[e.jsx("input",{id:"file-upload",type:"file",className:"hidden",accept:".csv,.xlsx,.xls",onChange:ke}),e.jsx(oe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),T?e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-green-600 mb-2",children:"File Selected!"}),e.jsx("p",{className:"text-sm text-gray-600",children:T.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["(",(T.size/1024).toFixed(2)," KB)"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg font-medium mb-2",children:"Drop your file here"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse"}),e.jsxs(x,{variant:"outline",onClick:s=>{s.stopPropagation(),document.getElementById("file-upload")?.click()},children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Choose File"]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Import Guidelines:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Supported formats: CSV, Excel (.xlsx, .xls)"}),e.jsx("li",{children:"• Maximum file size: 10MB"}),e.jsx("li",{children:"• Required columns: First Name, Last Name, Class, Section, Roll Number"}),e.jsx("li",{children:"• Optional columns: Date of Birth, Gender, Parent Name, Parent Phone, Email, Address"}),e.jsx("li",{children:"• Download sample template for reference"})]})]}),T&&e.jsxs(Se,{children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsxs(be,{children:["Ready to import from: ",e.jsx("strong",{children:T.name})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(x,{variant:"outline",onClick:bs,children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Download Template"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>{Q(!1),ne(null)},disabled:me,children:"Cancel"}),e.jsx(x,{onClick:Ss,disabled:!T||me,children:me?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Import Students"]})})]})]})]})]})})]})}export{Zs as StudentManagement};
