import{r,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as F,t as S,B as i,L as l,S as I,e as R,f as k,g as D,h as a,I as o,o as Me,C as x,c as m,T as Te,i as Be,j as O,k as P,a as N,b as f,l as C}from"./index-CbaydhWW.js";import{T as ie,a as de,b as G,c as j,d as re,e as u}from"./table-SvwjoT6S.js";import{D as E,a as Q,b as q,c as V,d as W,e as X}from"./dialog-GASJ86Ds.js";import{T as L}from"./textarea-Drs0EPqH.js";import{P as He}from"./progress-BxpaIchm.js";import{C as Y}from"./checkbox-DjQKjGtE.js";import{R as Oe,ao as ce,N as he,Z as Pe,g as Ge,ap as Ee,w as qe,s as Ve,a4 as We,a0 as oe,K as xe,a7 as ee,e as Le}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function ls(){const[U,se]=r.useState([]),[me,te]=r.useState([]),[g,le]=r.useState({totalStudents:0,studentsWithAllergies:0,studentsOnMedication:0,recentIncidents:0,overdueMedicals:0,vaccinationCompliance:0,avgBMI:0,healthAlerts:0}),[je,ue]=r.useState(!0),[ge,z]=r.useState(!1),[pe,$]=r.useState(!1),[ve,ae]=r.useState(!1),[Ne,J]=r.useState(!1),[c,fe]=r.useState(null),[_,Ce]=r.useState(""),[T,ye]=r.useState(""),[Ue,ze]=r.useState(""),[y,ne]=r.useState(1),[A]=r.useState(10),[t,v]=r.useState({studentId:"",bloodGroup:"",height:"",weight:"",allergies:"",medicalConditions:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:""}),[n,p]=r.useState({studentId:"",incidentDate:new Date().toISOString().split("T")[0],incidentTime:"",location:"",description:"",severity:"minor",treatmentGiven:"",treatedBy:"",parentNotified:!1,hospitalRequired:!1,followUpRequired:!1}),[h,w]=r.useState({studentId:"",date:new Date().toISOString().split("T")[0],type:"routine",conductedBy:"",findings:"",recommendations:"",nextCheckupDate:""});r.useEffect(()=>{M()},[]);const M=async()=>{try{const[s,d,b]=await Promise.all([F.getHealthRecords().catch(()=>[]),F.getHealthIncidents().catch(()=>[]),F.getHealthStats().catch(()=>({totalStudents:0,studentsWithAllergies:0,studentsOnMedication:0,recentIncidents:0,overdueMedicals:0,vaccinationCompliance:0,avgBMI:0,healthAlerts:0}))]);se(s||[]),te(d||[]),le(b||{totalStudents:0,studentsWithAllergies:0,studentsOnMedication:0,recentIncidents:0,overdueMedicals:0,vaccinationCompliance:0,avgBMI:0,healthAlerts:0}),(!s||s.length===0)&&S.info("No health records found. Mock data loaded.")}catch(s){S.error("Failed to load health records"),console.error(s),se([]),te([]),le({totalStudents:0,studentsWithAllergies:0,studentsOnMedication:0,recentIncidents:0,overdueMedicals:0,vaccinationCompliance:0,avgBMI:0,healthAlerts:0})}finally{ue(!1)}},we=async()=>{try{const s={...t,height:parseFloat(t.height),weight:parseFloat(t.weight),bmi:B(parseFloat(t.height),parseFloat(t.weight)),allergies:t.allergies.split(",").map(d=>d.trim()).filter(d=>d),medicalConditions:t.medicalConditions.split(",").map(d=>d.trim()).filter(d=>d),medications:[],vaccinations:[],checkups:[],emergencyContacts:[{id:`emergency_${Date.now()}`,name:t.emergencyContactName,phone:t.emergencyContactPhone,relationship:t.emergencyContactRelation,isPrimary:!0}]};await F.createHealthRecord(s),S.success("Health record created successfully"),z(!1),Re(),M()}catch(s){S.error("Failed to create health record"),console.error(s)}},be=async()=>{try{await F.createHealthIncident({...n,status:"ongoing"}),S.success("Health incident recorded successfully"),$(!1),ke(),M()}catch(s){S.error("Failed to record health incident"),console.error(s)}},Se=async()=>{try{await F.addHealthCheckup(h),S.success("Health checkup added successfully"),J(!1),De(),M()}catch(s){S.error("Failed to add health checkup"),console.error(s)}},B=(s,d)=>{const b=s/100;return parseFloat((d/(b*b)).toFixed(1))},K=s=>s<18.5?"Underweight":s<25?"Normal":s<30?"Overweight":"Obese",Z=s=>s<18.5?"text-blue-600":s<25?"text-green-600":s<30?"text-yellow-600":"text-red-600",Ie=s=>{switch(s){case"minor":return"bg-green-100 text-green-800";case"moderate":return"bg-yellow-100 text-yellow-800";case"severe":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Re=()=>{v({studentId:"",bloodGroup:"",height:"",weight:"",allergies:"",medicalConditions:"",emergencyContactName:"",emergencyContactPhone:"",emergencyContactRelation:""})},ke=()=>{p({studentId:"",incidentDate:new Date().toISOString().split("T")[0],incidentTime:"",location:"",description:"",severity:"minor",treatmentGiven:"",treatedBy:"",parentNotified:!1,hospitalRequired:!1,followUpRequired:!1})},De=()=>{w({studentId:"",date:new Date().toISOString().split("T")[0],type:"routine",conductedBy:"",findings:"",recommendations:"",nextCheckupDate:""})},H=(U||[]).filter(s=>s?((s.studentName||"").toLowerCase().includes(_.toLowerCase())||(s.rollNumber||"").toLowerCase().includes(_.toLowerCase()))&&(T===""||T==="all"||s.studentClass===T):!1),Fe=Math.ceil(H.length/A),Ae=H.slice((y-1)*A,y*A);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Health Records"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage student health records and medical information"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:M,children:[e.jsx(Oe,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(E,{open:Ne,onOpenChange:J,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(i,{variant:"outline",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Add Checkup"]})}),e.jsxs(q,{children:[e.jsxs(V,{children:[e.jsx(W,{children:"Add Health Checkup"}),e.jsx(X,{children:"Record a new health checkup for a student"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"checkupStudent",children:"Student"}),e.jsxs(I,{value:h.studentId,onValueChange:s=>w({...h,studentId:s}),children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select student"})}),e.jsx(D,{children:U.map(s=>e.jsxs(a,{value:s.studentId,children:[s.studentName," - ",s.rollNumber]},s.studentId))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"checkupDate",children:"Date"}),e.jsx(o,{id:"checkupDate",type:"date",value:h.date,onChange:s=>w({...h,date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"checkupType",children:"Type"}),e.jsxs(I,{value:h.type,onValueChange:s=>w({...h,type:s}),children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select type"})}),e.jsxs(D,{children:[e.jsx(a,{value:"routine",children:"Routine Checkup"}),e.jsx(a,{value:"dental",children:"Dental Checkup"}),e.jsx(a,{value:"vision",children:"Vision Test"}),e.jsx(a,{value:"emergency",children:"Emergency"}),e.jsx(a,{value:"follow_up",children:"Follow-up"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"conductedBy",children:"Conducted By"}),e.jsx(o,{id:"conductedBy",value:h.conductedBy,onChange:s=>w({...h,conductedBy:s.target.value}),placeholder:"Enter doctor/nurse name"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"findings",children:"Findings"}),e.jsx(L,{id:"findings",value:h.findings,onChange:s=>w({...h,findings:s.target.value}),placeholder:"Enter checkup findings",rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"recommendations",children:"Recommendations"}),e.jsx(L,{id:"recommendations",value:h.recommendations,onChange:s=>w({...h,recommendations:s.target.value}),placeholder:"Enter recommendations",rows:2})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"nextCheckupDate",children:"Next Checkup Date (Optional)"}),e.jsx(o,{id:"nextCheckupDate",type:"date",value:h.nextCheckupDate,onChange:s=>w({...h,nextCheckupDate:s.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(i,{onClick:Se,children:"Add Checkup"})]})]})]}),e.jsxs(E,{open:pe,onOpenChange:$,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(i,{variant:"outline",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Report Incident"]})}),e.jsxs(q,{className:"max-w-2xl",children:[e.jsxs(V,{children:[e.jsx(W,{children:"Report Health Incident"}),e.jsx(X,{children:"Record a health incident or injury"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"incidentStudent",children:"Student"}),e.jsxs(I,{value:n.studentId,onValueChange:s=>p({...n,studentId:s}),children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select student"})}),e.jsx(D,{children:U.map(s=>e.jsxs(a,{value:s.studentId,children:[s.studentName," - ",s.rollNumber]},s.studentId))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"incidentDate",children:"Date"}),e.jsx(o,{id:"incidentDate",type:"date",value:n.incidentDate,onChange:s=>p({...n,incidentDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"incidentTime",children:"Time"}),e.jsx(o,{id:"incidentTime",type:"time",value:n.incidentTime,onChange:s=>p({...n,incidentTime:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"location",children:"Location"}),e.jsx(o,{id:"location",value:n.location,onChange:s=>p({...n,location:s.target.value}),placeholder:"Where did it happen?"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"severity",children:"Severity"}),e.jsxs(I,{value:n.severity,onValueChange:s=>p({...n,severity:s}),children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select severity"})}),e.jsxs(D,{children:[e.jsx(a,{value:"minor",children:"Minor"}),e.jsx(a,{value:"moderate",children:"Moderate"}),e.jsx(a,{value:"severe",children:"Severe"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"incidentDescription",children:"Description"}),e.jsx(L,{id:"incidentDescription",value:n.description,onChange:s=>p({...n,description:s.target.value}),placeholder:"Describe what happened",rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"treatmentGiven",children:"Treatment Given"}),e.jsx(L,{id:"treatmentGiven",value:n.treatmentGiven,onChange:s=>p({...n,treatmentGiven:s.target.value}),placeholder:"What treatment was provided?",rows:2})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"treatedBy",children:"Treated By"}),e.jsx(o,{id:"treatedBy",value:n.treatedBy,onChange:s=>p({...n,treatedBy:s.target.value}),placeholder:"Who provided the treatment?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:"parentNotified",checked:n.parentNotified,onCheckedChange:s=>p({...n,parentNotified:!!s})}),e.jsx(l,{htmlFor:"parentNotified",children:"Parent/Guardian notified"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:"hospitalRequired",checked:n.hospitalRequired,onCheckedChange:s=>p({...n,hospitalRequired:!!s})}),e.jsx(l,{htmlFor:"hospitalRequired",children:"Hospital treatment required"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:"followUpRequired",checked:n.followUpRequired,onCheckedChange:s=>p({...n,followUpRequired:!!s})}),e.jsx(l,{htmlFor:"followUpRequired",children:"Follow-up required"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(i,{onClick:be,children:"Record Incident"})]})]})]}),e.jsxs(E,{open:ge,onOpenChange:z,children:[e.jsx(Q,{asChild:!0,children:e.jsxs(i,{children:[e.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Add Health Record"]})}),e.jsxs(q,{className:"max-w-2xl",children:[e.jsxs(V,{children:[e.jsx(W,{children:"Add Health Record"}),e.jsx(X,{children:"Create a new health record for a student"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"student",children:"Student"}),e.jsxs(I,{value:t.studentId,onValueChange:s=>v({...t,studentId:s}),children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select student"})}),e.jsxs(D,{children:[e.jsx(a,{value:"student1",children:"John Doe - 001"}),e.jsx(a,{value:"student2",children:"Jane Smith - 002"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"bloodGroup",children:"Blood Group"}),e.jsxs(I,{value:t.bloodGroup,onValueChange:s=>v({...t,bloodGroup:s}),children:[e.jsx(R,{children:e.jsx(k,{placeholder:"Select"})}),e.jsxs(D,{children:[e.jsx(a,{value:"A+",children:"A+"}),e.jsx(a,{value:"A-",children:"A-"}),e.jsx(a,{value:"B+",children:"B+"}),e.jsx(a,{value:"B-",children:"B-"}),e.jsx(a,{value:"AB+",children:"AB+"}),e.jsx(a,{value:"AB-",children:"AB-"}),e.jsx(a,{value:"O+",children:"O+"}),e.jsx(a,{value:"O-",children:"O-"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"height",children:"Height (cm)"}),e.jsx(o,{id:"height",type:"number",value:t.height,onChange:s=>v({...t,height:s.target.value}),placeholder:"Enter height"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"weight",children:"Weight (kg)"}),e.jsx(o,{id:"weight",type:"number",value:t.weight,onChange:s=>v({...t,weight:s.target.value}),placeholder:"Enter weight"})]})]}),t.height&&t.weight&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"BMI:"}),e.jsxs("span",{className:`font-bold ${Z(B(parseFloat(t.height),parseFloat(t.weight)))}`,children:[B(parseFloat(t.height),parseFloat(t.weight))," - ",K(B(parseFloat(t.height),parseFloat(t.weight)))]})]})}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"allergies",children:"Allergies (comma-separated)"}),e.jsx(o,{id:"allergies",value:t.allergies,onChange:s=>v({...t,allergies:s.target.value}),placeholder:"e.g., Peanuts, Shellfish, Pollen"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"medicalConditions",children:"Medical Conditions (comma-separated)"}),e.jsx(o,{id:"medicalConditions",value:t.medicalConditions,onChange:s=>v({...t,medicalConditions:s.target.value}),placeholder:"e.g., Asthma, Diabetes, Epilepsy"})]}),e.jsx(Me,{}),e.jsx("h4",{className:"font-medium",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"emergencyContactName",children:"Name"}),e.jsx(o,{id:"emergencyContactName",value:t.emergencyContactName,onChange:s=>v({...t,emergencyContactName:s.target.value}),placeholder:"Enter contact name"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"emergencyContactRelation",children:"Relationship"}),e.jsx(o,{id:"emergencyContactRelation",value:t.emergencyContactRelation,onChange:s=>v({...t,emergencyContactRelation:s.target.value}),placeholder:"e.g., Mother, Father"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"emergencyContactPhone",children:"Phone Number"}),e.jsx(o,{id:"emergencyContactPhone",value:t.emergencyContactPhone,onChange:s=>v({...t,emergencyContactPhone:s.target.value}),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(i,{onClick:we,children:"Create Record"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(x,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold",children:g.totalStudents})]}),e.jsx(Ge,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(x,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students with Allergies"}),e.jsx("p",{className:"text-2xl font-bold",children:g.studentsWithAllergies})]}),e.jsx(he,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(x,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"On Medication"}),e.jsx("p",{className:"text-2xl font-bold",children:g.studentsOnMedication})]}),e.jsx(Ee,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(x,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recent Incidents"}),e.jsx("p",{className:"text-2xl font-bold",children:g.recentIncidents})]}),e.jsx(qe,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(Te,{defaultValue:"records",className:"w-full",children:[e.jsxs(Be,{children:[e.jsx(O,{value:"records",children:"Health Records"}),e.jsx(O,{value:"incidents",children:"Health Incidents"}),e.jsx(O,{value:"checkups",children:"Medical Checkups"}),e.jsx(O,{value:"analytics",children:"Health Analytics"})]}),e.jsxs(P,{value:"records",className:"space-y-4",children:[e.jsx(x,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(o,{placeholder:"Search students...",value:_,onChange:s=>Ce(s.target.value),className:"pl-10"})]})}),e.jsxs(I,{value:T,onValueChange:ye,children:[e.jsxs(R,{className:"w-48",children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),e.jsx(k,{placeholder:"Filter by class"})]}),e.jsxs(D,{children:[e.jsx(a,{value:"all",children:"All Classes"}),e.jsx(a,{value:"1",children:"Class 1"}),e.jsx(a,{value:"2",children:"Class 2"}),e.jsx(a,{value:"5",children:"Class 5"}),e.jsx(a,{value:"10",children:"Class 10"})]})]}),e.jsxs(i,{variant:"outline",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Export"]})]})})}),e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{children:"Student Health Records"})}),e.jsxs(m,{children:[je?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(G,{children:[e.jsx(j,{children:"Student"}),e.jsx(j,{children:"Blood Group"}),e.jsx(j,{children:"BMI"}),e.jsx(j,{children:"Allergies"}),e.jsx(j,{children:"Medical Conditions"}),e.jsx(j,{children:"Emergency Contact"}),e.jsx(j,{children:"Actions"})]})}),e.jsx(re,{children:Ae.map(s=>e.jsxs(G,{children:[e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.studentName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.studentClass," - ",s.rollNumber]})]})}),e.jsx(u,{children:e.jsx(C,{variant:"outline",children:s.bloodGroup})}),e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${Z(s.bmi)}`,children:s.bmi}),e.jsx("div",{className:"text-xs text-muted-foreground",children:K(s.bmi)})]})}),e.jsx(u,{children:s.allergies.length>0?e.jsxs("div",{className:"space-y-1",children:[s.allergies.slice(0,2).map((d,b)=>e.jsx(C,{variant:"destructive",className:"text-xs",children:d},b)),s.allergies.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",s.allergies.length-2," more"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"None"})}),e.jsx(u,{children:s.medicalConditions.length>0?e.jsxs("div",{className:"space-y-1",children:[s.medicalConditions.slice(0,2).map((d,b)=>e.jsx(C,{variant:"secondary",className:"text-xs",children:d},b)),s.medicalConditions.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",s.medicalConditions.length-2," more"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"None"})}),e.jsx(u,{children:s.emergencyContacts.length>0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.emergencyContacts[0].name}),e.jsx("div",{className:"text-muted-foreground",children:s.emergencyContacts[0].phone})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{fe(s),ae(!0)},children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(ee,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(y-1)*A+1," to"," ",Math.min(y*A,H.length)," of"," ",H.length," records"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>ne(y-1),disabled:y===1,children:"Previous"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>ne(y+1),disabled:y===Fe,children:"Next"})]})]})]})]})]}),e.jsx(P,{value:"incidents",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{children:"Recent Health Incidents"})}),e.jsx(m,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ie,{children:[e.jsx(de,{children:e.jsxs(G,{children:[e.jsx(j,{children:"Date/Time"}),e.jsx(j,{children:"Student"}),e.jsx(j,{children:"Location"}),e.jsx(j,{children:"Description"}),e.jsx(j,{children:"Severity"}),e.jsx(j,{children:"Treatment"}),e.jsx(j,{children:"Status"}),e.jsx(j,{children:"Actions"})]})}),e.jsx(re,{children:me.slice(0,10).map(s=>e.jsxs(G,{children:[e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:new Date(s.incidentDate).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.incidentTime})]})}),e.jsx(u,{children:e.jsx("div",{className:"font-medium",children:s.studentName})}),e.jsx(u,{children:s.location}),e.jsx(u,{children:e.jsx("div",{className:"max-w-48 truncate",title:s.description,children:s.description})}),e.jsx(u,{children:e.jsx(C,{className:Ie(s.severity),children:s.severity})}),e.jsx(u,{children:e.jsx("div",{className:"max-w-32 truncate",title:s.treatmentGiven,children:s.treatmentGiven})}),e.jsx(u,{children:e.jsx(C,{variant:s.status==="resolved"?"default":"secondary",children:s.status})}),e.jsx(u,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(ee,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(P,{value:"checkups",className:"space-y-4",children:e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{children:"Medical Checkups"})}),e.jsx(m,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Le,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Medical checkups history will appear here"})]})})]})}),e.jsx(P,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{children:"Health Overview"})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Average BMI"}),e.jsx("span",{className:"font-bold",children:g.avgBMI})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Vaccination Compliance"}),e.jsxs("span",{className:"font-bold",children:[g.vaccinationCompliance,"%"]})]}),e.jsx(He,{value:g.vaccinationCompliance,className:"w-full"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Health Alerts"}),e.jsx(C,{variant:g.healthAlerts>0?"destructive":"default",children:g.healthAlerts})]})]})})]}),e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{children:"Medical Statistics"})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600",children:g.studentsWithAllergies}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"With Allergies"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:g.studentsOnMedication}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"On Medication"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:g.overdueMedicals}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Overdue Medical Checkups"})]})]})})]})]})})]}),e.jsx(E,{open:ve,onOpenChange:ae,children:e.jsxs(q,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(V,{children:e.jsx(W,{children:"Health Record Details"})}),c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Student Information"})}),e.jsxs(m,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Name:"}),e.jsx("span",{children:c.studentName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Class:"}),e.jsx("span",{children:c.studentClass})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Roll Number:"}),e.jsx("span",{children:c.rollNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Blood Group:"}),e.jsx(C,{variant:"outline",children:c.bloodGroup})]})]})]}),e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Physical Measurements"})}),e.jsxs(m,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Height:"}),e.jsxs("span",{children:[c.height," cm"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"}),e.jsxs("span",{children:[c.weight," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"BMI:"}),e.jsxs("span",{className:Z(c.bmi),children:[c.bmi," - ",K(c.bmi)]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Allergies"})}),e.jsx(m,{children:c.allergies.length>0?e.jsx("div",{className:"space-y-2",children:c.allergies.map((s,d)=>e.jsx(C,{variant:"destructive",className:"mr-2",children:s},d))}):e.jsx("p",{className:"text-muted-foreground",children:"No known allergies"})})]}),e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Medical Conditions"})}),e.jsx(m,{children:c.medicalConditions.length>0?e.jsx("div",{className:"space-y-2",children:c.medicalConditions.map((s,d)=>e.jsx(C,{variant:"secondary",className:"mr-2",children:s},d))}):e.jsx("p",{className:"text-muted-foreground",children:"No medical conditions"})})]})]}),e.jsxs(x,{children:[e.jsx(N,{children:e.jsx(f,{className:"text-lg",children:"Emergency Contacts"})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:c.emergencyContacts.map(s=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.relationship}),e.jsx("div",{className:"text-sm",children:s.phone}),s.email&&e.jsx("div",{className:"text-sm text-muted-foreground",children:s.email})]}),s.isPrimary&&e.jsx(C,{variant:"default",children:"Primary"})]})},s.id))})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Edit Record"]}),e.jsxs(i,{variant:"outline",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Add Checkup"]}),e.jsxs(i,{variant:"outline",children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Export Record"]})]})]})]})})]})}export{ls as HealthRecords};
