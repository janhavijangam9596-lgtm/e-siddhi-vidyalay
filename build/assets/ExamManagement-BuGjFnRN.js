import{r as o,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as f,t as m,B as n,L as d,I as h,S as u,e as g,f as v,g as p,h as a,C as N,c as b,T as We,i as Ze,j as Z,k as Q,a as _,b as Y,l as X}from"./index-CbaydhWW.js";import{T as ee,a as se,b as T,c as t,d as ae,e as c}from"./table-SvwjoT6S.js";import{D as P,a as Qe,b as F,c as I,d as R,e as B}from"./dialog-GASJ86Ds.js";import{T as ue}from"./textarea-Drs0EPqH.js";import{P as Xe}from"./progress-BxpaIchm.js";import{A as ge,a as ve}from"./alert-DYlOQqmu.js";import{C as es}from"./checkbox-DjQKjGtE.js";import{R as ss,c as pe,Z as as,F as ls,d as rs,V as is,T as ns,s as ts,a4 as cs,K as fe,af as ds,a7 as Ne,a6 as be,a0 as ne,ag as xs,a3 as os,O as ye}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function Ss(){const[M,te]=o.useState([]),[G,ce]=o.useState([]),[de,xe]=o.useState([]),[y,Ce]=o.useState({totalExams:0,completedExams:0,upcomingExams:0,ongoingExams:0,averagePerformance:0,highestScore:0,lowestScore:0,passPercentage:0}),[Ee,Se]=o.useState(!0),[we,le]=o.useState(!1),[ke,O]=o.useState(!1),[Te,z]=o.useState(!1),[Me,H]=o.useState(!1),[De,$]=o.useState(!1),[Pe,A]=o.useState(!1),[r,L]=o.useState(null),[S,V]=o.useState([]),[re,Fe]=o.useState(""),[J,Ie]=o.useState(""),[K,Re]=o.useState(""),[q,Oe]=o.useState(""),[w,oe]=o.useState(1),[U]=o.useState(10),[l,i]=o.useState({name:"",examType:"unit_test",class:"",subject:"",date:"",startTime:"",duration:"60",maxMarks:"100",passingMarks:"35",roomNumber:"",invigilator:"",instructions:"",academicYear:"2024-25",term:"first"}),[he,hs]=o.useState({examId:"",results:[]}),me=[{grade:"A+",minPercentage:90,maxPercentage:100,description:"Outstanding",points:10},{grade:"A",minPercentage:80,maxPercentage:89,description:"Excellent",points:9},{grade:"B+",minPercentage:70,maxPercentage:79,description:"Very Good",points:8},{grade:"B",minPercentage:60,maxPercentage:69,description:"Good",points:7},{grade:"C+",minPercentage:50,maxPercentage:59,description:"Average",points:6},{grade:"C",minPercentage:40,maxPercentage:49,description:"Below Average",points:5},{grade:"D",minPercentage:35,maxPercentage:39,description:"Pass",points:4},{grade:"F",minPercentage:0,maxPercentage:34,description:"Fail",points:0}];o.useEffect(()=>{k()},[]);const k=async()=>{try{const[s,x,C,E]=await Promise.all([f.getExams().catch(()=>[]),f.getExamResults().catch(()=>[]),f.getExamSchedules().catch(()=>[]),f.getExamStats().catch(()=>({totalExams:0,completedExams:0,upcomingExams:0,ongoingExams:0,averagePerformance:0,highestScore:0,lowestScore:0,passPercentage:0}))]);te(s||[]),ce(x||[]),xe(C||[]),Ce(E||{totalExams:0,completedExams:0,upcomingExams:0,ongoingExams:0,averagePerformance:0,highestScore:0,lowestScore:0,passPercentage:0})}catch(s){m.error("Failed to load exam data"),console.error(s),te([]),ce([]),xe([])}finally{Se(!1)}},Ae=async()=>{try{const s={...l,duration:parseInt(l.duration),maxMarks:parseInt(l.maxMarks),passingMarks:parseInt(l.passingMarks),status:"scheduled"};await f.createExam(s),m.success("Exam created successfully"),le(!1),je(),k()}catch(s){m.error("Failed to create exam"),console.error(s)}},Le=async()=>{if(r)try{const s={...l,duration:parseInt(l.duration),maxMarks:parseInt(l.maxMarks),passingMarks:parseInt(l.passingMarks)};await f.updateExam(r.id,s),m.success("Exam updated successfully"),O(!1),je(),k()}catch(s){m.error("Failed to update exam"),console.error(s)}},Ve=async()=>{if(r)try{await f.deleteExam(r.id),m.success("Exam deleted successfully"),A(!1),L(null),k()}catch(s){m.error("Failed to delete exam"),console.error(s)}},Ue=s=>{const x=JSON.stringify(s,null,2),C=new Blob([x],{type:"application/json"}),E=URL.createObjectURL(C),D=document.createElement("a");D.href=E,D.download=`exam-${s.id}-${Date.now()}.json`,D.click(),m.success("Exam details exported successfully")},_e=()=>{const s=G.map(j=>({"Student Name":j.studentName,"Roll Number":j.rollNumber,Exam:(M||[]).find(ie=>ie.id===j.examId)?.name||"",Subject:(M||[]).find(ie=>ie.id===j.examId)?.subject||"","Marks Obtained":j.marksObtained,"Max Marks":j.maxMarks,Percentage:j.percentage,Grade:j.grade,Status:j.status,Remarks:j.remarks||""})),x=[Object.keys(s[0]).join(","),...s.map(j=>Object.values(j).join(","))].join(`
`),C=new Blob([x],{type:"text/csv"}),E=URL.createObjectURL(C),D=document.createElement("a");D.href=E,D.download=`exam-results-${Date.now()}.csv`,D.click(),m.success("Results exported successfully")},Ye=()=>{window.print(),m.success("Schedule sent to printer")},Be=async()=>{try{const s=(he.results||[]).map(x=>({examId:he.examId,studentId:x.studentId,marksObtained:parseInt(x.marksObtained||"0"),status:x.status,remarks:x.remarks,percentage:parseInt(x.marksObtained||"0")/(r?.maxMarks||1)*100,grade:He(parseInt(x.marksObtained||"0")/(r?.maxMarks||1)*100)}));await f.submitExamResults(s),m.success("Results submitted successfully"),z(!1),k()}catch(s){m.error("Failed to submit results"),console.error(s)}},Ge=async()=>{try{if(S.length===0){m.warning("Please select exams to schedule");return}await f.generateExamSchedule(S),m.success("Exam schedule generated successfully"),$(!1),V([]),k()}catch(s){m.error("Failed to generate schedule"),console.error(s)}},ze=async s=>{try{await f.publishExamResults(s),m.success("Results published successfully"),k()}catch(x){m.error("Failed to publish results"),console.error(x)}},He=s=>{for(const x of me)if(s>=x.minPercentage&&s<=x.maxPercentage)return x.grade;return"F"},je=()=>{i({name:"",examType:"unit_test",class:"",subject:"",date:"",startTime:"",duration:"60",maxMarks:"100",passingMarks:"35",roomNumber:"",invigilator:"",instructions:"",academicYear:"2024-25",term:"first"})},$e=s=>{switch(s){case"scheduled":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Je=s=>{switch(s){case"final":return"bg-red-100 text-red-800";case"mid_term":return"bg-orange-100 text-orange-800";case"unit_test":return"bg-blue-100 text-blue-800";case"practical":return"bg-purple-100 text-purple-800";case"assignment":return"bg-green-100 text-green-800";case"project":return"bg-indigo-100 text-indigo-800";default:return"bg-gray-100 text-gray-800"}},W=(M||[]).filter(s=>s?((s.name||"").toLowerCase().includes(re.toLowerCase())||(s.subject||"").toLowerCase().includes(re.toLowerCase()))&&(J===""||J==="all"||s.status===J)&&(K===""||K==="all"||s.class===K)&&(q===""||q==="all"||s.examType===q):!1),Ke=Math.ceil(W.length/U),qe=W.slice((w-1)*U,w*U);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Exam Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage exams, schedules, and results"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:k,children:[e.jsx(ss,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(n,{variant:"outline",onClick:()=>$(!0),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Schedule"]}),e.jsxs(P,{open:we,onOpenChange:le,children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(n,{children:[e.jsx(as,{className:"mr-2 h-4 w-4"}),"New Exam"]})}),e.jsxs(F,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsx(R,{children:"Create New Exam"}),e.jsx(B,{children:"Set up a new exam for students"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"examName",children:"Exam Name"}),e.jsx(h,{id:"examName",value:l.name,onChange:s=>i({...l,name:s.target.value}),placeholder:"Enter exam name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"examType",children:"Exam Type"}),e.jsxs(u,{value:l.examType,onValueChange:s=>i({...l,examType:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select exam type"})}),e.jsxs(p,{children:[e.jsx(a,{value:"unit_test",children:"Unit Test"}),e.jsx(a,{value:"mid_term",children:"Mid Term"}),e.jsx(a,{value:"final",children:"Final Exam"}),e.jsx(a,{value:"practical",children:"Practical"}),e.jsx(a,{value:"assignment",children:"Assignment"}),e.jsx(a,{value:"project",children:"Project"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"examClass",children:"Class"}),e.jsxs(u,{value:l.class,onValueChange:s=>i({...l,class:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select class"})}),e.jsxs(p,{children:[e.jsx(a,{value:"nursery",children:"Nursery"}),e.jsx(a,{value:"kindergarten",children:"Kindergarten"}),e.jsx(a,{value:"1",children:"Class 1"}),e.jsx(a,{value:"2",children:"Class 2"}),e.jsx(a,{value:"3",children:"Class 3"}),e.jsx(a,{value:"4",children:"Class 4"}),e.jsx(a,{value:"5",children:"Class 5"}),e.jsx(a,{value:"6",children:"Class 6"}),e.jsx(a,{value:"7",children:"Class 7"}),e.jsx(a,{value:"8",children:"Class 8"}),e.jsx(a,{value:"9",children:"Class 9"}),e.jsx(a,{value:"10",children:"Class 10"}),e.jsx(a,{value:"11",children:"Class 11"}),e.jsx(a,{value:"12",children:"Class 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"examSubject",children:"Subject"}),e.jsxs(u,{value:l.subject,onValueChange:s=>i({...l,subject:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select subject"})}),e.jsxs(p,{children:[e.jsx(a,{value:"mathematics",children:"Mathematics"}),e.jsx(a,{value:"english",children:"English"}),e.jsx(a,{value:"science",children:"Science"}),e.jsx(a,{value:"social_studies",children:"Social Studies"}),e.jsx(a,{value:"hindi",children:"Hindi"}),e.jsx(a,{value:"computer_science",children:"Computer Science"}),e.jsx(a,{value:"physics",children:"Physics"}),e.jsx(a,{value:"chemistry",children:"Chemistry"}),e.jsx(a,{value:"biology",children:"Biology"}),e.jsx(a,{value:"history",children:"History"}),e.jsx(a,{value:"geography",children:"Geography"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"examDate",children:"Exam Date"}),e.jsx(h,{id:"examDate",type:"date",value:l.date,onChange:s=>i({...l,date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"startTime",children:"Start Time"}),e.jsx(h,{id:"startTime",type:"time",value:l.startTime,onChange:s=>i({...l,startTime:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsx(h,{id:"duration",type:"number",value:l.duration,onChange:s=>i({...l,duration:s.target.value}),placeholder:"60"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"maxMarks",children:"Maximum Marks"}),e.jsx(h,{id:"maxMarks",type:"number",value:l.maxMarks,onChange:s=>i({...l,maxMarks:s.target.value}),placeholder:"100"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"passingMarks",children:"Passing Marks"}),e.jsx(h,{id:"passingMarks",type:"number",value:l.passingMarks,onChange:s=>i({...l,passingMarks:s.target.value}),placeholder:"35"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"roomNumber",children:"Room Number"}),e.jsx(h,{id:"roomNumber",value:l.roomNumber,onChange:s=>i({...l,roomNumber:s.target.value}),placeholder:"Enter room number"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"invigilator",children:"Invigilator"}),e.jsx(h,{id:"invigilator",value:l.invigilator,onChange:s=>i({...l,invigilator:s.target.value}),placeholder:"Enter invigilator name"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"academicYear",children:"Academic Year"}),e.jsxs(u,{value:l.academicYear,onValueChange:s=>i({...l,academicYear:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select academic year"})}),e.jsxs(p,{children:[e.jsx(a,{value:"2024-25",children:"2024-25"}),e.jsx(a,{value:"2025-26",children:"2025-26"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"term",children:"Term"}),e.jsxs(u,{value:l.term,onValueChange:s=>i({...l,term:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select term"})}),e.jsxs(p,{children:[e.jsx(a,{value:"first",children:"First Term"}),e.jsx(a,{value:"second",children:"Second Term"}),e.jsx(a,{value:"third",children:"Third Term"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"instructions",children:"Instructions"}),e.jsx(ue,{id:"instructions",value:l.instructions,onChange:s=>i({...l,instructions:s.target.value}),placeholder:"Enter exam instructions",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(n,{variant:"outline",onClick:()=>le(!1),children:"Cancel"}),e.jsx(n,{onClick:Ae,children:"Create Exam"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(N,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Exams"}),e.jsx("p",{className:"text-2xl font-bold",children:y.totalExams})]}),e.jsx(ls,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(N,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upcoming Exams"}),e.jsx("p",{className:"text-2xl font-bold",children:y.upcomingExams})]}),e.jsx(rs,{className:"h-8 w-8 text-orange-600"})]})})}),e.jsx(N,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Performance"}),e.jsxs("p",{className:"text-2xl font-bold",children:[y.averagePerformance,"%"]})]}),e.jsx(is,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(N,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pass Percentage"}),e.jsxs("p",{className:"text-2xl font-bold",children:[y.passPercentage,"%"]})]}),e.jsx(ns,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsxs(We,{defaultValue:"exams",className:"w-full",children:[e.jsxs(Ze,{children:[e.jsx(Z,{value:"exams",children:"Exam Management"}),e.jsx(Z,{value:"results",children:"Results"}),e.jsx(Z,{value:"schedule",children:"Schedule"}),e.jsx(Z,{value:"analytics",children:"Analytics"})]}),e.jsxs(Q,{value:"exams",className:"space-y-4",children:[e.jsx(N,{children:e.jsx(b,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(h,{placeholder:"Search exams...",value:re,onChange:s=>Fe(s.target.value),className:"pl-10"})]})}),e.jsxs(u,{value:J,onValueChange:Ie,children:[e.jsxs(g,{className:"w-48",children:[e.jsx(cs,{className:"mr-2 h-4 w-4"}),e.jsx(v,{placeholder:"Filter by status"})]}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"All Statuses"}),e.jsx(a,{value:"scheduled",children:"Scheduled"}),e.jsx(a,{value:"ongoing",children:"Ongoing"}),e.jsx(a,{value:"completed",children:"Completed"}),e.jsx(a,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(u,{value:q,onValueChange:Oe,children:[e.jsx(g,{className:"w-48",children:e.jsx(v,{placeholder:"Filter by type"})}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"All Types"}),e.jsx(a,{value:"unit_test",children:"Unit Test"}),e.jsx(a,{value:"mid_term",children:"Mid Term"}),e.jsx(a,{value:"final",children:"Final"}),e.jsx(a,{value:"practical",children:"Practical"}),e.jsx(a,{value:"assignment",children:"Assignment"}),e.jsx(a,{value:"project",children:"Project"})]})]}),e.jsxs(u,{value:K,onValueChange:Re,children:[e.jsx(g,{className:"w-48",children:e.jsx(v,{placeholder:"Filter by class"})}),e.jsxs(p,{children:[e.jsx(a,{value:"all",children:"All Classes"}),e.jsx(a,{value:"1",children:"Class 1"}),e.jsx(a,{value:"2",children:"Class 2"}),e.jsx(a,{value:"5",children:"Class 5"}),e.jsx(a,{value:"10",children:"Class 10"})]})]})]})})}),e.jsxs(N,{children:[e.jsx(_,{children:e.jsx(Y,{children:"Exams"})}),e.jsxs(b,{children:[Ee?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(T,{children:[e.jsx(t,{children:"Exam Name"}),e.jsx(t,{children:"Type"}),e.jsx(t,{children:"Class"}),e.jsx(t,{children:"Subject"}),e.jsx(t,{children:"Date & Time"}),e.jsx(t,{children:"Duration"}),e.jsx(t,{children:"Max Marks"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(ae,{children:(qe||[]).map(s=>e.jsxs(T,{children:[e.jsx(c,{className:"font-medium",children:s.name}),e.jsx(c,{children:e.jsx(X,{className:Je(s.examType),children:s.examType.replace("_"," ")})}),e.jsx(c,{children:s.class}),e.jsx(c,{children:s.subject}),e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{children:new Date(s.date).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.startTime})]})}),e.jsxs(c,{children:[s.duration," min"]}),e.jsx(c,{children:s.maxMarks}),e.jsx(c,{children:e.jsx(X,{className:$e(s.status),children:s.status})}),e.jsx(c,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"outline",onClick:()=>{L(s),H(!0)},children:e.jsx(fe,{className:"h-4 w-4"})}),s.status==="completed"&&e.jsx(n,{size:"sm",variant:"outline",onClick:()=>{L(s),z(!0)},children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>{L(s),i({name:s.name,examType:s.examType,class:s.class,subject:s.subject,date:s.date,startTime:s.startTime,duration:String(s.duration),maxMarks:String(s.maxMarks),passingMarks:String(s.passingMarks),roomNumber:s.roomNumber||"",invigilator:s.invigilator||"",instructions:s.instructions||"",academicYear:s.academicYear,term:s.term}),O(!0)},children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>{L(s),A(!0)},children:e.jsx(be,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(w-1)*U+1," to"," ",Math.min(w*U,W.length)," of"," ",W.length," exams"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>oe(w-1),disabled:w===1,children:"Previous"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>oe(w+1),disabled:w===Ke,children:"Next"})]})]})]})]})]}),e.jsx(Q,{value:"results",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between",children:[e.jsx(Y,{children:"Exam Results"}),e.jsxs(n,{variant:"outline",onClick:_e,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Export Results"]})]}),e.jsx(b,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(T,{children:[e.jsx(t,{children:"Student"}),e.jsx(t,{children:"Exam"}),e.jsx(t,{children:"Subject"}),e.jsx(t,{children:"Marks"}),e.jsx(t,{children:"Percentage"}),e.jsx(t,{children:"Grade"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(ae,{children:(G||[]).slice(0,10).map(s=>e.jsxs(T,{children:[e.jsx(c,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.studentName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.rollNumber})]})}),e.jsx(c,{children:(M||[]).find(x=>x.id===s.examId)?.name||"-"}),e.jsx(c,{children:(M||[]).find(x=>x.id===s.examId)?.subject||"-"}),e.jsxs(c,{children:[s.marksObtained,"/",s.maxMarks]}),e.jsxs(c,{children:[s.percentage.toFixed(1),"%"]}),e.jsx(c,{children:e.jsx(X,{variant:s.grade==="F"?"destructive":"default",children:s.grade})}),e.jsx(c,{children:e.jsx(X,{variant:s.status==="pass"?"default":"destructive",children:s.status})}),e.jsx(c,{children:e.jsx(n,{size:"sm",variant:"outline",children:e.jsx(fe,{className:"h-4 w-4"})})})]},s.id))})]})})})]})}),e.jsx(Q,{value:"schedule",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between",children:[e.jsx(Y,{children:"Exam Schedule"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:Ye,children:[e.jsx(xs,{className:"mr-2 h-4 w-4"}),"Print Schedule"]}),e.jsxs(n,{variant:"outline",onClick:()=>{const s=JSON.stringify(de,null,2),x=new Blob([s],{type:"application/json"}),C=URL.createObjectURL(x),E=document.createElement("a");E.href=C,E.download=`exam-schedule-${Date.now()}.json`,E.click(),m.success("Schedule exported successfully")},children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Export Schedule"]})]})]}),e.jsx(b,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(T,{children:[e.jsx(t,{children:"Date"}),e.jsx(t,{children:"Time"}),e.jsx(t,{children:"Exam"}),e.jsx(t,{children:"Class"}),e.jsx(t,{children:"Subject"}),e.jsx(t,{children:"Room"}),e.jsx(t,{children:"Invigilator"})]})}),e.jsx(ae,{children:(de||[]).map(s=>e.jsxs(T,{children:[e.jsx(c,{children:new Date(s.date).toLocaleDateString()}),e.jsxs(c,{children:[s.startTime," - ",s.endTime]}),e.jsx(c,{children:s.examName}),e.jsx(c,{children:s.class}),e.jsx(c,{children:s.subject}),e.jsx(c,{children:s.roomNumber}),e.jsx(c,{children:s.invigilator})]},s.id))})]})})})]})}),e.jsx(Q,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(N,{children:[e.jsx(_,{children:e.jsx(Y,{children:"Performance Overview"})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Average Score"}),e.jsxs("span",{className:"font-bold",children:[y.averagePerformance,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Highest Score"}),e.jsxs("span",{className:"font-bold text-green-600",children:[y.highestScore,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Lowest Score"}),e.jsxs("span",{className:"font-bold text-red-600",children:[y.lowestScore,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Pass Rate"}),e.jsxs("span",{className:"font-bold",children:[y.passPercentage,"%"]})]}),e.jsx(Xe,{value:y.passPercentage,className:"w-full"})]})})]}),e.jsxs(N,{children:[e.jsx(_,{children:e.jsx(Y,{children:"Grade Distribution"})}),e.jsx(b,{children:e.jsx("div",{className:"space-y-2",children:(me||[]).slice(0,6).map(s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:[s.grade," (",s.description,")"]}),e.jsxs("span",{className:"font-medium",children:[s.minPercentage,"-",s.maxPercentage,"%"]})]},s.grade))})})]})]})})]}),e.jsx(P,{open:Me,onOpenChange:H,children:e.jsxs(F,{className:"max-w-2xl",children:[e.jsx(I,{children:e.jsx(R,{children:"Exam Details"})}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Basic Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Name: ",r.name]}),e.jsxs("div",{children:["Type: ",r.examType.replace("_"," ")]}),e.jsxs("div",{children:["Class: ",r.class]}),e.jsxs("div",{children:["Subject: ",r.subject]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Schedule"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Date: ",new Date(r.date).toLocaleDateString()]}),e.jsxs("div",{children:["Start Time: ",r.startTime]}),e.jsxs("div",{children:["Duration: ",r.duration," minutes"]}),e.jsxs("div",{children:["Room: ",r.roomNumber]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Marks"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Maximum Marks: ",r.maxMarks]}),e.jsxs("div",{children:["Passing Marks: ",r.passingMarks]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Other Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Invigilator: ",r.invigilator]}),e.jsxs("div",{children:["Academic Year: ",r.academicYear]}),e.jsxs("div",{children:["Term: ",r.term]})]})]})]}),r.instructions&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Instructions"}),e.jsx("p",{className:"text-sm",children:r.instructions})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",onClick:()=>{i({name:r.name,examType:r.examType,class:r.class,subject:r.subject,date:r.date,startTime:r.startTime,duration:String(r.duration),maxMarks:String(r.maxMarks),passingMarks:String(r.passingMarks),roomNumber:r.roomNumber||"",invigilator:r.invigilator||"",instructions:r.instructions||"",academicYear:r.academicYear,term:r.term}),H(!1),O(!0)},children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Edit Exam"]}),e.jsxs(n,{variant:"outline",onClick:()=>Ue(r),children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Export Details"]}),r.status==="completed"&&e.jsxs(n,{onClick:()=>ze(r.id),children:[e.jsx(os,{className:"mr-2 h-4 w-4"}),"Publish Results"]}),e.jsxs(n,{variant:"outline",onClick:()=>{H(!1),A(!0)},children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),e.jsx(P,{open:Te,onOpenChange:z,children:e.jsxs(F,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsx(R,{children:"Enter Exam Results"}),e.jsx(B,{children:"Enter marks for all students who appeared for the exam"})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.class," - ",r.subject," | Max Marks: ",r.maxMarks]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(T,{children:[e.jsx(t,{children:"Student Name"}),e.jsx(t,{children:"Roll Number"}),e.jsx(t,{children:"Marks Obtained"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Remarks"})]})}),e.jsx(ae,{children:e.jsxs(T,{children:[e.jsx(c,{children:"John Doe"}),e.jsx(c,{children:"001"}),e.jsx(c,{children:e.jsx(h,{type:"number",placeholder:"0",max:r.maxMarks,className:"w-20"})}),e.jsx(c,{children:e.jsxs(u,{children:[e.jsx(g,{className:"w-32",children:e.jsx(v,{placeholder:"Status"})}),e.jsxs(p,{children:[e.jsx(a,{value:"pass",children:"Pass"}),e.jsx(a,{value:"fail",children:"Fail"}),e.jsx(a,{value:"absent",children:"Absent"})]})]})}),e.jsx(c,{children:e.jsx(h,{placeholder:"Optional remarks",className:"w-40"})})]})})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(n,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(n,{onClick:Be,children:"Submit Results"})]})]})}),e.jsx(P,{open:ke,onOpenChange:O,children:e.jsxs(F,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsx(R,{children:"Edit Exam"}),e.jsx(B,{children:"Update exam details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editExamName",children:"Exam Name"}),e.jsx(h,{id:"editExamName",value:l.name,onChange:s=>i({...l,name:s.target.value}),placeholder:"Enter exam name"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editExamType",children:"Exam Type"}),e.jsxs(u,{value:l.examType,onValueChange:s=>i({...l,examType:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select exam type"})}),e.jsxs(p,{children:[e.jsx(a,{value:"unit_test",children:"Unit Test"}),e.jsx(a,{value:"mid_term",children:"Mid Term"}),e.jsx(a,{value:"final",children:"Final Exam"}),e.jsx(a,{value:"practical",children:"Practical"}),e.jsx(a,{value:"assignment",children:"Assignment"}),e.jsx(a,{value:"project",children:"Project"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editExamClass",children:"Class"}),e.jsxs(u,{value:l.class,onValueChange:s=>i({...l,class:s}),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select class"})}),e.jsxs(p,{children:[e.jsx(a,{value:"1",children:"Class 1"}),e.jsx(a,{value:"2",children:"Class 2"}),e.jsx(a,{value:"3",children:"Class 3"}),e.jsx(a,{value:"4",children:"Class 4"}),e.jsx(a,{value:"5",children:"Class 5"}),e.jsx(a,{value:"6",children:"Class 6"}),e.jsx(a,{value:"7",children:"Class 7"}),e.jsx(a,{value:"8",children:"Class 8"}),e.jsx(a,{value:"9",children:"Class 9"}),e.jsx(a,{value:"10",children:"Class 10"}),e.jsx(a,{value:"11",children:"Class 11"}),e.jsx(a,{value:"12",children:"Class 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editExamSubject",children:"Subject"}),e.jsx(h,{id:"editExamSubject",value:l.subject,onChange:s=>i({...l,subject:s.target.value}),placeholder:"Enter subject"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editExamDate",children:"Exam Date"}),e.jsx(h,{id:"editExamDate",type:"date",value:l.date,onChange:s=>i({...l,date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editStartTime",children:"Start Time"}),e.jsx(h,{id:"editStartTime",type:"time",value:l.startTime,onChange:s=>i({...l,startTime:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editDuration",children:"Duration (minutes)"}),e.jsx(h,{id:"editDuration",type:"number",value:l.duration,onChange:s=>i({...l,duration:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editMaxMarks",children:"Maximum Marks"}),e.jsx(h,{id:"editMaxMarks",type:"number",value:l.maxMarks,onChange:s=>i({...l,maxMarks:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editPassingMarks",children:"Passing Marks"}),e.jsx(h,{id:"editPassingMarks",type:"number",value:l.passingMarks,onChange:s=>i({...l,passingMarks:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editRoomNumber",children:"Room Number"}),e.jsx(h,{id:"editRoomNumber",value:l.roomNumber,onChange:s=>i({...l,roomNumber:s.target.value}),placeholder:"Enter room number"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editInvigilator",children:"Invigilator"}),e.jsx(h,{id:"editInvigilator",value:l.invigilator,onChange:s=>i({...l,invigilator:s.target.value}),placeholder:"Enter invigilator name"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"editInstructions",children:"Instructions"}),e.jsx(ue,{id:"editInstructions",value:l.instructions,onChange:s=>i({...l,instructions:s.target.value}),placeholder:"Enter exam instructions",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(n,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(n,{onClick:Le,children:"Update Exam"})]})]})}),e.jsx(P,{open:Pe,onOpenChange:A,children:e.jsxs(F,{children:[e.jsxs(I,{children:[e.jsx(R,{children:"Delete Exam"}),e.jsx(B,{children:"Are you sure you want to delete this exam? This action cannot be undone."})]}),r&&e.jsx("div",{className:"py-4",children:e.jsxs(ge,{children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsxs(ve,{children:["You are about to delete ",e.jsx("strong",{children:r.name})," scheduled for ",new Date(r.date).toLocaleDateString(),".",G.filter(s=>s.examId===r.id).length>0&&e.jsxs("div",{className:"mt-2 text-red-600",children:["Warning: This exam has ",G.filter(s=>s.examId===r.id).length," associated results that will also be deleted."]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(n,{variant:"destructive",onClick:Ve,children:"Delete Exam"})]})]})}),e.jsx(P,{open:De,onOpenChange:$,children:e.jsxs(F,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(I,{children:[e.jsx(R,{children:"Generate Exam Schedule"}),e.jsx(B,{children:"Select exams to include in the automated schedule generation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Select Exams"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(M||[]).filter(s=>s.status==="scheduled").map(s=>e.jsxs("div",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[e.jsx(es,{id:`schedule-${s.id}`,checked:S.includes(s.id),onCheckedChange:x=>{V(x?[...S,s.id]:S.filter(C=>C!==s.id))}}),e.jsx(d,{htmlFor:`schedule-${s.id}`,className:"flex-1 cursor-pointer",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.class," - ",s.subject," | ",new Date(s.date).toLocaleDateString()]})]})})]},s.id))})]}),S.length>0&&e.jsxs(ge,{children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsxs(ve,{children:[S.length," exam(s) selected for scheduling. The system will automatically arrange them to avoid conflicts."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(n,{variant:"outline",onClick:()=>{V((M||[]).filter(s=>s.status==="scheduled").map(s=>s.id))},children:"Select All"}),e.jsx(n,{variant:"outline",onClick:()=>V([]),children:"Clear Selection"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(n,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsxs(n,{onClick:Ge,disabled:S.length===0,children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Generate Schedule"]})]})]})})]})}export{Ss as ExamManagement};
