import{r as c,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as N,t as f,B as t,L as a,S,e as C,f as w,g as D,h as o,I as l,C as m,c as p,T as Ve,i as He,j as O,k as P,a as E,b as B,l as I}from"./index-CbaydhWW.js";import{T as ae,a as te,b as R,c as i,d as ne,e as r}from"./table-SvwjoT6S.js";import{D as J,a as U,b as G,c as _,d as q,e as K}from"./dialog-GASJ86Ds.js";import{P as le}from"./progress-BxpaIchm.js";import{C as Je}from"./checkbox-DjQKjGtE.js";import{R as Ue,U as ce,l as Ge,ah as _e,Z as de,a6 as qe,B as Ke,h as We,N as Ye,s as Ze,a4 as Qe,a0 as Xe,K as oe,ai as $e,a7 as W,aj as es,a8 as ss}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function js(){const[he,xe]=c.useState([]),[M,ue]=c.useState([]),[ie,je]=c.useState([]),[me,pe]=c.useState([]),[x,ve]=c.useState({totalBuses:0,activeBuses:0,totalStudents:0,totalRoutes:0,averageOccupancy:0,maintenanceDue:0,totalDistance:0,fuelConsumption:0}),[ge,Ne]=c.useState(!0),[fe,Y]=c.useState(!1),[ye,Z]=c.useState(!1),[be,Q]=c.useState(!1),[Se,X]=c.useState(!1),[as,ts]=c.useState(null),[$,Ce]=c.useState(""),[ee,we]=c.useState(""),[se,De]=c.useState(""),[y,re]=c.useState(1),[k]=c.useState(10),[d,b]=c.useState({busNumber:"",capacity:"40",driverId:"",attendantId:"",routeId:"",fuelEfficiency:"12",gpsEnabled:!0}),[n,v]=c.useState({routeName:"",routeCode:"",startLocation:"",endLocation:"",totalDistance:"",estimatedTime:"",fare:"",stops:[{stopName:"",location:"",pickupTime:"",dropTime:"",landmark:""}]}),[h,F]=c.useState({name:"",licenseNumber:"",phone:"",email:"",experience:"",joiningDate:new Date().toISOString().split("T")[0]}),[g,L]=c.useState({studentId:"",routeId:"",stopId:"",monthlyFee:""});c.useEffect(()=>{A()},[]);const A=async()=>{try{const[s,u,j,T,ze]=await Promise.all([N.getBuses(),N.getRoutes(),N.getDrivers(),N.getStudentTransport(),N.getTransportStats()]);xe(s),ue(u),je(j),pe(T),ve(ze)}catch(s){f.error("Failed to load transport data"),console.error(s)}finally{Ne(!1)}},Fe=async()=>{try{const s={...d,capacity:parseInt(d.capacity),fuelEfficiency:parseFloat(d.fuelEfficiency),currentStudents:0,status:"active",lastService:new Date().toISOString(),nextService:new Date(Date.now()+7776e6).toISOString()};await N.createBus(s),f.success("Bus added successfully"),Y(!1),Be(),A()}catch(s){f.error("Failed to add bus"),console.error(s)}},Te=async()=>{try{const s={...n,totalDistance:parseFloat(n.totalDistance),estimatedTime:parseInt(n.estimatedTime),fare:parseFloat(n.fare),status:"active"};await N.createRoute(s),f.success("Route created successfully"),Z(!1),Ie(),A()}catch(s){f.error("Failed to create route"),console.error(s)}},Ae=async()=>{try{const s={...h,experience:parseInt(h.experience),status:"active"};await N.createDriver(s),f.success("Driver added successfully"),Q(!1),Re(),A()}catch(s){f.error("Failed to add driver"),console.error(s)}},Ee=async()=>{try{const s={...g,monthlyFee:parseFloat(g.monthlyFee),status:"active"};await N.assignStudentTransport(s),f.success("Student assigned to transport successfully"),X(!1),ke(),A()}catch(s){f.error("Failed to assign student to transport"),console.error(s)}},Be=()=>{b({busNumber:"",capacity:"40",driverId:"",attendantId:"",routeId:"",fuelEfficiency:"12",gpsEnabled:!0})},Ie=()=>{v({routeName:"",routeCode:"",startLocation:"",endLocation:"",totalDistance:"",estimatedTime:"",fare:"",stops:[{stopName:"",location:"",pickupTime:"",dropTime:"",landmark:""}]})},Re=()=>{F({name:"",licenseNumber:"",phone:"",email:"",experience:"",joiningDate:new Date().toISOString().split("T")[0]})},ke=()=>{L({studentId:"",routeId:"",stopId:"",monthlyFee:""})},z=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";case"on_leave":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},Le=()=>{v({...n,stops:[...n.stops,{stopName:"",location:"",pickupTime:"",dropTime:"",landmark:""}]})},Oe=s=>{const u=n.stops.filter((j,T)=>T!==s);v({...n,stops:u})},V=(s,u,j)=>{const T=[...n.stops];T[s]={...T[s],[u]:j},v({...n,stops:T})},H=he.filter(s=>(s.busNumber.toLowerCase().includes($.toLowerCase())||s.driverName.toLowerCase().includes($.toLowerCase()))&&(ee===""||s.status===ee)&&(se===""||s.routeId===se)),Pe=Math.ceil(H.length/k),Me=H.slice((y-1)*k,y*k);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Transport Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage school buses, routes, and student transportation"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(t,{variant:"outline",onClick:A,children:[e.jsx(Ue,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(J,{open:Se,onOpenChange:X,children:[e.jsx(U,{asChild:!0,children:e.jsxs(t,{variant:"outline",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Assign Student"]})}),e.jsxs(G,{children:[e.jsxs(_,{children:[e.jsx(q,{children:"Assign Student to Transport"}),e.jsx(K,{children:"Assign a student to a bus route"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"assignStudent",children:"Student"}),e.jsxs(S,{value:g.studentId,onValueChange:s=>L({...g,studentId:s}),children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Select student"})}),e.jsxs(D,{children:[e.jsx(o,{value:"student1",children:"John Doe - Class 5A"}),e.jsx(o,{value:"student2",children:"Jane Smith - Class 6B"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"assignRoute",children:"Route"}),e.jsxs(S,{value:g.routeId,onValueChange:s=>L({...g,routeId:s}),children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Select route"})}),e.jsx(D,{children:M.map(s=>e.jsxs(o,{value:s.id,children:[s.routeName," - ",s.routeCode]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"assignStop",children:"Bus Stop"}),e.jsxs(S,{value:g.stopId,onValueChange:s=>L({...g,stopId:s}),children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Select bus stop"})}),e.jsxs(D,{children:[e.jsx(o,{value:"stop1",children:"Main Gate"}),e.jsx(o,{value:"stop2",children:"Park Avenue"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"monthlyFee",children:"Monthly Fee"}),e.jsx(l,{id:"monthlyFee",type:"number",value:g.monthlyFee,onChange:s=>L({...g,monthlyFee:s.target.value}),placeholder:"Enter monthly transport fee"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),e.jsx(t,{onClick:Ee,children:"Assign Student"})]})]})]}),e.jsxs(J,{open:be,onOpenChange:Q,children:[e.jsx(U,{asChild:!0,children:e.jsxs(t,{variant:"outline",children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Add Driver"]})}),e.jsxs(G,{children:[e.jsxs(_,{children:[e.jsx(q,{children:"Add New Driver"}),e.jsx(K,{children:"Add a new bus driver to the system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"driverName",children:"Full Name"}),e.jsx(l,{id:"driverName",value:h.name,onChange:s=>F({...h,name:s.target.value}),placeholder:"Enter driver's full name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"licenseNumber",children:"License Number"}),e.jsx(l,{id:"licenseNumber",value:h.licenseNumber,onChange:s=>F({...h,licenseNumber:s.target.value}),placeholder:"Enter license number"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"driverPhone",children:"Phone"}),e.jsx(l,{id:"driverPhone",value:h.phone,onChange:s=>F({...h,phone:s.target.value}),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"driverEmail",children:"Email (Optional)"}),e.jsx(l,{id:"driverEmail",type:"email",value:h.email,onChange:s=>F({...h,email:s.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"experience",children:"Experience (years)"}),e.jsx(l,{id:"experience",type:"number",value:h.experience,onChange:s=>F({...h,experience:s.target.value}),placeholder:"Years of experience"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"joiningDate",children:"Joining Date"}),e.jsx(l,{id:"joiningDate",type:"date",value:h.joiningDate,onChange:s=>F({...h,joiningDate:s.target.value})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),e.jsx(t,{onClick:Ae,children:"Add Driver"})]})]})]}),e.jsxs(J,{open:ye,onOpenChange:Z,children:[e.jsx(U,{asChild:!0,children:e.jsxs(t,{variant:"outline",children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Add Route"]})}),e.jsxs(G,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_,{children:[e.jsx(q,{children:"Create New Route"}),e.jsx(K,{children:"Define a new bus route with stops and timings"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"routeName",children:"Route Name"}),e.jsx(l,{id:"routeName",value:n.routeName,onChange:s=>v({...n,routeName:s.target.value}),placeholder:"Enter route name"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"routeCode",children:"Route Code"}),e.jsx(l,{id:"routeCode",value:n.routeCode,onChange:s=>v({...n,routeCode:s.target.value}),placeholder:"e.g., R001"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"startLocation",children:"Start Location"}),e.jsx(l,{id:"startLocation",value:n.startLocation,onChange:s=>v({...n,startLocation:s.target.value}),placeholder:"Enter starting point"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"endLocation",children:"End Location"}),e.jsx(l,{id:"endLocation",value:n.endLocation,onChange:s=>v({...n,endLocation:s.target.value}),placeholder:"Enter destination"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"totalDistance",children:"Total Distance (km)"}),e.jsx(l,{id:"totalDistance",type:"number",value:n.totalDistance,onChange:s=>v({...n,totalDistance:s.target.value}),placeholder:"Enter distance"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"estimatedTime",children:"Estimated Time (minutes)"}),e.jsx(l,{id:"estimatedTime",type:"number",value:n.estimatedTime,onChange:s=>v({...n,estimatedTime:s.target.value}),placeholder:"Enter time"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"routeFare",children:"Monthly Fare"}),e.jsx(l,{id:"routeFare",type:"number",value:n.fare,onChange:s=>v({...n,fare:s.target.value}),placeholder:"Enter fare"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx(a,{children:"Bus Stops"}),e.jsxs(t,{type:"button",variant:"outline",size:"sm",onClick:Le,children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Add Stop"]})]}),e.jsx("div",{className:"space-y-3",children:n.stops.map((s,u)=>e.jsxs("div",{className:"grid grid-cols-5 gap-3 items-end p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Stop Name"}),e.jsx(l,{value:s.stopName,onChange:j=>V(u,"stopName",j.target.value),placeholder:"Stop name"})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Location"}),e.jsx(l,{value:s.location,onChange:j=>V(u,"location",j.target.value),placeholder:"Address"})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Pickup Time"}),e.jsx(l,{type:"time",value:s.pickupTime,onChange:j=>V(u,"pickupTime",j.target.value)})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Drop Time"}),e.jsx(l,{type:"time",value:s.dropTime,onChange:j=>V(u,"dropTime",j.target.value)})]}),e.jsx("div",{children:e.jsx(t,{type:"button",variant:"outline",size:"sm",onClick:()=>Oe(u),disabled:n.stops.length===1,children:e.jsx(qe,{className:"h-4 w-4"})})})]},u))})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsx(t,{onClick:Te,children:"Create Route"})]})]})]}),e.jsxs(J,{open:fe,onOpenChange:Y,children:[e.jsx(U,{asChild:!0,children:e.jsxs(t,{children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Add Bus"]})}),e.jsxs(G,{children:[e.jsxs(_,{children:[e.jsx(q,{children:"Add New Bus"}),e.jsx(K,{children:"Register a new bus in the fleet"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"busNumber",children:"Bus Number"}),e.jsx(l,{id:"busNumber",value:d.busNumber,onChange:s=>b({...d,busNumber:s.target.value}),placeholder:"Enter bus number"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"capacity",children:"Capacity"}),e.jsx(l,{id:"capacity",type:"number",value:d.capacity,onChange:s=>b({...d,capacity:s.target.value}),placeholder:"Enter seating capacity"})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"busDriver",children:"Driver"}),e.jsxs(S,{value:d.driverId,onValueChange:s=>b({...d,driverId:s}),children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Select driver"})}),e.jsx(D,{children:ie.filter(s=>s.status==="active").map(s=>e.jsxs(o,{value:s.id,children:[s.name," - ",s.licenseNumber]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"busAttendant",children:"Attendant (Optional)"}),e.jsxs(S,{value:d.attendantId,onValueChange:s=>b({...d,attendantId:s}),children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Select attendant"})}),e.jsxs(D,{children:[e.jsx(o,{value:"attendant1",children:"Mary Johnson"}),e.jsx(o,{value:"attendant2",children:"Sarah Wilson"})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"busRoute",children:"Assigned Route"}),e.jsxs(S,{value:d.routeId,onValueChange:s=>b({...d,routeId:s}),children:[e.jsx(C,{children:e.jsx(w,{placeholder:"Select route"})}),e.jsx(D,{children:M.map(s=>e.jsxs(o,{value:s.id,children:[s.routeName," - ",s.routeCode]},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"fuelEfficiency",children:"Fuel Efficiency (km/l)"}),e.jsx(l,{id:"fuelEfficiency",type:"number",step:"0.1",value:d.fuelEfficiency,onChange:s=>b({...d,fuelEfficiency:s.target.value}),placeholder:"Enter fuel efficiency"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Je,{id:"gpsEnabled",checked:d.gpsEnabled,onCheckedChange:s=>b({...d,gpsEnabled:!!s})}),e.jsx(a,{htmlFor:"gpsEnabled",children:"GPS Tracking Enabled"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(t,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),e.jsx(t,{onClick:Fe,children:"Add Bus"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(m,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Buses"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalBuses}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.activeBuses," active"]})]}),e.jsx(Ke,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(m,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students Using Transport"}),e.jsx("p",{className:"text-2xl font-bold",children:x.totalStudents})]}),e.jsx(ce,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(m,{children:e.jsxs(p,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Occupancy"}),e.jsxs("p",{className:"text-2xl font-bold",children:[x.averageOccupancy,"%"]})]}),e.jsx(We,{className:"h-8 w-8 text-purple-600"})]}),e.jsx(le,{value:x.averageOccupancy,className:"mt-2"})]})}),e.jsx(m,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maintenance Due"}),e.jsx("p",{className:"text-2xl font-bold",children:x.maintenanceDue})]}),e.jsx(Ye,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(Ve,{defaultValue:"buses",className:"w-full",children:[e.jsxs(He,{children:[e.jsx(O,{value:"buses",children:"Bus Fleet"}),e.jsx(O,{value:"routes",children:"Routes"}),e.jsx(O,{value:"drivers",children:"Drivers"}),e.jsx(O,{value:"students",children:"Student Transport"}),e.jsx(O,{value:"analytics",children:"Analytics"})]}),e.jsxs(P,{value:"buses",className:"space-y-4",children:[e.jsx(m,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(l,{placeholder:"Search buses...",value:$,onChange:s=>Ce(s.target.value),className:"pl-10"})]})}),e.jsxs(S,{value:ee,onValueChange:we,children:[e.jsxs(C,{className:"w-48",children:[e.jsx(Qe,{className:"mr-2 h-4 w-4"}),e.jsx(w,{placeholder:"Filter by status"})]}),e.jsxs(D,{children:[e.jsx(o,{value:"all",children:"All Status"}),e.jsx(o,{value:"active",children:"Active"}),e.jsx(o,{value:"maintenance",children:"Maintenance"}),e.jsx(o,{value:"inactive",children:"Inactive"})]})]}),e.jsxs(S,{value:se,onValueChange:De,children:[e.jsx(C,{className:"w-48",children:e.jsx(w,{placeholder:"Filter by route"})}),e.jsxs(D,{children:[e.jsx(o,{value:"all",children:"All Routes"}),M.map(s=>e.jsx(o,{value:s.id,children:s.routeName},s.id))]})]}),e.jsxs(t,{variant:"outline",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Export"]})]})})}),e.jsxs(m,{children:[e.jsx(E,{children:e.jsx(B,{children:"Bus Fleet Management"})}),e.jsxs(p,{children:[ge?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(R,{children:[e.jsx(i,{children:"Bus Number"}),e.jsx(i,{children:"Route"}),e.jsx(i,{children:"Driver"}),e.jsx(i,{children:"Capacity"}),e.jsx(i,{children:"Occupancy"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Next Service"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ne,{children:Me.map(s=>e.jsxs(R,{children:[e.jsx(r,{className:"font-bold",children:s.busNumber}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.routeName}),s.gpsEnabled&&e.jsx(I,{variant:"outline",className:"text-xs",children:"GPS Enabled"})]})}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.driverName}),s.attendantName&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Attendant: ",s.attendantName]})]})}),e.jsx(r,{children:s.capacity}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[s.currentStudents,"/",s.capacity]}),e.jsx(le,{value:s.currentStudents/s.capacity*100,className:"w-16 h-2"})]})}),e.jsx(r,{children:e.jsx(I,{className:z(s.status),children:s.status})}),e.jsx(r,{children:e.jsx("div",{className:"text-sm",children:new Date(s.nextService).toLocaleDateString()})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx($e,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(W,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(y-1)*k+1," to"," ",Math.min(y*k,H.length)," of"," ",H.length," buses"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{variant:"outline",size:"sm",onClick:()=>re(y-1),disabled:y===1,children:"Previous"}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>re(y+1),disabled:y===Pe,children:"Next"})]})]})]})]})]}),e.jsx(P,{value:"routes",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(E,{children:e.jsx(B,{children:"Bus Routes"})}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(s=>e.jsx(m,{children:e.jsxs(p,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.routeName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.routeCode})]}),e.jsx(I,{className:z(s.status),children:s.status})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Distance:"}),e.jsxs("span",{children:[s.totalDistance," km"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Duration:"}),e.jsxs("span",{children:[s.estimatedTime," min"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stops:"}),e.jsx("span",{children:s.stops.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monthly Fare:"}),e.jsxs("span",{className:"font-medium",children:["₹",s.fare]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(t,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(es,{className:"mr-2 h-4 w-4"}),"View Map"]}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(W,{className:"h-4 w-4"})})]})]})},s.id))})})]})}),e.jsx(P,{value:"drivers",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(E,{children:e.jsx(B,{children:"Drivers"})}),e.jsx(p,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(R,{children:[e.jsx(i,{children:"Name"}),e.jsx(i,{children:"License Number"}),e.jsx(i,{children:"Phone"}),e.jsx(i,{children:"Experience"}),e.jsx(i,{children:"Bus Assigned"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ne,{children:ie.map(s=>e.jsxs(R,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{className:"font-mono",children:s.licenseNumber}),e.jsx(r,{children:s.phone}),e.jsxs(r,{children:[s.experience," years"]}),e.jsx(r,{children:s.busAssigned?e.jsx(I,{variant:"outline",children:s.busAssigned}):e.jsx("span",{className:"text-muted-foreground",children:"Not assigned"})}),e.jsx(r,{children:e.jsx(I,{className:z(s.status),children:s.status.replace("_"," ")})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(W,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(P,{value:"students",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(E,{children:e.jsx(B,{children:"Student Transport Assignments"})}),e.jsx(p,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ae,{children:[e.jsx(te,{children:e.jsxs(R,{children:[e.jsx(i,{children:"Student"}),e.jsx(i,{children:"Route"}),e.jsx(i,{children:"Bus Stop"}),e.jsx(i,{children:"Pickup Time"}),e.jsx(i,{children:"Monthly Fee"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(ne,{children:me.slice(0,10).map(s=>e.jsxs(R,{children:[e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.studentName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.studentClass})]})}),e.jsx(r,{children:s.routeName}),e.jsx(r,{children:s.stopName}),e.jsx(r,{children:s.pickupTime}),e.jsxs(r,{children:["₹",s.monthlyFee]}),e.jsx(r,{children:e.jsx(I,{className:z(s.status),children:s.status})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(ss,{className:"h-4 w-4"})}),e.jsx(t,{size:"sm",variant:"outline",children:e.jsx(W,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(P,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(E,{children:e.jsx(B,{children:"Fleet Performance"})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Distance Covered"}),e.jsxs("span",{className:"font-bold",children:[x.totalDistance.toLocaleString()," km"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Fuel Consumption"}),e.jsxs("span",{className:"font-bold",children:[x.fuelConsumption.toLocaleString()," L"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Average Occupancy"}),e.jsxs("span",{className:"font-bold",children:[x.averageOccupancy,"%"]})]}),e.jsx(le,{value:x.averageOccupancy,className:"w-full"})]})})]}),e.jsxs(m,{children:[e.jsx(E,{children:e.jsx(B,{children:"Maintenance Status"})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:x.activeBuses}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active Buses"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600",children:x.maintenanceDue}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Maintenance Due"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:x.totalRoutes}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active Routes"})]})]})})]})]})})]})]})}export{js as TransportManagement};
