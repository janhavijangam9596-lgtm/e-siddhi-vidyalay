import{r as n,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as F,B as i,L as d,S as p,e as v,f as y,g,h as t,I as b,C as m,c as j,T as Oe,i as Re,j as E,k as V,a as P,b as L,l as Z,t as w}from"./index-CbaydhWW.js";import{T as G,a as $,b as A,c as l,d as ee,e as r}from"./table-SvwjoT6S.js";import{D as z,a as ue,b as B,c as _,d as Y,e as se}from"./dialog-GASJ86Ds.js";import{T as te}from"./textarea-Drs0EPqH.js";import{P as qe}from"./progress-BxpaIchm.js";import{C as ae}from"./checkbox-DjQKjGtE.js";import{R as Ee,Z as xe,D as Ve,q as ze,V as Be,O as _e,s as Ye,a4 as He,ac as me,a0 as Je,K as Ue,i as Ke,a7 as Qe,a6 as We}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function hs(){const[je,ne]=n.useState([]),[pe,le]=n.useState([]),[ve,re]=n.useState([]),[u,ie]=n.useState({totalDue:0,totalCollected:0,totalPending:0,totalOverdue:0,collectionRate:0,monthlyCollection:0,overdueStudents:0,partialPayments:0}),[ye,ge]=n.useState(!0),[fe,H]=n.useState(!1),[Ne,J]=n.useState(!1),[Ce,O]=n.useState(!1),[Se,ce]=n.useState(!1),[a,de]=n.useState(null),[Xe,Ze]=n.useState(null),[R,Fe]=n.useState(""),[U,be]=n.useState(""),[K,De]=n.useState(""),[Q,Te]=n.useState(""),[Ge,$e]=n.useState(""),[f,oe]=n.useState(1),[k]=n.useState(10),[D,I]=n.useState([]),[h,T]=n.useState({studentId:"",feeType:"",amount:"",dueDate:"",description:"",academicYear:"2024-25"}),[o,N]=n.useState({class:"",feeType:"",amount:"",frequency:"monthly",description:"",mandatory:!0,dueDay:15}),[c,C]=n.useState({amount:"",paymentMethod:"cash",transactionId:"",discount:"",remarks:""});n.useEffect(()=>{M()},[]);const M=async()=>{try{const[s,x,S,X]=await Promise.all([F.getFees(),F.getFeeStructures(),F.getFeeCollections(),F.getFeeStats()]);ne(s),le(x),re(S),ie(X)}catch{const x=[{id:"1",studentId:"STU001",studentName:"John Doe",studentClass:"10th",rollNumber:"101",feeType:"Tuition Fee",amount:15e3,dueDate:"2024-01-15",paidDate:"2024-01-10",status:"paid",description:"Monthly tuition fee",academicYear:"2024-25",paymentMethod:"online",transactionId:"TXN123456",paidAmount:15e3,receiptNumber:"REC001",created_at:"2024-01-01"},{id:"2",studentId:"STU002",studentName:"Jane Smith",studentClass:"10th",rollNumber:"102",feeType:"Tuition Fee",amount:15e3,dueDate:"2024-01-15",status:"overdue",description:"Monthly tuition fee",academicYear:"2024-25",remainingAmount:15e3,created_at:"2024-01-01"},{id:"3",studentId:"STU003",studentName:"Mike Johnson",studentClass:"9th",rollNumber:"201",feeType:"Lab Fee",amount:5e3,dueDate:"2024-02-01",status:"pending",description:"Science lab fee",academicYear:"2024-25",remainingAmount:5e3,created_at:"2024-01-15"},{id:"4",studentId:"STU001",studentName:"John Doe",studentClass:"10th",rollNumber:"101",feeType:"Transport Fee",amount:3e3,dueDate:"2024-01-20",status:"partial",description:"Monthly transport fee",academicYear:"2024-25",paidAmount:1500,remainingAmount:1500,created_at:"2024-01-01"}],S=[{id:"1",class:"10th",feeType:"Tuition Fee",amount:15e3,frequency:"monthly",description:"Regular tuition fee",mandatory:!0,dueDay:15,created_at:"2024-01-01"},{id:"2",class:"10th",feeType:"Lab Fee",amount:5e3,frequency:"quarterly",description:"Science and computer lab fee",mandatory:!0,dueDay:1,created_at:"2024-01-01"},{id:"3",class:"All",feeType:"Transport Fee",amount:3e3,frequency:"monthly",description:"School bus service",mandatory:!1,dueDay:20,created_at:"2024-01-01"}],X={totalDue:38e3,totalCollected:16500,totalPending:21500,totalOverdue:15e3,collectionRate:43.4,monthlyCollection:16500,overdueStudents:1,partialPayments:1};ne(x),le(S),re([]),ie(X)}finally{ge(!1)}},we=async()=>{try{await F.createFee({...h,amount:parseFloat(h.amount),status:"pending"}),w.success("Fee created successfully"),H(!1),Ie(),M()}catch(s){w.error("Failed to create fee"),console.error(s)}},Ae=async()=>{try{await F.createFeeStructure({...o,amount:parseFloat(o.amount)}),w.success("Fee structure created successfully"),J(!1),Me(),M()}catch(s){w.error("Failed to create fee structure"),console.error(s)}},ke=async()=>{if(a)try{const s=parseFloat(c.amount),x=parseFloat(c.discount)||0,S=s-x;await F.collectFee(a.id,{amount:S,paymentMethod:c.paymentMethod,transactionId:c.transactionId,discount:x,remarks:c.remarks}),w.success("Payment collected successfully"),O(!1),Pe(),M()}catch(s){w.error("Failed to collect payment"),console.error(s)}},Ie=()=>{T({studentId:"",feeType:"",amount:"",dueDate:"",description:"",academicYear:"2024-25"})},Me=()=>{N({class:"",feeType:"",amount:"",frequency:"monthly",description:"",mandatory:!0,dueDay:15})},Pe=()=>{C({amount:"",paymentMethod:"cash",transactionId:"",discount:"",remarks:""})},he=s=>{switch(s){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";case"partial":return"bg-blue-100 text-blue-800";case"waived":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},q=je.filter(s=>(s.studentName.toLowerCase().includes(R.toLowerCase())||s.rollNumber.toLowerCase().includes(R.toLowerCase())||s.receiptNumber?.toLowerCase().includes(R.toLowerCase()))&&(U===""||s.status===U)&&(K===""||s.studentClass===K)&&(Q===""||s.feeType===Q)),Le=Math.ceil(q.length/k),W=q.slice((f-1)*k,f*k);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Fees Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage student fees, collections, and payment tracking"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",onClick:M,children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(z,{open:Ne,onOpenChange:J,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(i,{variant:"outline",children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Fee Structure"]})}),e.jsxs(B,{children:[e.jsxs(_,{children:[e.jsx(Y,{children:"Create Fee Structure"}),e.jsx(se,{children:"Define fee structure for a class or category"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"structureClass",children:"Class"}),e.jsxs(p,{value:o.class,onValueChange:s=>N({...o,class:s}),children:[e.jsx(v,{children:e.jsx(y,{placeholder:"Select class"})}),e.jsxs(g,{children:[e.jsx(t,{value:"nursery",children:"Nursery"}),e.jsx(t,{value:"kindergarten",children:"Kindergarten"}),e.jsx(t,{value:"1",children:"Class 1"}),e.jsx(t,{value:"2",children:"Class 2"}),e.jsx(t,{value:"3",children:"Class 3"}),e.jsx(t,{value:"4",children:"Class 4"}),e.jsx(t,{value:"5",children:"Class 5"}),e.jsx(t,{value:"6",children:"Class 6"}),e.jsx(t,{value:"7",children:"Class 7"}),e.jsx(t,{value:"8",children:"Class 8"}),e.jsx(t,{value:"9",children:"Class 9"}),e.jsx(t,{value:"10",children:"Class 10"}),e.jsx(t,{value:"11",children:"Class 11"}),e.jsx(t,{value:"12",children:"Class 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"structureFeeType",children:"Fee Type"}),e.jsxs(p,{value:o.feeType,onValueChange:s=>N({...o,feeType:s}),children:[e.jsx(v,{children:e.jsx(y,{placeholder:"Select fee type"})}),e.jsxs(g,{children:[e.jsx(t,{value:"tuition",children:"Tuition Fee"}),e.jsx(t,{value:"admission",children:"Admission Fee"}),e.jsx(t,{value:"examination",children:"Examination Fee"}),e.jsx(t,{value:"library",children:"Library Fee"}),e.jsx(t,{value:"sports",children:"Sports Fee"}),e.jsx(t,{value:"transport",children:"Transport Fee"}),e.jsx(t,{value:"hostel",children:"Hostel Fee"}),e.jsx(t,{value:"activity",children:"Activity Fee"}),e.jsx(t,{value:"miscellaneous",children:"Miscellaneous"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"structureAmount",children:"Amount"}),e.jsx(b,{id:"structureAmount",type:"number",value:o.amount,onChange:s=>N({...o,amount:s.target.value}),placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"structureFrequency",children:"Frequency"}),e.jsxs(p,{value:o.frequency,onValueChange:s=>N({...o,frequency:s}),children:[e.jsx(v,{children:e.jsx(y,{placeholder:"Select frequency"})}),e.jsxs(g,{children:[e.jsx(t,{value:"monthly",children:"Monthly"}),e.jsx(t,{value:"quarterly",children:"Quarterly"}),e.jsx(t,{value:"yearly",children:"Yearly"}),e.jsx(t,{value:"one_time",children:"One Time"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"structureDescription",children:"Description"}),e.jsx(te,{id:"structureDescription",value:o.description,onChange:s=>N({...o,description:s.target.value}),placeholder:"Enter description"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{id:"mandatory",checked:o.mandatory,onCheckedChange:s=>N({...o,mandatory:!!s})}),e.jsx(d,{htmlFor:"mandatory",children:"Mandatory Fee"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(i,{onClick:Ae,children:"Create Structure"})]})]})]}),e.jsxs(z,{open:fe,onOpenChange:H,children:[e.jsx(ue,{asChild:!0,children:e.jsxs(i,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Add Fee"]})}),e.jsxs(B,{children:[e.jsxs(_,{children:[e.jsx(Y,{children:"Add Individual Fee"}),e.jsx(se,{children:"Add a fee for a specific student"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"studentId",children:"Student"}),e.jsxs(p,{value:h.studentId,onValueChange:s=>T({...h,studentId:s}),children:[e.jsx(v,{children:e.jsx(y,{placeholder:"Select student"})}),e.jsxs(g,{children:[e.jsx(t,{value:"student1",children:"John Doe - Class 5A"}),e.jsx(t,{value:"student2",children:"Jane Smith - Class 6B"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"feeType",children:"Fee Type"}),e.jsxs(p,{value:h.feeType,onValueChange:s=>T({...h,feeType:s}),children:[e.jsx(v,{children:e.jsx(y,{placeholder:"Select fee type"})}),e.jsxs(g,{children:[e.jsx(t,{value:"tuition",children:"Tuition Fee"}),e.jsx(t,{value:"examination",children:"Examination Fee"}),e.jsx(t,{value:"library",children:"Library Fee"}),e.jsx(t,{value:"sports",children:"Sports Fee"}),e.jsx(t,{value:"transport",children:"Transport Fee"}),e.jsx(t,{value:"miscellaneous",children:"Miscellaneous"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"amount",children:"Amount"}),e.jsx(b,{id:"amount",type:"number",value:h.amount,onChange:s=>T({...h,amount:s.target.value}),placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"dueDate",children:"Due Date"}),e.jsx(b,{id:"dueDate",type:"date",value:h.dueDate,onChange:s=>T({...h,dueDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(te,{id:"description",value:h.description,onChange:s=>T({...h,description:s.target.value}),placeholder:"Enter description"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),e.jsx(i,{onClick:we,children:"Add Fee"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(m,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Due"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",u.totalDue.toLocaleString()]})]}),e.jsx(Ve,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(m,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Collected"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",u.totalCollected.toLocaleString()]})]}),e.jsx(ze,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(m,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Collection Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[u.collectionRate,"%"]})]}),e.jsx(Be,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(m,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Overdue Students"}),e.jsx("p",{className:"text-2xl font-bold",children:u.overdueStudents})]}),e.jsx(_e,{className:"h-8 w-8 text-orange-600"})]})})})]}),e.jsxs(Oe,{defaultValue:"fees",className:"w-full",children:[e.jsxs(Re,{children:[e.jsx(E,{value:"fees",children:"Fee Management"}),e.jsx(E,{value:"structures",children:"Fee Structures"}),e.jsx(E,{value:"collections",children:"Payment History"}),e.jsx(E,{value:"reports",children:"Reports"})]}),e.jsxs(V,{value:"fees",className:"space-y-4",children:[e.jsx(m,{children:e.jsxs(j,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(b,{placeholder:"Search fees...",value:R,onChange:s=>Fe(s.target.value),className:"pl-10"})]})}),e.jsxs(p,{value:U,onValueChange:be,children:[e.jsxs(v,{className:"w-48",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),e.jsx(y,{placeholder:"Filter by status"})]}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"All Statuses"}),e.jsx(t,{value:"pending",children:"Pending"}),e.jsx(t,{value:"paid",children:"Paid"}),e.jsx(t,{value:"overdue",children:"Overdue"}),e.jsx(t,{value:"partial",children:"Partial"}),e.jsx(t,{value:"waived",children:"Waived"})]})]}),e.jsxs(p,{value:K,onValueChange:De,children:[e.jsx(v,{className:"w-48",children:e.jsx(y,{placeholder:"Filter by class"})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"All Classes"}),e.jsx(t,{value:"nursery",children:"Nursery"}),e.jsx(t,{value:"kindergarten",children:"Kindergarten"}),e.jsx(t,{value:"1",children:"Class 1"}),e.jsx(t,{value:"2",children:"Class 2"}),e.jsx(t,{value:"3",children:"Class 3"}),e.jsx(t,{value:"4",children:"Class 4"}),e.jsx(t,{value:"5",children:"Class 5"})]})]}),e.jsxs(p,{value:Q,onValueChange:Te,children:[e.jsx(v,{className:"w-48",children:e.jsx(y,{placeholder:"Filter by fee type"})}),e.jsxs(g,{children:[e.jsx(t,{value:"all",children:"All Fee Types"}),e.jsx(t,{value:"tuition",children:"Tuition"}),e.jsx(t,{value:"examination",children:"Examination"}),e.jsx(t,{value:"library",children:"Library"}),e.jsx(t,{value:"sports",children:"Sports"}),e.jsx(t,{value:"transport",children:"Transport"})]})]})]}),D.length>0&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-blue-50 rounded-lg mt-4",children:[e.jsxs("span",{className:"text-sm",children:[D.length," fees selected"]}),e.jsxs(i,{size:"sm",variant:"outline",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Send Reminders"]}),e.jsxs(i,{size:"sm",variant:"outline",children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Export Selected"]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>I([]),children:"Clear Selection"})]})]})}),e.jsxs(m,{children:[e.jsx(P,{children:e.jsx(L,{children:"Student Fees"})}),e.jsxs(j,{children:[ye?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(G,{children:[e.jsx($,{children:e.jsxs(A,{children:[e.jsx(l,{className:"w-12",children:e.jsx(ae,{checked:D.length===W.length,onCheckedChange:s=>{I(s?W.map(x=>x.id):[])}})}),e.jsx(l,{children:"Student"}),e.jsx(l,{children:"Fee Type"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Due Date"}),e.jsx(l,{children:"Status"}),e.jsx(l,{children:"Payment Method"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(ee,{children:W.map(s=>e.jsxs(A,{children:[e.jsx(r,{children:e.jsx(ae,{checked:D.includes(s.id),onCheckedChange:x=>{I(x?[...D,s.id]:D.filter(S=>S!==s.id))}})}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.studentName}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.studentClass," - ",s.rollNumber]})]})}),e.jsx(r,{children:s.feeType}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["₹",s.amount.toLocaleString()]}),s.discount&&s.discount>0&&e.jsxs("div",{className:"text-sm text-green-600",children:["Discount: ₹",s.discount]})]})}),e.jsx(r,{children:e.jsxs("div",{children:[e.jsx("div",{children:new Date(s.dueDate).toLocaleDateString()}),s.status==="overdue"&&e.jsxs("div",{className:"text-sm text-red-600",children:[Math.ceil((Date.now()-new Date(s.dueDate).getTime())/(1e3*60*60*24))," days overdue"]})]})}),e.jsx(r,{children:e.jsx(Z,{className:he(s.status),children:s.status})}),e.jsx(r,{children:s.paymentMethod&&e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:s.paymentMethod}),s.transactionId&&e.jsx("div",{className:"text-muted-foreground",children:s.transactionId})]})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{de(s),ce(!0)},children:e.jsx(Ue,{className:"h-4 w-4"})}),s.status!=="paid"&&e.jsx(i,{size:"sm",onClick:()=>{de(s),C({...c,amount:(s.remainingAmount||s.amount).toString()}),O(!0)},children:e.jsx(Ke,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(f-1)*k+1," to"," ",Math.min(f*k,q.length)," of"," ",q.length," fees"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>oe(f-1),disabled:f===1,children:"Previous"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>oe(f+1),disabled:f===Le,children:"Next"})]})]})]})]})]}),e.jsx(V,{value:"structures",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(P,{children:e.jsx(L,{children:"Fee Structures"})}),e.jsx(j,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(G,{children:[e.jsx($,{children:e.jsxs(A,{children:[e.jsx(l,{children:"Class"}),e.jsx(l,{children:"Fee Type"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Frequency"}),e.jsx(l,{children:"Mandatory"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(ee,{children:pe.map(s=>e.jsxs(A,{children:[e.jsx(r,{children:s.class}),e.jsx(r,{children:s.feeType}),e.jsxs(r,{children:["₹",s.amount.toLocaleString()]}),e.jsx(r,{children:s.frequency}),e.jsx(r,{children:e.jsx(Z,{variant:s.mandatory?"default":"secondary",children:s.mandatory?"Yes":"No"})}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(Qe,{className:"h-4 w-4"})}),e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(We,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(V,{value:"collections",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(P,{children:e.jsx(L,{children:"Payment History"})}),e.jsx(j,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(G,{children:[e.jsx($,{children:e.jsxs(A,{children:[e.jsx(l,{children:"Receipt #"}),e.jsx(l,{children:"Student"}),e.jsx(l,{children:"Amount"}),e.jsx(l,{children:"Payment Method"}),e.jsx(l,{children:"Collection Date"}),e.jsx(l,{children:"Collected By"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(ee,{children:ve.map(s=>e.jsxs(A,{children:[e.jsx(r,{className:"font-mono",children:s.receiptNumber}),e.jsx(r,{children:s.studentId}),e.jsxs(r,{children:["₹",s.collectedAmount.toLocaleString()]}),e.jsx(r,{children:s.paymentMethod}),e.jsx(r,{children:new Date(s.collectionDate).toLocaleDateString()}),e.jsx(r,{children:s.collectedBy}),e.jsx(r,{children:e.jsx(i,{size:"sm",variant:"outline",children:e.jsx(me,{className:"h-4 w-4"})})})]},s.id))})]})})})]})}),e.jsx(V,{value:"reports",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(P,{children:e.jsx(L,{children:"Collection Summary"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Monthly Target"}),e.jsx("span",{className:"font-bold",children:"₹50,00,000"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Collected This Month"}),e.jsxs("span",{className:"font-bold text-green-600",children:["₹",u.monthlyCollection.toLocaleString()]})]}),e.jsx(qe,{value:u.monthlyCollection/5e6*100,className:"w-full"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(u.monthlyCollection/5e6*100),"% of monthly target achieved"]})]})})]}),e.jsxs(m,{children:[e.jsx(P,{children:e.jsx(L,{children:"Outstanding Fees"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Total Outstanding"}),e.jsxs("span",{className:"font-bold text-red-600",children:["₹",u.totalPending.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Overdue Amount"}),e.jsxs("span",{className:"font-bold text-orange-600",children:["₹",u.totalOverdue.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Students with Dues"}),e.jsx("span",{className:"font-bold",children:u.overdueStudents})]})]})})]})]})})]}),e.jsx(z,{open:Ce,onOpenChange:O,children:e.jsxs(B,{children:[e.jsxs(_,{children:[e.jsx(Y,{children:"Collect Payment"}),e.jsxs(se,{children:["Record payment for ",a?.studentName," - ",a?.feeType]})]}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Due Amount:"}),e.jsxs("span",{className:"font-bold",children:["₹",(a.remainingAmount||a.amount).toLocaleString()]})]})}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"paymentAmount",children:"Payment Amount"}),e.jsx(b,{id:"paymentAmount",type:"number",value:c.amount,onChange:s=>C({...c,amount:s.target.value}),placeholder:"Enter payment amount"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(p,{value:c.paymentMethod,onValueChange:s=>C({...c,paymentMethod:s}),children:[e.jsx(v,{children:e.jsx(y,{placeholder:"Select payment method"})}),e.jsxs(g,{children:[e.jsx(t,{value:"cash",children:"Cash"}),e.jsx(t,{value:"card",children:"Card"}),e.jsx(t,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(t,{value:"online",children:"Online Payment"}),e.jsx(t,{value:"cheque",children:"Cheque"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"transactionId",children:"Transaction ID (Optional)"}),e.jsx(b,{id:"transactionId",value:c.transactionId,onChange:s=>C({...c,transactionId:s.target.value}),placeholder:"Enter transaction ID"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"discount",children:"Discount (Optional)"}),e.jsx(b,{id:"discount",type:"number",value:c.discount,onChange:s=>C({...c,discount:s.target.value}),placeholder:"Enter discount amount"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"paymentRemarks",children:"Remarks"}),e.jsx(te,{id:"paymentRemarks",value:c.remarks,onChange:s=>C({...c,remarks:s.target.value}),placeholder:"Enter any remarks"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(i,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(i,{onClick:ke,children:"Collect Payment"})]})]})}),e.jsx(z,{open:Se,onOpenChange:ce,children:e.jsxs(B,{className:"max-w-2xl",children:[e.jsx(_,{children:e.jsx(Y,{children:"Fee Details"})}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Student Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Name: ",a.studentName]}),e.jsxs("div",{children:["Class: ",a.studentClass]}),e.jsxs("div",{children:["Roll Number: ",a.rollNumber]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Fee Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Type: ",a.feeType]}),e.jsxs("div",{children:["Amount: ₹",a.amount.toLocaleString()]}),e.jsxs("div",{children:["Due Date: ",new Date(a.dueDate).toLocaleDateString()]}),e.jsxs("div",{children:["Status: ",e.jsx(Z,{className:he(a.status),children:a.status})]})]})]})]}),a.paidDate&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Payment Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Paid Date: ",new Date(a.paidDate).toLocaleDateString()]}),e.jsxs("div",{children:["Payment Method: ",a.paymentMethod]}),a.transactionId&&e.jsxs("div",{children:["Transaction ID: ",a.transactionId]}),a.receiptNumber&&e.jsxs("div",{children:["Receipt Number: ",a.receiptNumber]})]})]}),a.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Description"}),e.jsx("p",{className:"text-sm",children:a.description})]})]})]})})]})}export{hs as FeesManagement};
