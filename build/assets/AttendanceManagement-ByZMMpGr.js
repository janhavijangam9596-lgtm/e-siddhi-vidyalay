import{r as d,j as e}from"./ui-vendor-CZ9oH99c.js";import{d as u,t as h,B as r,L as x,S as p,e as N,f as S,g as C,h as t,I as A,C as m,c as v,T as Ve,i as He,j as L,k as M,a as I,b as P,l as te}from"./index-CbaydhWW.js";import{T as E,a as V,b as D,c as a,d as H,e as n}from"./table-SvwjoT6S.js";import{D as q,a as G,b as J,c as K,d as W,e as X}from"./dialog-GASJ86Ds.js";import{T as Qe}from"./textarea-Drs0EPqH.js";import{P as Q}from"./progress-BxpaIchm.js";import{R as _e,ak as ae,a0 as ne,U as le,Z as ze,b as Ue,ab as $e,V as qe,s as ce,a4 as Ge,O as Je,a7 as re,K as de}from"./icons-vendor-WGRqNp00.js";import"./react-vendor-Dazix4UH.js";import"./db-vendor-BlTxHScW.js";import"./charts-vendor-CAKBN1xl.js";function rs(){const[ie,xe]=d.useState([]),[he,oe]=d.useState([]),[i,je]=d.useState({totalStudents:0,presentStudents:0,absentStudents:0,lateStudents:0,attendanceRate:0,totalStaff:0,presentStaff:0,absentStaff:0,staffAttendanceRate:0}),[ue,Z]=d.useState([]),[me,ve]=d.useState([]),[fe,ge]=d.useState(!0),[pe,_]=d.useState(!1),[Ne,z]=d.useState(!1),[Ke,We]=d.useState(!1),[Se,Ce]=d.useState(!1),[b,be]=d.useState(new Date().toISOString().split("T")[0]),[O,ke]=d.useState(""),[ye,Ae]=d.useState(""),[U,De]=d.useState(""),[B,we]=d.useState(""),[k,Y]=d.useState(1),[R]=d.useState(15),[o,T]=d.useState({studentId:"",date:new Date().toISOString().split("T")[0],status:"present",checkInTime:"",remarks:""}),[l,f]=d.useState({class:"",section:"",date:new Date().toISOString().split("T")[0],students:[]}),[y,$]=d.useState({class:"",section:"",startDate:"",endDate:"",studentId:""});d.useEffect(()=>{w()},[b,O]);const w=async()=>{try{const[s,c,g,j,Ee]=await Promise.all([u.getStudentAttendance({date:b,class:O}),u.getStaffAttendance({date:b}),u.getAttendanceStats({date:b}),u.getAttendanceReports(y),u.getAttendancePatterns({startDate:b,days:30})]);xe(s),oe(c),je(g),Z(j),ve(Ee)}catch(s){h.error("Failed to load attendance data"),console.error(s)}finally{ge(!1)}},Te=async()=>{try{const s={...o,markedBy:"current_user",markedAt:new Date().toISOString(),parentNotified:!1};await u.markStudentAttendance(s),h.success("Attendance marked successfully"),_(!1),Oe(),w()}catch(s){h.error("Failed to mark attendance"),console.error(s)}},Re=async()=>{try{const s=l.students.map(c=>({studentId:c.studentId,date:l.date,status:c.status,remarks:c.remarks,markedBy:"current_user",markedAt:new Date().toISOString(),parentNotified:!1}));await u.markBulkAttendance(s),h.success("Bulk attendance marked successfully"),z(!1),Be(),w()}catch(s){h.error("Failed to mark bulk attendance"),console.error(s)}},Fe=async s=>{try{await u.enableAutoAttendance({method:s,class:O}),h.success(`${s.toUpperCase()} attendance enabled`),w()}catch(c){h.error(`Failed to enable ${s} attendance`),console.error(c)}},Ie=async()=>{try{const s=await u.generateAttendanceReport(y);Z(s),h.success("Report generated successfully")}catch(s){h.error("Failed to generate report"),console.error(s)}},Pe=async s=>{try{await u.notifyParentsAbsenteeism(s),h.success("Parents notified successfully"),w()}catch(c){h.error("Failed to notify parents"),console.error(c)}},ee=async(s,c)=>{try{const g=await u.getClassStudents({class:s,section:c});f({...l,class:s,section:c,students:g.map(j=>({studentId:j.id,studentName:j.name,rollNumber:j.rollNumber,status:"present",remarks:""}))})}catch(g){h.error("Failed to load class students"),console.error(g)}},Oe=()=>{T({studentId:"",date:new Date().toISOString().split("T")[0],status:"present",checkInTime:"",remarks:""})},Be=()=>{f({class:"",section:"",date:new Date().toISOString().split("T")[0],students:[]})},se=s=>{switch(s){case"present":return"bg-green-100 text-green-800";case"absent":return"bg-red-100 text-red-800";case"late":return"bg-yellow-100 text-yellow-800";case"excused":return"bg-blue-100 text-blue-800";case"half_day":return"bg-orange-100 text-orange-800";case"on_leave":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},F=ie.filter(s=>((s.studentName||"").toLowerCase().includes(U.toLowerCase())||(s.rollNumber||"").toLowerCase().includes(U.toLowerCase()))&&(B==="all"||B===""||s.status===B)),Le=Math.ceil(F.length/R),Me=F.slice((k-1)*R,k*R);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Attendance Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage student and staff attendance"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",onClick:w,children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(q,{open:Se,onOpenChange:Ce,children:[e.jsx(G,{asChild:!0,children:e.jsxs(r,{variant:"outline",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"QR Attendance"]})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(W,{children:"QR Code Attendance"}),e.jsx(X,{children:"Enable QR code based attendance for the selected class"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-48 h-48 bg-gray-100 flex items-center justify-center border-2 border-dashed",children:e.jsx(ae,{className:"h-24 w-24 text-gray-400"})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Students can scan this QR code to mark their attendance"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(r,{onClick:()=>Fe("qr"),children:"Enable QR Attendance"}),e.jsxs(r,{variant:"outline",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Download QR"]})]})]})]})]})]}),e.jsxs(q,{open:Ne,onOpenChange:z,children:[e.jsx(G,{asChild:!0,children:e.jsxs(r,{variant:"outline",children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Bulk Attendance"]})}),e.jsxs(J,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(K,{children:[e.jsx(W,{children:"Mark Bulk Attendance"}),e.jsx(X,{children:"Mark attendance for entire class at once"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"bulkClass",children:"Class"}),e.jsxs(p,{value:l.class,onValueChange:s=>{f({...l,class:s}),s&&l.section&&ee(s,l.section)},children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Select class"})}),e.jsxs(C,{children:[e.jsx(t,{value:"1",children:"Class 1"}),e.jsx(t,{value:"2",children:"Class 2"}),e.jsx(t,{value:"3",children:"Class 3"}),e.jsx(t,{value:"4",children:"Class 4"}),e.jsx(t,{value:"5",children:"Class 5"}),e.jsx(t,{value:"6",children:"Class 6"}),e.jsx(t,{value:"7",children:"Class 7"}),e.jsx(t,{value:"8",children:"Class 8"}),e.jsx(t,{value:"9",children:"Class 9"}),e.jsx(t,{value:"10",children:"Class 10"}),e.jsx(t,{value:"11",children:"Class 11"}),e.jsx(t,{value:"12",children:"Class 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"bulkSection",children:"Section"}),e.jsxs(p,{value:l.section,onValueChange:s=>{f({...l,section:s}),l.class&&s&&ee(l.class,s)},children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Select section"})}),e.jsxs(C,{children:[e.jsx(t,{value:"A",children:"Section A"}),e.jsx(t,{value:"B",children:"Section B"}),e.jsx(t,{value:"C",children:"Section C"}),e.jsx(t,{value:"D",children:"Section D"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"bulkDate",children:"Date"}),e.jsx(A,{id:"bulkDate",type:"date",value:l.date,onChange:s=>f({...l,date:s.target.value})})]})]}),l.students.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Student List"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{size:"sm",variant:"outline",onClick:()=>{const s=l.students.map(c=>({...c,status:"present"}));f({...l,students:s})},children:"Mark All Present"}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>{const s=l.students.map(c=>({...c,status:"absent"}));f({...l,students:s})},children:"Mark All Absent"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(D,{children:[e.jsx(a,{children:"Roll No."}),e.jsx(a,{children:"Student Name"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Remarks"})]})}),e.jsx(H,{children:l.students.map((s,c)=>e.jsxs(D,{children:[e.jsx(n,{children:s.rollNumber}),e.jsx(n,{children:s.studentName}),e.jsx(n,{children:e.jsxs(p,{value:s.status,onValueChange:g=>{const j=[...l.students];j[c].status=g,f({...l,students:j})},children:[e.jsx(N,{className:"w-32",children:e.jsx(S,{})}),e.jsxs(C,{children:[e.jsx(t,{value:"present",children:"Present"}),e.jsx(t,{value:"absent",children:"Absent"}),e.jsx(t,{value:"late",children:"Late"}),e.jsx(t,{value:"excused",children:"Excused"}),e.jsx(t,{value:"half_day",children:"Half Day"})]})]})}),e.jsx(n,{children:e.jsx(A,{value:s.remarks,onChange:g=>{const j=[...l.students];j[c].remarks=g.target.value,f({...l,students:j})},placeholder:"Optional remarks",className:"w-40"})})]},s.studentId))})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(r,{variant:"outline",onClick:()=>z(!1),children:"Cancel"}),e.jsx(r,{onClick:Re,disabled:l.students.length===0,children:"Mark Attendance"})]})]})]}),e.jsxs(q,{open:pe,onOpenChange:_,children:[e.jsx(G,{asChild:!0,children:e.jsxs(r,{children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Mark Attendance"]})}),e.jsxs(J,{children:[e.jsxs(K,{children:[e.jsx(W,{children:"Mark Individual Attendance"}),e.jsx(X,{children:"Mark attendance for a specific student"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"attendanceStudent",children:"Student"}),e.jsxs(p,{value:o.studentId,onValueChange:s=>T({...o,studentId:s}),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Select student"})}),e.jsxs(C,{children:[e.jsx(t,{value:"student1",children:"John Doe - 001"}),e.jsx(t,{value:"student2",children:"Jane Smith - 002"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"attendanceDate",children:"Date"}),e.jsx(A,{id:"attendanceDate",type:"date",value:o.date,onChange:s=>T({...o,date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"checkInTime",children:"Check-in Time"}),e.jsx(A,{id:"checkInTime",type:"time",value:o.checkInTime,onChange:s=>T({...o,checkInTime:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"attendanceStatus",children:"Status"}),e.jsxs(p,{value:o.status,onValueChange:s=>T({...o,status:s}),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"Select status"})}),e.jsxs(C,{children:[e.jsx(t,{value:"present",children:"Present"}),e.jsx(t,{value:"absent",children:"Absent"}),e.jsx(t,{value:"late",children:"Late"}),e.jsx(t,{value:"excused",children:"Excused"}),e.jsx(t,{value:"half_day",children:"Half Day"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"attendanceRemarks",children:"Remarks"}),e.jsx(Qe,{id:"attendanceRemarks",value:o.remarks,onChange:s=>T({...o,remarks:s.target.value}),placeholder:"Enter any remarks"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(r,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(r,{onClick:Te,children:"Mark Attendance"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(m,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Present Students"}),e.jsx("p",{className:"text-2xl font-bold",children:i.presentStudents}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",i.totalStudents]})]}),e.jsx(Ue,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(m,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Absent Students"}),e.jsx("p",{className:"text-2xl font-bold",children:i.absentStudents}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.lateStudents," late"]})]}),e.jsx($e,{className:"h-8 w-8 text-red-600"})]})})}),e.jsx(m,{children:e.jsxs(v,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Attendance Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.attendanceRate,"%"]})]}),e.jsx(qe,{className:"h-8 w-8 text-blue-600"})]}),e.jsx(Q,{value:i.attendanceRate,className:"mt-2"})]})}),e.jsx(m,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Staff Present"}),e.jsx("p",{className:"text-2xl font-bold",children:i.presentStaff}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",i.totalStaff]})]}),e.jsx(le,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsx(m,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"selectedDate",children:"Date"}),e.jsx(A,{id:"selectedDate",type:"date",value:b,onChange:s=>be(s.target.value),className:"w-40"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"classFilter",children:"Class"}),e.jsxs(p,{value:O,onValueChange:ke,children:[e.jsx(N,{className:"w-40",children:e.jsx(S,{placeholder:"All Classes"})}),e.jsxs(C,{children:[e.jsx(t,{value:"all",children:"All Classes"}),e.jsx(t,{value:"1",children:"Class 1"}),e.jsx(t,{value:"2",children:"Class 2"}),e.jsx(t,{value:"3",children:"Class 3"}),e.jsx(t,{value:"4",children:"Class 4"}),e.jsx(t,{value:"5",children:"Class 5"}),e.jsx(t,{value:"6",children:"Class 6"}),e.jsx(t,{value:"7",children:"Class 7"}),e.jsx(t,{value:"8",children:"Class 8"}),e.jsx(t,{value:"9",children:"Class 9"}),e.jsx(t,{value:"10",children:"Class 10"}),e.jsx(t,{value:"11",children:"Class 11"}),e.jsx(t,{value:"12",children:"Class 12"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"sectionFilter",children:"Section"}),e.jsxs(p,{value:ye,onValueChange:Ae,children:[e.jsx(N,{className:"w-40",children:e.jsx(S,{placeholder:"All Sections"})}),e.jsxs(C,{children:[e.jsx(t,{value:"all",children:"All Sections"}),e.jsx(t,{value:"A",children:"Section A"}),e.jsx(t,{value:"B",children:"Section B"}),e.jsx(t,{value:"C",children:"Section C"}),e.jsx(t,{value:"D",children:"Section D"})]})]})]}),e.jsxs(r,{onClick:w,children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Search"]})]})})}),e.jsxs(Ve,{defaultValue:"student-attendance",className:"w-full",children:[e.jsxs(He,{children:[e.jsx(L,{value:"student-attendance",children:"Student Attendance"}),e.jsx(L,{value:"staff-attendance",children:"Staff Attendance"}),e.jsx(L,{value:"reports",children:"Reports"}),e.jsx(L,{value:"analytics",children:"Analytics"})]}),e.jsxs(M,{value:"student-attendance",className:"space-y-4",children:[e.jsx(m,{children:e.jsx(v,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search students...",value:U,onChange:s=>De(s.target.value),className:"pl-10"})]})}),e.jsxs(p,{value:B,onValueChange:we,children:[e.jsxs(N,{className:"w-48",children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),e.jsx(S,{placeholder:"Filter by status"})]}),e.jsxs(C,{children:[e.jsx(t,{value:"all",children:"All Status"}),e.jsx(t,{value:"present",children:"Present"}),e.jsx(t,{value:"absent",children:"Absent"}),e.jsx(t,{value:"late",children:"Late"}),e.jsx(t,{value:"excused",children:"Excused"}),e.jsx(t,{value:"half_day",children:"Half Day"})]})]}),e.jsxs(r,{variant:"outline",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsxs(r,{variant:"outline",onClick:()=>{const s=F.filter(c=>c.status==="absent").map(c=>c.studentId);s.length>0&&Pe(s)},children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Notify Parents"]})]})})}),e.jsxs(m,{children:[e.jsx(I,{children:e.jsxs(P,{children:["Student Attendance - ",new Date(b).toLocaleDateString()]})}),e.jsxs(v,{children:[fe?e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(D,{children:[e.jsx(a,{children:"Roll No."}),e.jsx(a,{children:"Student Name"}),e.jsx(a,{children:"Class"}),e.jsx(a,{children:"Check-in Time"}),e.jsx(a,{children:"Check-out Time"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Marked By"}),e.jsx(a,{children:"Remarks"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(H,{children:Me.map(s=>e.jsxs(D,{children:[e.jsx(n,{children:s.rollNumber}),e.jsx(n,{children:e.jsx("div",{className:"font-medium",children:s.studentName})}),e.jsx(n,{children:s.studentClass}),e.jsx(n,{children:s.checkInTime||"-"}),e.jsx(n,{children:s.checkOutTime||"-"}),e.jsx(n,{children:e.jsx(te,{className:se(s.status),children:s.status.replace("_"," ")})}),e.jsx(n,{children:s.markedBy}),e.jsx(n,{children:s.remarks||"-"}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(de,{className:"h-4 w-4"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(k-1)*R+1," to"," ",Math.min(k*R,F.length)," of"," ",F.length," records"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>Y(k-1),disabled:k===1,children:"Previous"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>Y(k+1),disabled:k===Le,children:"Next"})]})]})]})]})]}),e.jsx(M,{value:"staff-attendance",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(I,{children:e.jsxs(P,{children:["Staff Attendance - ",new Date(b).toLocaleDateString()]})}),e.jsx(v,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(D,{children:[e.jsx(a,{children:"Staff Name"}),e.jsx(a,{children:"Department"}),e.jsx(a,{children:"Check-in"}),e.jsx(a,{children:"Check-out"}),e.jsx(a,{children:"Working Hours"}),e.jsx(a,{children:"Overtime"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(H,{children:he.map(s=>e.jsxs(D,{children:[e.jsx(n,{className:"font-medium",children:s.staffName}),e.jsx(n,{children:s.department}),e.jsx(n,{children:s.checkInTime||"-"}),e.jsx(n,{children:s.checkOutTime||"-"}),e.jsx(n,{children:s.workingHours?`${s.workingHours}h`:"-"}),e.jsx(n,{children:s.overtime?`${s.overtime}h`:"-"}),e.jsx(n,{children:e.jsx(te,{className:se(s.status),children:s.status.replace("_"," ")})}),e.jsx(n,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(de,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})}),e.jsx(M,{value:"reports",className:"space-y-4",children:e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(P,{children:"Attendance Reports"})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"reportClass",children:"Class"}),e.jsxs(p,{value:y.class,onValueChange:s=>$({...y,class:s}),children:[e.jsx(N,{children:e.jsx(S,{placeholder:"All Classes"})}),e.jsxs(C,{children:[e.jsx(t,{value:"all",children:"All Classes"}),e.jsx(t,{value:"1",children:"Class 1"}),e.jsx(t,{value:"5",children:"Class 5"}),e.jsx(t,{value:"10",children:"Class 10"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"reportStartDate",children:"Start Date"}),e.jsx(A,{id:"reportStartDate",type:"date",value:y.startDate,onChange:s=>$({...y,startDate:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"reportEndDate",children:"End Date"}),e.jsx(A,{id:"reportEndDate",type:"date",value:y.endDate,onChange:s=>$({...y,endDate:s.target.value})})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(r,{onClick:Ie,children:"Generate Report"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(E,{children:[e.jsx(V,{children:e.jsxs(D,{children:[e.jsx(a,{children:"Student Name"}),e.jsx(a,{children:"Class"}),e.jsx(a,{children:"Total Days"}),e.jsx(a,{children:"Present"}),e.jsx(a,{children:"Absent"}),e.jsx(a,{children:"Late"}),e.jsx(a,{children:"Attendance %"})]})}),e.jsx(H,{children:ue.map(s=>e.jsxs(D,{children:[e.jsx(n,{className:"font-medium",children:s.studentName}),e.jsx(n,{children:s.class}),e.jsx(n,{children:s.totalDays}),e.jsx(n,{className:"text-green-600",children:s.presentDays}),e.jsx(n,{className:"text-red-600",children:s.absentDays}),e.jsx(n,{className:"text-yellow-600",children:s.lateDays}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:[s.attendancePercentage,"%"]}),e.jsx(Q,{value:s.attendancePercentage,className:"w-16 h-2"})]})})]},s.studentId))})]})})]})]})}),e.jsx(M,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(P,{children:"Attendance Trends"})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-4",children:me.slice(0,7).map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:new Date(s.date).toLocaleDateString()}),e.jsxs("span",{className:"text-sm font-medium",children:[s.attendanceRate,"%"]})]}),e.jsx(Q,{value:s.attendanceRate,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Present: ",s.totalPresent]}),e.jsxs("span",{children:["Absent: ",s.totalAbsent]}),e.jsxs("span",{children:["Late: ",s.totalLate]})]})]},s.date))})})]}),e.jsxs(m,{children:[e.jsx(I,{children:e.jsx(P,{children:"Attendance Summary"})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.presentStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Present Today"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.absentStudents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Absent Today"})]})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[i.attendanceRate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Overall Attendance Rate"}),e.jsx(Q,{value:i.attendanceRate,className:"w-full mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:i.lateStudents}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Late"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:i.totalStudents}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold",children:i.presentStaff}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Staff Present"})]})]})]})})]})]})})]})]})}export{rs as AttendanceManagement};
